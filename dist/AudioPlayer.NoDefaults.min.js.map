{"version":3,"file":"AudioPlayer.NoDefaults.min.js","sources":["../src/AudioPlayerStyles.js","../src/AudioPlayerProviders.js","../src/AudioPlayerHelpers.js","../src/MediaPlaybackRate.js","../src/MediaSleepTimer.js","../src/AudioPlayerNavigation.js","../src/AudioPlayerChapterList.js","../src/MediaProgressBar.js","../src/AudioPlayerMedia.js","../src/AudioPlayerSearch.js","../src/AudioPlayerBibleList.js","../src/AudioPlayer.js"],"sourcesContent":["const defaultClasses = {\n  playerHeader: '',\n  playerContainer: 'w-full mx-auto max-w-7xl',\n  bibleListContainer: '',\n  chapterListContainer: 'relative w-full max-w-4xl mx-auto',\n  bibleListGrid: 'grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3',\n\n  bibleBlockInfoWrap: 'flex flex-row justify-between gap-4 max-w-md w-full mx-auto bg-stone-100 border border-stone-200 mt-12 p-3',\n  bibleBlock: 'flex flex-col justify-between text-sm text-center md:text-base lg:text-lg font-semibold text-black',\n  bibleBlockTitleGroup: 'flex-shrink truncate',\n  bibleBlockVernacular: 'truncate text-sm mb-1',\n  bibleBlockTitle: 'truncate text-2xl font-semibold',\n  bibleBlockLanguageGroup: '',\n  bibleBlockIso: 'text-sm',\n  bibleBlockButtonGroup: 'flex flex-col justify-between',\n\n  container: 'audio-player-container mx-auto max-w-7xl w-full',\n  audio: '',\n  controlsContainer: 'controls-container flex flex-col',\n  navRow: 'flex flex-row items-center justify-center gap-4 py-4 bg-stone-100 border border-stone-200 w-full max-w-md mx-auto',\n  prevBookButton: 'prev-book-button flex justify-center items-center',\n  prevChapterButton: 'prev-chapter-button flex justify-center items-center',\n  playPauseButton: 'play-pause-button flex justify-center items-center',\n  playPauseIcon: 'icon-play',\n  nextChapterButton: 'next-chapter-button flex justify-center items-center',\n  nextBookButton: 'next-book-button flex justify-center items-center',\n  controlRow2: 'grid grid-cols-5 mb-1',\n  leftControls: 'flex flex-row justify-center items-center col-span-2 space-x-6',\n\n  playbackRate: {\n    wrapper: 'flex mx-auto w-full max-w-md justify-center px-8 py-2 bg-stone-100 text-xs',\n    display: 'mx-1 text-stone-400 text-sm',\n    increase: 'w-6 h-6 border-2 rounded-2xl text-stone-500',\n    decrease: 'w-6 h-6 border-2 rounded-2xl text-stone-500',\n    disabled: 'opacity-50'\n  },\n\n  rightControls: 'flex flex-row justify-center items-center col-span-2 space-x-6',\n  playSpeedControl: 'flex flex-row justify-center items-center text-xs',\n  decrementIcon: 'size-6',\n  incrementIcon: 'size-6',\n  decreaseSpeedButton: 'w-6 h-6 border-2 rounded-2xl hover:border-blue-600 dark:hover:border-white text-stone-500 dark:hover:text-white',\n  increaseSpeedButton: 'w-6 h-6 border-2 rounded-2xl hover:border-blue-600 dark:hover:border-white text-stone-500 dark:hover:text-white',\n  prevSkipButton: 'flex justify-center items-center text-stone-400 hover:text-blue-600 dark:text-white dark:hover:text-blue-400',\n  nextSkipButton: 'flex justify-center items-center text-stone-400 hover:text-blue-600 dark:text-white dark:hover:text-blue-400',\n\n  progress: {\n    container: 'relative flex flex-col mx-auto w-full max-w-md justify-around px-1 pt-4 bg-stone-100 text-xs',\n    barContainer: 'flex flex-row justify-between relative z-10',\n    barWrapper: 'mx-auto min-w-80 mx-3 w-3/4 sm:w-5/6 h-3 rounded-lg relative border bg-gradient-to-br shadow-inner border-stone-300 from-white to-stone-200 dark:from-neutral-50 dark:to-stone-400 border-stone-500',\n    barInner: 'h-3 w-0 bg-blue-600 rounded-md',\n    circleTip: 'absolute top-1/2 transform -translate-y-1/2 -translate-x-1/2 w-5 h-5 bg-blue-600 rounded-full border border-blue-500',\n    currentTimeDisplay: 'text-black',\n    durationDisplay: 'text-black',\n    timestamps: 'flex w-5/6 mx-auto h-8 absolute inset-x-2 z-0 block my-4',\n    tick: 'absolute top-0 h-full',\n    tickWrapper: 'group relative h-full bg-stone-400 rounded-sm',\n    tickLabel: 'verse-label hidden group-hover:block absolute left-1/2 -translate-x-1/2 top-full mt-1 px-2 py-1 text-xs bg-gray-200 text-gray-900 rounded-lg shadow border whitespace-nowrap'\n  },\n  \n  mediaPlayerWrap: 'w-full flex flex-col justify-center',\n  mediaPlayerHeader: '',\n  mediaPlayerBody: '',\n  mediaPlayerNavRow: 'grid grid-cols-5 px-2 text-stone-700 dark:text-stone-300 divide-x divide-stone-500 dark:divide-stone-600',\n  bibleListNavButton: '',\n  bookListNavButton: '',\n  chapterListNavButton: '',\n\n  volumeRow: 'flex mx-auto w-full max-w-md justify-center items-center px-8 bg-stone-100 text-xs',\n  volumeControl: 'volume-control w-full',\n  volumeInput: 'w-full',\n  volumeLabel: 'flex flex-row pl-2 mx-4 w-1/2',\n\n  selectBookChapterWrap: 'relative bg-stone-100 flex flex-row gap-2 w-full max-w-md mx-auto',\n  selectBook: 'inline-flex items-center gap-x-1.5 bg-stone-100 hover:bg-stone-200 px-3 py-2 w-full',\n  selectChapter: 'inline-flex items-center text-center bg-stone-100 w-12 hover:bg-stone-200 border-none appearance-none',\n  selectVerseSeparator: 'inline-flex items-center bg-stone-100',\n  selectVerse: \"inline-flex items-center text-center bg-stone-100 w-12 hover:bg-stone-200 border-none appearance-none\",\n\n  bibleButton: {\n    wrapper: 'relative bg-stone-100 border border-stone-200 rounded min-h-20',\n    button: 'flex flex-row bg-stone-100 h-full w-full hover:bg-stone-200',\n    languageWrap: 'py-1 bg-stone-200 h-full w-24 flex flex-col justify-center items-center',\n    language: 'text-sm font-medium text-stone-900',\n    iso: 'truncate font-mono mt-1 text-sm text-stone-500',\n    titleWrap: 'py-1 h-full w-full flex flex-col justify-center items-center',\n    title: 'line-clamp-2 text-center text-sm font-medium text-stone-900',\n    vernacular: 'text-sm text-stone-500 max-w-64',\n    download: 'absolute text-stone-500 right-0 bottom-0 rounded-tl size-8 flex justify-center items-center bg-stone-200 hover:bg-stone-300'\n  },\n\n  bibleDownloadDialog: {\n    wrapper: 'p-4 shadow-lg text-center',\n    button_download: 'px-5 py-2 mx-1 bg-blue-500 text-white rounded cursor-pointer',\n    cancel: 'px-5 py-2 mx-1 bg-red-600 text-white rounded cursor-pointer',\n    audio_copyright: 'block text-stone-600',\n    text_copyright: 'block text-stone-600 text-sm',\n  },\n\n  sleepTimerButton: 'sleep-timer-button group block py-1.5 px-1',\n  sleepTimerDuration: 'text-xs pl-1 pt-2 inline-block timer-display',\n  sleepTimerWrap: 'flex flex-row justify-center align-start text-stone-400 hover:text-blue-600',\n  searchWrapper: 'mx-auto flex items-center w-1/3 my-3',\n  searchInput: 'px-4 py-2 w-full max-w-7xl mx-auto bg-white border border-stone-200',\n  \n  searchInputContainer: 'flex w-full max-w-xl mx-auto my-4',\n  bookListContainer: 'w-full',\n  bookListGrid: 'grid grid-cols-3 md:grid-cols-4 gap-2',\n  bookListButton: 'bg-stone-100 border rounded md:rounded-lg',\n  bookListButtonActive: 'bg-stone-100 border border-stone-300',\n  bookListTitle: 'font-medium text-sm lg:text-base',\n  bookListId: 'w-full flex justify-end opacity-60 text-sm mr-8',\n  chapterButton: 'bg-stone-100/90 w-12 h-12 m-2 border border-stone-700 rounded text-lg hover:bg-stone-300',\n  chapterButtonActive: 'bg-stone-500 text-stone-100'\n};\n\n/**\n * Merges custom CSS class definitions with a set of default classes. If a key in the custom classes starts\n * with an underscore, it will overwrite the corresponding default class after removing the underscore.\n * Keys without an underscore will simply merge by replacing the existing default with the custom class.\n *\n * @param {Object} customClasses - An object containing custom class definitions. Keys starting with\n *                 an underscore indicate classes that should overwrite default classes.\n * @returns {Object} An object containing the merged classes.\n */\nexport const mergeClasses = (customClasses = {}) => {\n  const mergedClasses = { ...defaultClasses };\n  for (const key of Object.keys(customClasses)) {\n    if (key.startsWith('_')) {\n      mergedClasses[key.substring(1)] = customClasses[key];\n    } else {\n      mergedClasses[key] = customClasses[key];\n    }\n  }\n\n  return mergedClasses;\n};\n\nconst defaultIcons = {\n  speedSlow: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 30\"><path d=\"M4.83 10.06a.67.67 0 1 0 0 1.34.67.67 0 0 0 0-1.34zm.56-2.02c.43 0 .85.09 1.22.28 1.07.55 1.4 1.46 1.64 2.4.3 1.22-.07 1.95.12 2.75.17.77 1.14 3.28 4.6 5.41 3.1 1.92 8.61 2.37 15.01.26.44-.14.87-.08 1 .72a13 13 0 0 0 .76 2.78c.15.36.2.66.1.93-.11.27-.35.43-.63.56-.93.42-1.77.6-2.73.63-.36.01-.65-.15-.84-.38a1.6 1.6 0 0 1-.3-.77c-.1-.65-.16-1.37-.16-2.08 0-.25-.13-.39-.4-.25a10.32 10.32 0 0 1-5.08 1.08 9.96 9.96 0 0 1-4.97-1.46c-.25-.16-.44-.02-.44.21-.02.74.03 1.52.14 2.25.06.4.04.71-.14.94-.17.24-.45.33-.76.38a6.5 6.5 0 0 1-2.88-.16 1.26 1.26 0 0 1-.85-.76 2.01 2.01 0 0 1-.1-.93c.13-1.23.06-2.66.69-3.97.17-.36.18-.54-.34-.62-2.83-.38-6.17-2.19-7.4-3.84a3.03 3.03 0 0 1-.54-1.1c-.07-.33-.05-.68.44-.48.58.24 1.24.21 1.88-.03.3-.12.16-.44-.15-.32-.53.16-1.11.05-1.64-.14-.43-.15-.6-.53-.67-.88-.09-.5.08-1 .33-1.38a4.84 4.84 0 0 1 1.8-1.71c.42-.2.86-.31 1.29-.32Zm9.17 1.25.53 2.31a12.91 12.91 0 0 0-2.73 4.28c-.17.5.28.74.41.4.59-1.49 1.6-3.16 2.67-4.3l3.5 1.42a8.7 8.7 0 0 0-.32 2.66c0 .94.1 1.83.12 2.5.02.41.54.4.52.04-.03-.69-.12-1.6-.12-2.54 0-.98.1-1.95.32-2.57l3.99-.54a13.05 13.05 0 0 1 2.63 4.57c.11.35.59.11.5-.16a13.5 13.5 0 0 0-2.67-4.68l1.84-1.84c1.01.45 2.03 1.6 2.75 2.78.4.66.7 1.33.9 1.86.1.26.14.52.18.77l.2-.08c.5-.2.85.02 1.01.42.21.52-.09.9-.47 1.07-7.3 3.24-13.8 2.76-17.06.75-3.33-2.06-4.2-4.46-4.35-5.07-.1-.42.14-.72.5-.83.43-.13.84.03 1.01.44.24-.62.8-1.65 1.29-2.13a5.37 5.37 0 0 1 2.85-1.53zm4.38-1.24c.5-.02 1.02 0 1.52.06 2 .24 3.86 1.1 4.76 2.48l-1.8 1.84-4.12.56-3.7-1.5-.54-2.37a7.93 7.93 0 0 1 3.88-1.07z\" /></svg>`,\n  speedFast: ``,\n  sleepTimer: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" class=\"w-7 h-7\"><path d=\"M22.97 16.84h-3.25l3.56-3.26c.07-.05.1-.08.1-.14a.43.4 0 0 0-.37-.56h-4.38a.45.41 0 0 0 0 .82h3.29l-3.6 3.25a.43.4 0 0 0-.09.43.43.4 0 0 0 .4.25h4.34a.43.4 0 0 0 0-.79zm-6.44 1.98h-2.45l2.79-2.49a.43.4 0 0 0 .06-.45.43.4 0 0 0-.4-.26h-3.48a.45.41 0 0 0 0 .82h2.48l-2.79 2.5-.06.14a.31.28 0 0 0 0 .28.43.4 0 0 0 .37.28h3.5a.45.41 0 0 0 0-.82zm2.75 3.9h-1.42l1.73-1.55.1-.14v-.28a.43.4 0 0 0-.44-.29h-2.48a.43.4 0 0 0 0 .8h1.43l-1.74 1.55a.43.4 0 0 0-.09.46.43.4 0 0 0 .4.22h2.48a.43.4 0 0 0 0-.79z\" style=\"stroke-width:.296239\"/></svg>`,\n  chapters: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"size-6\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0 1 12 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5\" /></svg>`,\n  bibles: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"size-6\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155\" /></svg>`,\n  books: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"size-6\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75Z\" /></svg>`,\n  prevBook: `<svg xmlns=\"http://www.w3.org/2000/svg\" stroke=\"currentColor\" class=\"w-7 h-7 hover:text-blue-600 dark:hover:text-blue-300\" viewBox=\"0 0 23 13\"><g fill=\"none\" fill-rule=\"evenodd\" stroke-linecap=\"round\" stroke-width=\"1.5\"><path stroke-linejoin=\"round\" d=\"M22 2.7c0-.9-1-1.4-1.7-1l-7 4a1.1 1.1 0 0 0 0 2l7 4a1.1 1.1 0 0 0 1.7-.9V2.7h0Zm-9.7 0c0-.9-1-1.4-1.7-1l-7.1 4a1.1 1.1 0 0 0 0 2l7 4a1.1 1.1 0 0 0 1.8-.9V2.7h0Z\"/><path d=\"M1.5 1v11\"/></g></svg>`,\n  nextBook: `<svg xmlns=\"http://www.w3.org/2000/svg\" stroke=\"currentColor\" class=\"w-7 h-7 hover:text-blue-600 dark:hover:text-blue-300\" viewBox=\"0 0 23 13\"><g fill=\"none\" fill-rule=\"evenodd\" stroke-linecap=\"round\" stroke-width=\"1.5\"><path stroke-linejoin=\"round\" d=\"M1 2.7c0-.9 1-1.4 1.7-1l7 4a1.1 1.1 0 0 1 0 2l-7 4a1.1 1.1 0 0 1-1.7-.9V2.7h0Zm9.7 0c0-.9 1-1.4 1.7-1l7.1 4a1.1 1.1 0 0 1 0 2l-7 4a1.1 1.1 0 0 1-1.8-.9V2.7h0Z\"/><path d=\"M21.5 1v11\"/></g></svg>`,\n  prevChapter: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" class=\"w-7 h-7 hover:text-blue-600 dark:hover:text-blue-300\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M21 16.8c0 .9-1 1.4-1.7 1l-7-4a1.1 1.1 0 0 1 0-2l7-4a1.1 1.1 0 0 1 1.7.9v8.1zm-9.8 0c0 .9-.9 1.4-1.6 1l-7.1-4a1.1 1.1 0 0 1 0-2l7-4a1.1 1.1 0 0 1 1.8.9v8.1z\"/></svg>`,\n  nextChapter: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" class=\"w-7 h-7 hover:text-blue-600 dark:hover:text-blue-300\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M3 8.7c0-.9 1-1.4 1.7-1l7 4a1.1 1.1 0 0 1 0 2l-7 4a1.1 1.1 0 0 1-1.7-.9V8.7zm9.8 0c0-.9.9-1.4 1.6-1l7.1 4a1.1 1.1 0 0 1 0 2l-7 4a1.1 1.1 0 0 1-1.8-.9V8.7z\"/></svg>`,\n  prevSkip: `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"w-7 h-7\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path d=\"M16 1a2 2 0 0 0-1.4.6l-3 3a2 2 0 0 0 0 2.8l3 3a2 2 0 1 0 2.8-2.8L15.8 6l1.6-1.6A2 2 0 0 0 16 1zm8 0a2 2 0 0 0-1.4.6l-3 3a2 2 0 0 0 0 2.8l3 3a2 2 0 0 0 3.2-2.3A16 16 0 0 1 24 40 16 16 0 0 1 8 24a2 2 0 1 0-4 0A20 20 0 1 0 25.7 4 2 2 0 0 0 24 1zm.8 16c-.7 0-1.3.5-1.4 1.2l-.9 4.5a1.5 1.5 0 0 0 1.5 1.8h3.3c1 0 1.7.8 1.7 1.8 0 1.4-1 1.7-2 1.7-1.6 0-2.5-.6-2.6-.7a1.5 1.5 0 0 0-1.8 2.4c.1.1 1.7 1.3 4.4 1.3 3 0 5-2 5-4.8 0-2.6-2.1-4.7-4.8-4.7h-1.4l.3-1.5H30a1.5 1.5 0 1 0 0-3h-5.2zm-6.4 0H18l-3 1a1.5 1.5 0 0 0 1 3l1-.4v8.9a1.5 1.5 0 1 0 3 0v-11a1.5 1.5 0 0 0-1.6-1.5z\" style=\"stroke:none;stroke-width:1;stroke-dasharray:none;stroke-linecap:butt;stroke-dashoffset:0;stroke-linejoin:miter;stroke-miterlimit:4;fill-rule:nonzero;opacity:1\" transform=\"matrix(.5 0 0 .5 1 1.7)\"/></svg>`,\n  nextSkip: `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"w-7 h-7\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path d=\"M24 .5A1.5 1.5 0 0 0 23 3l1 1a20 20 0 1 0 21 19.4 1.5 1.5 0 1 0-3 0A17 17 0 1 1 23.8 7.2l-.9.8a1.5 1.5 0 1 0 2.2 2.2l3.5-3.5c.5-.6.5-1.6 0-2.2L25 1c-.3-.3-.7-.4-1.1-.4zm7 0A1.5 1.5 0 0 0 30 3l2.4 2.4-2.5 2.4a1.5 1.5 0 1 0 2.2 2.2l3.5-3.5c.5-.6.5-1.6 0-2.2L32 1c-.3-.3-.7-.4-1.1-.4zM19.6 17h-.3l-3 1a1.3 1.3 0 0 0 .8 2.4l1.4-.4v9.8a1.3 1.3 0 1 0 2.5 0V18.1a1.2 1.2 0 0 0-1.4-1.2zm6.1 0c-.6 0-1.1.4-1.2 1l-.8 4.8a1.3 1.3 0 0 0 1.2 1.5h3.5a2 2 0 0 1 2 2c0 .8-.1 1.2-.5 1.6a3 3 0 0 1-1.8.5c-1.7 0-3-.8-3-.8a1.3 1.3 0 1 0-1.5 2c.5.3 2 1.3 4.5 1.3a5 5 0 0 0 3.5-1.2 4.6 4.6 0 0 0-3.2-8h-2l.4-2.2h4.5a1.3 1.3 0 1 0 0-2.5h-5.6z\" style=\"stroke:none;stroke-width:1;stroke-dasharray:none;stroke-linecap:butt;stroke-dashoffset:0;stroke-linejoin:miter;stroke-miterlimit:4;fill-rule:nonzero\" transform=\"matrix(.5 0 0 .5 .5 1.8)\"/></svg>`,\n  play: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" class=\"w-10 h-10 hover:text-blue-400\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M5.3 5.7c0-.9.9-1.4 1.6-1L18.5 11a1.1 1.1 0 0 1 0 2L6.9 19.3a1.1 1.1 0 0 1-1.6-1V5.7z\"/></svg>`,\n  pause: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" class=\"w-10 h-10 hover:text-blue-600 dark:hover:text-blue-300\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M15.8 5.3v13.4M8.2 5.3v13.4\"/></svg>`,\n  volumeIcon: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" class=\"size-5\" viewBox=\"0 0 20 20\"><path d=\"M11 4a1 1 0 0 0-2-1L5 7H3a1 1 0 0 0-1 0 7 7 0 0 0 0 3v3h3l4 4a1 1 0 0 0 2-1V4Zm5 1a1 1 0 0 0-1 1 6 6 0 0 1 0 8 1 1 0 0 0 1 1 7 7 0 0 0 0-10Z\"/><path d=\"M14 7a1 1 0 0 0-1 1 3 3 0 0 1 0 4 1 1 0 0 0 1 1 4 4 0 0 0 0-6Z\"/></svg>`,\n  download: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" class=\"size-5\"><path fill-rule=\"evenodd\" d=\"M2 4.75C2 3.784 2.784 3 3.75 3h4.836c.464 0 .909.184 1.237.513l1.414 1.414a.25.25 0 0 0 .177.073h4.836c.966 0 1.75.784 1.75 1.75v8.5A1.75 1.75 0 0 1 16.25 17H3.75A1.75 1.75 0 0 1 2 15.25V4.75Zm8.75 4a.75.75 0 0 0-1.5 0v2.546l-.943-1.048a.75.75 0 1 0-1.114 1.004l2.25 2.5a.75.75 0 0 0 1.114 0l2.25-2.5a.75.75 0 1 0-1.114-1.004l-.943 1.048V8.75Z\" clip-rule=\"evenodd\" /></svg>`\n}\n\nexport const mergeIcons = (customIcons = {}) => {\n  const mergedIcons = { ...defaultIcons };\n  for (const key of Object.keys(customIcons)) {\n    mergedIcons[key] = customIcons[key];\n  }\n  return mergedIcons;\n};\n\nconst defaultArt = {}\nexport const mergeArt = (customArt = {}) => {\n  const mergedArt = { ...defaultArt };\n  for (const key of Object.keys(customArt)) {\n    mergedArt[key] = customArt[key];\n  }\n  return mergedArt;\n};","const BASE_API_URL = 'https://arc.dbs.org';\nconst BASE_CONTENT_URL = 'https://content.dbs.org';\nconst BASE_DBP_URL = 'https://4.dbt.io/api/bibles';\n\nexport async function loadProviders(player) {\n    const providerFunctions = {\n        hark: harkList,\n        dbp: dbpList,\n    };\n      \n    for (const provider of player.providers) {\n        if (providerFunctions[provider]) {\n          player.bibles = player.bibles.concat(await providerFunctions[provider]());\n        }\n    }\n    for (let i = 0; i < player.bibles.length; i++) {\n        let customTitle = player.titles[player.bibles[i].id];\n        if(customTitle) {\n            player.bibles[i].tt = customTitle.tt;\n            player.bibles[i].tv = customTitle.tv;\n        }\n    }\n}\n\nexport async function harkList(country_id = 'all', provider = 'all') {\n    const bibles = await fetch(`${BASE_CONTENT_URL}/bibles/audio-new/index.json`).then(response => response.json());\n    const output = bibles.map(bible => ({\n        ...bible,\n        tp: \"hark\",\n        dl: (bible.dl) ? `${BASE_CONTENT_URL}/bibles/audio-new/${bible.id}.zip` : \"\"\n    }));\n    if (country_id !== 'all') {\n        output = output.filter(bible => bible.ci === country_id);\n    }\n\n    if (provider !== 'all') {\n        output = output.filter(bible => bible.id.includes(provider));\n    }\n\n    return output;\n}\n\nexport async function harkSelect(id) {\n    const books = {\n        \"01\": \"GEN\", \"02\": \"EXO\", \"03\": \"LEV\", \"04\": \"NUM\", \"05\": \"DEU\", \"06\": \"JOS\",\n        \"07\": \"JDG\", \"08\": \"RUT\", \"09\": \"1SA\", \"10\": \"2SA\", \"11\": \"1KI\", \"12\": \"2KI\",\n        \"13\": \"1CH\", \"14\": \"2CH\", \"15\": \"EZR\", \"16\": \"NEH\", \"17\": \"EST\", \"18\": \"JOB\",\n        \"19\": \"PSA\", \"20\": \"PRO\", \"21\": \"ECC\", \"22\": \"SNG\", \"23\": \"ISA\", \"24\": \"JER\",\n        \"25\": \"LAM\", \"26\": \"EZK\", \"27\": \"DAN\", \"28\": \"HOS\", \"29\": \"JOL\", \"30\": \"AMO\",\n        \"31\": \"OBA\", \"32\": \"JON\", \"33\": \"MIC\", \"34\": \"NAM\", \"35\": \"HAB\", \"36\": \"ZEP\",\n        \"37\": \"HAG\", \"38\": \"ZEC\", \"39\": \"MAL\", \"40\": \"MAT\", \"41\": \"MRK\", \"42\": \"LUK\",\n        \"43\": \"JHN\", \"44\": \"ACT\", \"45\": \"ROM\", \"46\": \"1CO\", \"47\": \"2CO\", \"48\": \"GAL\",\n        \"49\": \"EPH\", \"50\": \"PHP\", \"51\": \"COL\", \"52\": \"1TH\", \"53\": \"2TH\", \"54\": \"1TI\",\n        \"55\": \"2TI\", \"56\": \"TIT\", \"57\": \"PHM\", \"58\": \"HEB\", \"59\": \"JAS\", \"60\": \"1PE\",\n        \"61\": \"2PE\", \"62\": \"1JN\", \"63\": \"2JN\", \"64\": \"3JN\", \"65\": \"JUD\", \"66\": \"REV\"\n    };\n\n    const filenameRequest = await fetch(`${BASE_CONTENT_URL}/bibles/audio-new/${id}/index.txt`);\n    const filenames = await filenameRequest.text();\n    const booksMap = new Map();\n    const filenamePattern = /^(\\d+)_(\\w+)_(\\d+)\\.mp3$/;\n\n    filenames.split('\\n').sort().forEach((filename) => {\n        const match = filename.match(filenamePattern);\n        if (match) {\n            const [, bookNumber, bookName, chapterString] = match;\n            const chapterNumber = parseInt(chapterString, 10);\n            const key = books[bookNumber];\n            if (!booksMap.has(key)) {\n                booksMap.set(key, {\n                    name: bookName,\n                    book_number: bookNumber,\n                    book_id: key,\n                    chapters: []\n                });\n            }\n            booksMap.get(key).chapters.push(chapterNumber);\n        }\n    });\n\n    let timingFiles = [];\n    const response = await fetch(`${BASE_CONTENT_URL}/bibles/audio-new/${id}/timingfiles/_index.txt`);\n    if (response.ok) {\n        timingFiles = (await response.text()).split(\"\\n\");\n    } else {\n        console.warn('timing files could not be found');\n    }\n\n    for (const book of booksMap.values()) {\n        book.chapters.sort((a, b) => a - b);\n    }\n\n    return {\n        bible_id: id,\n        bible_folder: id,\n        timestamps: timingFiles,\n        data: Array.from(booksMap.values())\n    };\n}\n\nexport async function dbpList(country_id) {\n    let initial_path = `https://4.dbt.io/api/bibles?v=4&key=${key}&media=audio`;\n    if (country_id) {\n        initial_path += '&country=' + country_id;\n    }\n    bibles = await fetch(initial_path).then(function (response) {\n        return response.json();\n    });\n    let last_page = bibles.meta.pagination.last_page;\n    let current_page = 1;\n    while (current_page >= last_page) {\n        current_page++;\n        results = await fetch(initial_path + 'page=' + current_page).then(function (response) {\n            return response.json();\n        });\n        bibles.data.concat(results.data);\n    }\n\n    return bibles;\n}\n\nexport async function dbpAudioFileSet(bibleId, filesets) {\n    for (const fileset of filesets) {\n        if (fileset.codec === 'mp3') {\n            current_fileset = fileset.id;\n            break;\n        }\n    }\n\n    let books = await fetch(`https://4.dbt.io/api/bibles/${bibleId}/book?v=4&key=${key}`).then(\n        function (response) {\n            return response.json();\n        }\n    );\n    current_books.data = books['data'];\n    current_books.visible = true\n}\n\nexport async function dbpCurrentChapter(bible, book, chapter) {\n    current_chapter = await fetch(`https://4.dbt.io/api/bibles/filesets/${bible}/${book}/${chapter}?v=4&key=${key}`)\n    .then(function (response) {\n        return response.json();\n    });\n    current_chapter = current_chapter['data'][0].path;\n}\n\nexport async function selectBible(ctx, id) {\n    ctx.query = '';\n    const books = await harkSelect(id);\n    ctx.currentBooks = books;\n\n    const selectedBible = ctx.bibles.find(bible => bible.id === ctx.currentBooks.bible_id);\n    ctx.currentBible = selectedBible;\n    const url = new URL(window.location);\n    url.searchParams.set('id', ctx.currentBible.id);\n    await setBookAndChapter(ctx, books.data[0], 1);\n}\n\nasync function setBookAndChapter(ctx, book, chapter) {\n    ctx.currentBook = book;\n    await setCurrentChapter(ctx, book, chapter);\n}\n\nexport async function setCurrentChapter(ctx, book, chapter) {\n\n    ctx.currentBook = book;\n    let safeChapter = chapter;\n\n\n    if (!book?.chapters?.includes(chapter)) {\n        safeChapter = 1;\n    }\n\n    if (ctx.currentType === 'hark') {\n        const padLength = (book.book_number === \"19\") ? 3 : 2;\n\n        ctx.currentChapter = {\n            path: `https://content.dbs.org/bibles/audio-new/${ctx.currentBooks.bible_folder}/${book.book_number}_${book.name}_${safeChapter.toString().padStart(padLength, '0')}.mp3`,\n            title: `${book.name} ${safeChapter}`,\n            number: safeChapter,\n            book_id: book.book_id,\n            timestamps: []\n        };\n        ctx.audio.src = ctx.currentChapter.path\n\n        const url = new URL(window.location);\n        url.searchParams.set('book', book.book_id);\n        url.searchParams.set('c', safeChapter);\n\n        if (Array.isArray(ctx.currentBooks.timestamps) && ctx.currentBooks.timestamps.length > 0) {\n            const timestampRegex = /Verse (\\d+)\t(\\d+:\\d+:\\d+\\.\\d+)/gm;\n            let timestampsText = await fetch(`https://content.dbs.org/bibles/audio-new/${ctx.currentBooks.bible_folder}/timingfiles/${ctx.currentBook.book_id}_${safeChapter.toString().padStart(3, '0')}.txt`).then(function (response) {\n                return response.text();\n            }).catch((error) => {\n                console.error('Error:', error);\n            })\n\n            let verseTimestamps = [];\n            let match;\n            while ((match = timestampRegex.exec(timestampsText)) !== null) {\n                // Extract verse number and timestamp from the regex match\n                const verseNumber = match[1];\n                const timestamp = match[2];\n                verseTimestamps.push(timestamp);\n            }\n\n            //await currentBook = book;\n            ctx.currentChapter.timestamps = verseTimestamps;\n            //ctx.currentChapter.sentiments = verseSentiments\n        }\n    }\n}","export function elem(tag, props = {}) {\n    const el = document.createElement(tag);\n    for (const [key, val] of Object.entries(props)) {\n        if (key === 'style' && typeof val === 'object') {\n            Object.assign(el.style, val);\n        } else {\n            el[key] = val;\n        }\n    }\n    return el;\n}\n\nexport function formatTime(timeInSeconds) {\n    const minutes = (timeInSeconds / 60) | 0;\n    const seconds = (timeInSeconds % 60) | 0;\n    return `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;\n}\n\nexport const parseTimestampToSeconds = (timestampStr) => {\n    const [hours, minutes, seconds] = timestampStr.split(':');\n    return (parseInt(hours, 10) * 3600) + (parseInt(minutes, 10) * 60) + parseFloat(seconds);\n}\n\nHTMLDialogElement.prototype.triggerShow = HTMLDialogElement.prototype.showModal;\nHTMLDialogElement.prototype.showModal = function() {\n    this.triggerShow();\n    this.onclick = event => {\n        let rect = this.getBoundingClientRect();\n        if(event.clientY < rect.top || event.clientY > rect.bottom) return this.close();\n        if(event.clientX < rect.left || event.clientX > rect.right) return this.close();\n    }\n}","import { elem } from \"./AudioPlayerHelpers.js\";\n\nexport function createPlaybackRateControls(ctx) {\n    const MIN_RATE = ctx.options?.playbackRate?.min ?? 0.5;\n    const MAX_RATE = ctx.options?.playbackRate?.max ?? 2.25;\n    const STEP = ctx.options?.playbackRate?.step ?? 0.25;\n\n    const updateButtonState = (button, isDisabled) => {\n        button.className = `${button.baseClassName} ${isDisabled ? ctx.class.playbackRate?.disabled : ''}`;\n    };\n    const changeRate = (delta) => {\n        ctx.audio.playbackRate = Math.min(MAX_RATE, Math.max(MIN_RATE, ctx.audio.playbackRate + delta));\n        playbackRateElem.textContent = ctx.audio.playbackRate.toFixed(2);\n        \n        updateButtonState(decrementButton, ctx.audio.playbackRate === MIN_RATE);\n        updateButtonState(incrementButton, ctx.audio.playbackRate === MAX_RATE);\n    };\n\n    const playbackRateWrapperElem = elem('div', { className: ctx.class.playbackRate?.wrapper });\n    const decrementButton = elem('button', {\n        baseClassName: ctx.class.playbackRate?.decrease,\n        className: ctx.class.playbackRate?.decrease,\n        textContent: '-',\n        onclick: () => changeRate(-STEP),\n    });\n\n    const playbackRateElem = elem('span', {\n        className: ctx.class.playbackRate?.display,\n        textContent: ctx.audio.playbackRate.toFixed(2),\n    });\n    const incrementButton = elem('button', {\n        baseClassName: ctx.class.playbackRate?.increase,\n        className: ctx.class.playbackRate?.increase,\n        textContent: '+',\n        onclick: () => changeRate(STEP),\n    });\n\n    playbackRateWrapperElem.append(decrementButton, playbackRateElem, incrementButton);\n    return playbackRateWrapperElem;\n}\n\n","import { elem, formatTime } from \"./AudioPlayerHelpers.js\";\n\nexport function createVolumeAndSleepControls(ctx) {\n    const volumeRow = elem('div', { className: ctx.class.volumeRow });\n    const volumeInput = elem('input', {\n        type: 'range',\n        min: '0',\n        max: '1',\n        step: '0.01',\n        className: ctx.class.volumeInput,\n        id: 'volume-control',\n        value: ctx.audio.volume,\n        'aria-label': 'Volume Control'\n    });\n    volumeInput.addEventListener('input', () => {ctx.audio.volume = parseFloat(volumeInput.value)});\n    const volumeLabel = elem('label', {\n        htmlFor: 'volume-control',\n        className: ctx.class.volumeLabel,\n        innerHTML: ctx.icons.volumeIcon\n    });\n    volumeLabel.appendChild(volumeInput);\n    volumeRow.appendChild(volumeLabel);\n\n    const sleepTimerButton = createSleepTimer(ctx, volumeInput);\n    volumeRow.appendChild(sleepTimerButton)\n    return volumeRow;\n}\n\nfunction createSleepTimer(ctx, volumeInput) {\n    const sleepTimerButton = elem('button', {className: ctx.class.sleepTimerButton,innerHTML: ctx.icons.sleepTimer,'aria-label': 'Sleep Timer'});\n    let sleepTimer = null;\n    let elapsedTime = 0;\n    const sleepDuration = 1 * 60 * 1000;\n    const sleepTimerDuration = elem('span', {className: ctx.class.sleepTimerDuration,textContent: formatTime(sleepDuration / 1000),'aria-live': 'polite'});\n    sleepTimerButton.appendChild(sleepTimerDuration);\n    sleepTimerButton.addEventListener('click', () => {\n        if (sleepTimer) {\n            clearInterval(sleepTimer);\n            sleepTimer = null;\n            volumeInput.value = 1;\n            ctx.audio.volume = 1;\n            elapsedTime = 0;\n            updateSleepTimerUI(sleepDuration);\n        } else {\n            elapsedTime = 0;\n            sleepTimer = setInterval(() => {\n                elapsedTime += 1000;\n                const remainingTime = sleepDuration - elapsedTime;\n                const newVolume = remainingTime / sleepDuration;\n\n                volumeInput.value = Math.max(0, newVolume);\n                ctx.audio.volume = parseFloat(volumeInput.value);\n                updateSleepTimerUI(remainingTime);\n\n                if (elapsedTime >= sleepDuration) {\n                    clearInterval(sleepTimer);\n                    sleepTimer = null;\n                    ctx.audio.pause();\n                    updateSleepTimerUI(0);\n                }\n            }, 1000);\n        }\n    });\n\n    function updateSleepTimerUI(remainingTime) {\n        const percentageElapsed = elapsedTime / sleepDuration;\n        const dashArray = 2 * Math.PI * 9;\n        sleepTimerDuration.textContent = formatTime(remainingTime / 1000);\n        const sleepIcon = sleepTimerButton.querySelector('svg circle:nth-child(2)');\n        if (sleepIcon) {\n            sleepIcon.setAttribute('stroke-dashoffset', (1 - percentageElapsed) * dashArray);\n        }\n    }\n    return sleepTimerButton;\n}\n","import { elem } from \"./AudioPlayerHelpers.js\";\n\nexport function createBibleBlockButtons(ctx) {\n    let bibleBlockButtonGroup = elem('div', {\n        id: `${ctx.idPrefix}-bible-block`,\n        className: ctx.class.bibleBlockButtonGroup });\n    const buttons = [\n        {\n            condition: true,\n            innerHTML: ctx.icons.bibles,\n            className: ctx.class.bibleListNavButton,\n            onclick: () => {ctx.view = 'bible';ctx.render()}\n        },\n        {\n            condition: ctx.view === \"book\",\n            innerHTML: ctx.icons.books,\n            className: ctx.class.bookListNavButton,\n            onclick: () => {ctx.view = 'chapter';ctx.render()}\n        },\n        {\n            condition: ctx.view === \"chapter\",\n            innerHTML: ctx.icons.chapters,\n            className: ctx.class.chapterListNavButton,\n            onclick: () => {ctx.view = 'book';ctx.render()}\n        }\n    ];\n    buttons.forEach(({ condition, innerHTML, className, onclick }) => {\n        if (condition) {\n            bibleBlockButtonGroup.appendChild(elem('button', {\n                innerHTML,\n                className,\n                onclick\n            }));\n        }\n    });\n    return bibleBlockButtonGroup;\n}\n","import { setCurrentChapter } from \"./AudioPlayerProviders.js\";\nimport { elem, parseTimestampToSeconds } from './AudioPlayerHelpers.js'\nimport { createBibleBlockButtons } from \"./AudioPlayerNavigation.js\";\n\n\nexport function updateCurrentBibleBlock(ctx, bible) {\n    ctx.bibleBlock.innerHTML = '';\n    ctx.bibleBlock.className = ctx.class.bibleBlock;\n    const bibleBlockInfoWrap = createBibleBlockInfoWrap(ctx, bible);\n    const chapterBookSelectWrapper = elem('div', { className: ctx.class.selectBookChapterWrap });\n    chapterBookSelectWrapper.append(createBookSelector(ctx), createChapterSelector(ctx));\n    createVerseSelector(ctx, chapterBookSelectWrapper);\n    bibleBlockInfoWrap.append(createBibleBlockButtons(ctx));\n    ctx.bibleBlock.append(bibleBlockInfoWrap,chapterBookSelectWrapper);\n    updateBookList(ctx);\n}\n\nfunction createBibleBlockInfoWrap(ctx, bible) {\n    const bibleBlockInfoWrap = elem('div', { className: ctx.class.bibleBlockInfoWrap });\n    const bibleBlockLanguageGroup = elem('div', { className: ctx.class.bibleBlockLanguageGroup });\n    bibleBlockLanguageGroup.append(\n        elem('div', { className: ctx.class.bibleBlockIso, innerText: bible.iso }),\n        elem('div', { innerText: bible.cn })\n    );\n    bibleBlockInfoWrap.append(bibleBlockLanguageGroup);\n    const bibleBlockTitleGroup = elem('div', { className: ctx.class.bibleBlockTitleGroup });\n    bibleBlockTitleGroup.appendChild(elem('div', { className: ctx.class.bibleBlockTitle, innerText: bible.tt }));\n    if (bible.tv && bible.tv !== bible.tt) {\n        bibleBlockTitleGroup.appendChild(elem('div', { className: ctx.class.bibleBlockVernacular, innerText: bible.tv }));\n    }\n    bibleBlockInfoWrap.appendChild(bibleBlockTitleGroup);\n    return bibleBlockInfoWrap;\n}\n\nexport function updateBookList(ctx) {\n    const bookListGrid = ctx.bookListGrid;\n    bookListGrid.innerHTML = '';\n    if (ctx.resultsBooks && ctx.resultsBooks.length && ctx.query !== '') {\n        ctx.resultsBooks.forEach(result => {\n            bookListGrid.appendChild(createBookButton(ctx, result.item));\n        });\n    } else if (ctx.currentBooks && ctx.query === '') {\n        if (ctx.currentBooks['data']) {\n            ctx.currentBooks['data'].forEach(book => {\n                bookListGrid.appendChild(createBookButton(ctx, book));\n            });\n        }\n    }\n}\n\nexport function createBookButton(ctx, book) {\n    const button = elem('button', {\n        className: `${book.book_id} ${ctx.class.bookListButton} ${((ctx.currentBook.book_id == book.book_id) ? ctx.class.bookListButtonActive : '')}`,\n        ariaLabel: book.name,\n        onclick: () => handleBookChange(ctx, book.book_id)\n    });\n    button.dataset.bookId = book.book_id;\n    const contentContainer = elem('div');\n    contentContainer.append(\n        elem('h2', { className: ctx.class.bookListTitle, textContent: book.name }),\n        elem('h3', { className: ctx.class.bookListId, textContent: book.book_id })\n    );\n    button.appendChild(contentContainer);\n    return button;\n}\n\nexport function handleBookChange(ctx, bookId, chapter = 1) {\n    const selectedBook = ctx.currentBooks.data.find(book => book.book_id === bookId);\n    if (!selectedBook) return;\n\n    setCurrentChapter(selectedBook, chapter);\n    const url = new URL(window.location);\n    url.searchParams.set('bookId', selectedBook.book_id);\n    window.history.replaceState({}, '', url);\n\n    ctx.query = '';\n    ctx.chapterListContainer.style.display = \"block\";\n    ctx.view = \"chapter\";\n    ctx.currentBook = selectedBook;\n\n    chapterList(ctx);\n    updateCurrentBibleBlock(ctx, ctx.currentBible);\n}\n\nfunction createBookSelector(ctx) {\n    const bookSelect = elem('select', { className: ctx.class.selectBook });\n    if (ctx.currentBooks && ctx.currentBooks.data) {\n        ctx.currentBooks.data.forEach(book => {\n            const option = elem('option', {\n                value: book.book_id,\n                innerText: book.name,\n                selected: (book.book_id === ctx.currentBook.book_id)\n            });\n            bookSelect.appendChild(option);\n        });\n    }\n    bookSelect.addEventListener('change', (event) => {\n        handleBookChange(ctx, event.target.value);\n    });\n    ctx.bookSelect = bookSelect;\n    return bookSelect;\n}\n\nfunction createChapterSelector(ctx) {\n    const chapterSelect = elem('select', { className: ctx.class.selectChapter });\n    if (ctx.currentBook && ctx.currentBook.chapters) {\n        ctx.currentBook.chapters.forEach(chapter => {\n            const option = elem('option', {\n                value: chapter,\n                innerText: chapter,\n                selected: (chapter == ctx.currentChapter.number)\n            });\n            chapterSelect.appendChild(option);\n        });\n    }\n    chapterSelect.addEventListener('change', (event) => \n        handleChapterChange(ctx, ctx.currentBook, parseInt(event.target.value))\n    );\n    ctx.chapterSelect = chapterSelect;\n    return chapterSelect;\n}\n\nfunction createVerseSelector(ctx, chapterBookSelectWrapper) {\n    if (!ctx.currentChapter || !ctx.currentChapter.timestamps || ctx.currentChapter.timestamps.length == 0) return; \n    const verseSelect = elem('select', { className: ctx.class.selectVerse });\n    ctx.currentChapter.timestamps.forEach((timestamp, index) => {\n        const verseNumber = index + 1;\n        const option = elem('option', {\n            value: verseNumber,\n            innerText: `${verseNumber}`\n        });\n        verseSelect.appendChild(option);\n    });\n    verseSelect.addEventListener('change', (event) => {\n        const selectedVerse = parseInt(event.target.value, 10);\n        const verseIndex = selectedVerse - 1;\n        if (ctx.currentChapter.timestamps && ctx.currentChapter.timestamps[verseIndex]) {\n            const tsStr = ctx.currentChapter.timestamps[verseIndex];\n            const verseTime = parseTimestampToSeconds(tsStr);\n            ctx.audio.currentTime = verseTime;\n        }\n    });\n    const verseColonSeparator = elem('div', {innerText: ':',className: ctx.class.selectVerseSeparator});\n    chapterBookSelectWrapper.append(verseColonSeparator,verseSelect);\n    ctx.verseSelect = verseSelect;\n    addVerseHighlightOnTimeUpdate(ctx);\n}\n\nfunction addVerseHighlightOnTimeUpdate(ctx) {\n    let lastSelectedVerse = null;\n    ctx.audio.addEventListener('timeupdate', () => {\n        const currentTime = ctx.audio.currentTime;\n        const verseTimes = ctx.currentChapter.timestamps;\n        let currentVerseIndex = -1;\n        for (let i = 0; i < verseTimes.length; i++) {\n            if (currentTime >= parseTimestampToSeconds(verseTimes[i])) {\n                currentVerseIndex = i;\n            } else {\n                break;\n            }\n        }\n        if (currentVerseIndex !== -1 && currentVerseIndex !== lastSelectedVerse) {\n            lastSelectedVerse = currentVerseIndex;\n            ctx.verseSelect.value = currentVerseIndex + 1;\n        }\n    });\n}\n\nexport function chapterList(ctx) {\n    ctx.chapterListContainer.innerHTML = '';\n    ctx.bibleListContainer.style.display = 'none';\n    ctx.bookListContainer.style.display = 'none';\n    ctx.chapterListContainer.style.display = 'block';\n\n    const fragment = document.createDocumentFragment();\n    ctx.currentBook.chapters.forEach(chapterNumber => {\n\n        const chapterButton = elem('button', {\n            className: `${ctx.class.chapterButton} ${(ctx.currentChapter.number == chapterNumber) ? ' ' + ctx.class.chapterButtonActive : ''}`,\n            ariaLabel: `Play Chapter ${chapterNumber}`,\n            textContent: chapterNumber,\n            onclick: () => handleChapterChange(ctx, ctx.currentBook, chapterNumber)\n        });\n\n        fragment.appendChild(chapterButton)}\n    );\n    ctx.chapterListContainer.appendChild(fragment);\n    if(ctx.currentBook?.book_id) {\n        const bookArt = ctx.art[ctx.currentBook.book_id]?.[0];\n        if (!bookArt) {\n            console.warn(`No art found for book ID: ${ctx.currentBook.book_id}`);\n            return;\n        }\n        const artElement = document.createElement('img');\n        artElement.src = `./img/chars/${bookArt.file}`;\n        artElement.className = bookArt.class;\n        ctx.chapterListContainer.appendChild(artElement);\n    }\n}\n\nexport function handleChapterChange(ctx, book, chapterNumber) {\n    setCurrentChapter(ctx, book, chapterNumber);\n    ctx.chapterSelect.value = chapterNumber\n    ctx.audio.play();\n    const playPauseIcon = document.querySelector(`.icon-play`);\n    playPauseIcon.innerHTML = ctx.audio.paused ? ctx.icons.play : ctx.icons.pause;\n    chapterList(ctx)\n}","import { elem, formatTime, parseTimestampToSeconds } from \"./AudioPlayerHelpers.js\";\n\nexport function createProgressBar(ctx) {\n    function seekAudio(event, ctx, progressWrapper) {\n        const rect = progressWrapper.getBoundingClientRect();\n        const clickRatio = (event.clientX - rect.left) / rect.width;\n        ctx.audio.currentTime = Math.max(0, Math.min(clickRatio, 1)) * ctx.audio.duration;\n    }\n\n    const progressContainer = elem('div', { className: ctx.class?.progress?.container });\n    const currentTimeDisplay = elem('div', {\n        id: 'currentTime',\n        className: ctx.class?.progress?.currentTimeDisplay,\n        textContent: formatTime(ctx.audio.currentTime)\n    });\n\n    const progressBarContainer = elem('div', { id: 'progress-barContainer', className: ctx.class?.progress?.barContainer });\n    const progressWrapper = elem('div', { id: 'progress-barWrapper', className: ctx.class?.progress?.barWrapper });\n    const progressBarInner = elem('div', { id: 'progress-bar', className: ctx.class?.progress?.barInner, style: { width: '0%' } });\n\n    const timestampWrapper = elem('div', {id: 'timestamps-wrapper', className:ctx.class?.progress?.timestamps})\n\n    const circleTip = elem('div', { \n        className: ctx.class?.progress?.circleTip, \n        style: { left: '0%' } \n    });\n\n    progressWrapper.append(progressBarInner, circleTip);\n    const onMouseMove = (event) => {\n        if (ctx.isDragging) {\n            seekAudio(event, ctx, progressWrapper);\n        }\n    };\n\n    const onMouseUp = () => {\n        if (ctx.isDragging) {\n            ctx.isDragging = false;\n            document.body.style.userSelect = '';\n            document.removeEventListener('mousemove', onMouseMove);\n            document.removeEventListener('mouseup', onMouseUp);\n        }\n    };\n\n    progressWrapper.addEventListener('mousedown', () => {\n        ctx.isDragging = true;\n        document.body.style.userSelect = 'none';\n        document.addEventListener('mousemove', onMouseMove);\n        document.addEventListener('mouseup', onMouseUp);\n    });\n\n    progressWrapper.addEventListener('click', (e) => {\n        seekAudio(e, ctx, progressWrapper);\n    });\n\n    const durationDisplay = elem('div', {\n        className: ctx.class?.progress?.durationDisplay,\n        textContent: formatTime(ctx.audio.duration || 0)\n    });\n\n    ctx.audio.addEventListener('timeupdate', () => {\n        const progressPercent = (ctx.audio.currentTime / ctx.audio.duration) * 100;\n        progressBarInner.style.width = `${progressPercent}%`;\n        circleTip.style.left = `calc(${progressPercent}% - 3px)`;\n        currentTimeDisplay.textContent = formatTime(ctx.audio.currentTime);\n    });\n\n    ctx.audio.addEventListener('loadedmetadata', () => {\n        timestampWrapper.innerHTML = '';\n        durationDisplay.textContent = formatTime(ctx.audio.duration);\n      \n        if (ctx.currentChapter.timestamps && Array.isArray(ctx.currentChapter.timestamps)) {\n          const sortedTimestamps = ctx.currentChapter.timestamps.map(parseTimestampToSeconds).filter(ts => ts >= 0 && ts <= ctx.audio.duration).sort((a, b) => a - b);\n          const margin = .25;\n      \n          for (let i = 0; i < sortedTimestamps.length - 1; i++) {\n            const current = sortedTimestamps[i];\n            const next = sortedTimestamps[i + 1];\n            const gapPercent = ((next - current) / ctx.audio.duration) * 100;\n            const adjustedWidth = Math.max(0, gapPercent - margin);\n            const adjustedLeft = ((current / ctx.audio.duration) * 100) + margin / 2;\n            const tickWrapper = elem('div',{className: ctx.class.progress.tickWrapper,style:{position: 'absolute', left: `${adjustedLeft}%`, width: `${adjustedWidth}%`}});\n      \n            const tick = elem('div', {className: `progress-tick ${ctx?.class?.progress?.tick} w-full h-full`});\n            tick.addEventListener('click', () => {ctx.audio.currentTime = current;});\n      \n            const verseLabel = elem('div', {className: ctx.class.progress.tickLabel});\n            verseLabel.textContent = `${i + 1}`;\n\n            tickWrapper.appendChild(tick);\n            tickWrapper.appendChild(verseLabel);\n            timestampWrapper.appendChild(tickWrapper);\n          }\n        }\n      });\n      \n    \n    \n    progressBarContainer.append(currentTimeDisplay)\n    progressBarContainer.append(progressWrapper)\n    progressBarContainer.append(durationDisplay)\n    progressContainer.append(progressBarContainer, timestampWrapper);\n\n    return progressContainer;\n}\n","import { elem } from \"./AudioPlayerHelpers.js\";\nimport { createPlaybackRateControls } from './MediaPlaybackRate.js'\nimport { createVolumeAndSleepControls } from './MediaSleepTimer.js'\nimport { handleChapterChange, handleBookChange } from \"./AudioPlayerChapterList.js\";\nimport { createProgressBar } from './MediaProgressBar.js'\n\nexport function createAudioElement(ctx) {\n    const navRow = elem('div', { className: ctx.class.navRow });\n    navRow.append(\n        createBookNavigationButton(ctx, 'prev'),\n        createChapterNavigationButton(ctx, 'prev'),\n        createSkipButton(ctx, 'prev'),\n        createPlayPauseButton(ctx),\n        createSkipButton(ctx, 'next'),\n        createChapterNavigationButton(ctx, 'next'),\n        createBookNavigationButton(ctx, 'next')\n    );\n    const controlsContainer = elem('div', { className: ctx.class.controlsContainer });\n    controlsContainer.append(\n        createProgressBar(ctx),\n        createPlaybackRateControls(ctx),\n        navRow,\n        createVolumeAndSleepControls(ctx)\n    );\n    return controlsContainer;\n}\n\nfunction createPlayPauseButton(ctx) {\n    const playPauseButton = elem('button', {\n        className: ctx.class.playPauseButton,\n        onclick: () => ctx.audio.paused ? ctx.audio.play() : ctx.audio.pause()\n    });\n\n    const playIcon = elem('span', {className: ctx.class.playPauseIcon,innerHTML: ctx.icons.play});\n    playPauseButton.appendChild(playIcon);\n    ctx.audio.addEventListener('play', () => { playIcon.innerHTML = ctx.icons.pause; });\n    ctx.audio.addEventListener('pause', () => { playIcon.innerHTML = ctx.icons.play; });\n    return playPauseButton;\n}\n\n\nfunction createBookNavigationButton(ctx, dir) {\n    return elem('button', {\n        className: ctx.class[`${dir}BookButton`],\n        innerHTML: ctx.icons[`${dir}Book`],\n        onclick: () => {\n            const index = ctx.currentBooks.data.findIndex(book => book.book_id === ctx.currentBook.book_id);\n            const nextIndex = dir === 'prev' ? index - 1 : index + 1;\n            if (ctx.currentBooks.data[nextIndex]) {\n                handleBookChange(ctx, ctx.currentBooks.data[nextIndex].book_id);\n                handleChapterChange(ctx, ctx.currentBooks.data[nextIndex], 1);\n            }\n        }\n    });\n}\n\nfunction createChapterNavigationButton(ctx, dir) {\n    return elem('button', {\n        className: ctx.class[`${dir}ChapterButton`],\n        innerHTML: ctx.icons[`${dir}Chapter`],\n        onclick: () => changeChapter(ctx, dir)\n    });\n}\n\nasync function changeChapter(ctx, dir) {\n    const chapterChange = (dir === 'prev') ? -1 : 1;\n    const targetChapter = ctx.currentChapter.number + chapterChange;\n\n    const inCurrentBook = dir === 'prev' ? (targetChapter > 0) : (targetChapter < ctx.currentBook.chapters.length + 1);\n    if (inCurrentBook) {\n        handleChapterChange(ctx, ctx.currentBook, targetChapter);\n        return\n    }\n\n    const currentIndex = ctx.currentBooks.data.findIndex(book => book.book_id === ctx.currentBook.book_id);\n    const targetIndex = currentIndex + chapterChange;\n    const targetBook = ctx.currentBooks.data[targetIndex];\n    if (targetBook) {\n        handleBookChange(ctx, targetBook.book_id);\n        handleChapterChange(ctx, targetBook, 1);\n    }\n}\n\nfunction createSkipButton(ctx, dir) {\n    return elem('button', {\n        id: `${dir}SkipButton`,\n        className: ctx.class[`${dir}SkipButton`],\n        innerHTML: ctx.icons[`${dir}Skip`],\n        onclick: () => {\n            ctx.audio.currentTime + (dir == \"next\" ? 15 : -15);\n            ctx.audio.currentTime = Math.min(Math.max(ctx.audio.currentTime, 0), ctx.audio.duration);\n        }\n    });\n}","export function fuzzySearch(query, data, headers) {\n    const queryLower = query.toLowerCase();\n    const baseThreshold = 0.9;\n    const minThreshold = 0.5;\n    const threshold = Math.max(minThreshold, baseThreshold - (queryLower.length > 10 ? 0.15 : queryLower.length * 0.05));\n    \n    return data.reduce((results, item) => {\n        let totalScore = 0;\n        let matches = 0;\n        headers.forEach(header => {\n            if (item[header]) {\n                const itemValue = item[header].toString().toLowerCase();\n                const distance = getLevenshteinDistance(queryLower, itemValue);\n                const score = distance / Math.max(queryLower.length, itemValue.length);\n                if (score <= threshold) {\n                    totalScore += score;\n                    matches++;\n                }\n            }\n        });\n        if (matches > 0) {\n            results.push({item, score: totalScore / matches});\n        }\n        return results;\n    }, []).sort((a, b) => a.score - b.score);\n}\n\nfunction getLevenshteinDistance(a, b) {\n    if (a === b) return 0;\n    const d = Array.from({length: a.length + 1}, (_, i) => i);\n    for (let j = 1; j <= b.length; j++) {\n        let prev = d[0];\n        d[0] = j;\n        for (let i = 1; i <= a.length; i++) {\n            const temp = d[i];\n            d[i] = Math.min(d[i] + 1, d[i-1] + 1, prev + (a[i-1] !== b[j-1]));\n            prev = temp;\n        }\n    }\n    return d[a.length];\n}","import { elem } from './AudioPlayerHelpers.js'\nimport { fuzzySearch } from './AudioPlayerSearch.js';\nimport { selectBible } from  './AudioPlayerProviders.js'\nimport { updateCurrentBibleBlock, updateBookList } from './AudioPlayerChapterList.js';\n\nexport function initBibleList(ctx) {\n    ctx.bibleListContainer.innerHTML = '';\n    const container = elem('div', { className: ctx.class.searchWrapper });\n    const input = elem('input', {\n        type: 'search',\n        placeholder: `Filter (${ctx.bibles.length}) Audio Bibles`,\n        autocomplete: 'off',\n        className: ctx.class.searchInput,\n        oninput: () => {\n            ctx.query = input.value;\n            ctx.results = fuzzySearch(ctx.query, ctx.bibles, ['tt','tv','ln'])\n            updateBibleGrid(ctx);\n        }\n    });\n    input.setAttribute('aria-label', 'Search');\n    container.appendChild(input);\n    ctx.bibleListContainer.appendChild(container);\n    const bibleListGrid = elem('div', { className: ctx.class.bibleListGrid });\n    ctx.bibleListGrid = bibleListGrid;\n    ctx.bibleListContainer.appendChild(bibleListGrid);\n    updateBibleGrid(ctx);\n}\n\nfunction updateBibleGrid(ctx) {\n    const bibleListGrid = ctx.bibleListGrid;\n    bibleListGrid.innerHTML = '';\n    const bibles = ctx.query ? ctx.results.map(result => result.item) : ctx.bibles;\n    const fragment = document.createDocumentFragment();\n    bibles.forEach(bible => fragment.appendChild(createBibleButton(ctx, bible)));\n    bibleListGrid.appendChild(fragment);\n}\n\nfunction createBibleButton(ctx, bible) {\n    const buttonWrap = elem('div', {className: ctx.class.bibleButton.wrapper});\n\n    const button = elem('button', {className: ctx.class.bibleButton.button, onclick: () => handleBibleButtonClick(ctx, bible)});\n    buttonWrap.appendChild(button)\n    button.dataset.testId = bible.id;\n    button.setAttribute('aria-label', bible.tv ?? bible.tt);\n\n    const bibleListButtonLanguage = elem('div', { className: ctx.class.bibleButton.languageWrap });\n    bibleListButtonLanguage.appendChild(elem('h2', { className: ctx.class.bibleButton.language, textContent: bible.ln }));\n    bibleListButtonLanguage.appendChild(elem('small', { className: ctx.class.bibleButton.iso, textContent: bible.iso }));\n    \n    const bibleListButtonTitle = elem('div', { className: ctx.class.bibleButton.titleWrap });\n    bibleListButtonTitle.appendChild(elem('h4', { className: ctx.class.bibleButton.title, textContent: bible.tt}));\n\n    if (bible.tt !== bible.tv && bible.tv) {\n        const tv = elem('p', {\n            className: ctx.class.bibleButton.vernacular,\n            textContent: bible.tv\n        });\n        bibleListButtonTitle.appendChild(tv);\n    }\n\n    button.appendChild(bibleListButtonLanguage);\n    button.appendChild(bibleListButtonTitle);\n\n    if(bible.dl) {\n        const downloadButton = elem('button', {\n            className: ctx.class.bibleButton.download,\n            innerHTML: ctx.icons.download,\n            onclick:() => handleBibleDownload(ctx, bible)})\n        buttonWrap.appendChild(downloadButton)\n    }\n\n    return buttonWrap;\n}\n\nexport async function handleBibleDownload(ctx, bible) {\n    try {\n        if (!bible.dl) {\n            console.log(\"Bible object does not contain a valid download URL\");\n            return;\n        }\n        const dialog = elem('dialog', {className: ctx.class.bibleDownloadDialog.wrapper});\n        const message = elem(\"div\", {innerHTML: ctx?.download_text ?? `<div class=\"text-sm max-w-sm\"></div>`});\n        const copyright = elem(\"div\", { innerHTML: `\n            <p class=\"${ctx.class.bibleDownloadDialog.audio_copyright}\">${bible.audio_copyright}</p>\n            <p class=\"${ctx.class.bibleDownloadDialog.text_copyright}\">${bible.text_copyright}</p>`\n        });\n        dialog.append(message, copyright);\n        const downloadButton = elem(\"button\",{className: ctx.class.bibleDownloadDialog.button_download,textContent: `Download ${bible.dl_size ?? ''}`});\n        downloadButton.addEventListener(\"click\", () => {\n            const anchor = document.body.appendChild(elem('a', { href: bible.dl, download: '' }));\n            anchor.click();\n            anchor.remove();\n            dialog.close();\n            dialog.remove();\n        });\n        dialog.appendChild(downloadButton);\n        const cancelButton = elem(\"button\", {className: ctx.class.bibleDownloadDialog.cancel, textContent: \"Cancel\"});\n        cancelButton.addEventListener(\"click\", () => {dialog.close();document.body.removeChild(dialog);});\n        dialog.appendChild(cancelButton);\n        document.body.appendChild(dialog);\n        dialog.showModal();\n      } catch (error) {\n          console.error(\"An error occurred while trying to display the dialog:\", error);\n      }\n}\n\nexport async function handleBibleButtonClick(ctx, bible) {\n    \n    if (bible.tp === \"hark\") {\n        ctx.view = \"book\";\n        ctx.currentBible = bible;\n        await selectBible(ctx, bible.id);\n        updateCurrentBibleBlock(ctx, bible);\n        ctx.render();\n        const url = new URL(window.location);\n        url.searchParams.set('bibleId', bible.id);\n        window.history.replaceState({}, '', url);\n    } else if (bible.tp === \"dbl\") {\n        // Handle 'dbl' type if necessary\n    }\n}\n\nexport function initBookList(ctx) {\n    const searchInput = elem('input', {\n        type: 'search',\n        placeholder: ctx.i18n?.filter_books ?? 'Filter Books',\n        className: ctx.class.searchInput,\n        ariaLabel: 'search',\n        autocomplete: 'off',\n        oninput: () => {\n            ctx.query = searchInput.value;\n            console.log(searchInput.value, ctx.currentBooks.data)\n            ctx.resultsBooks = fuzzySearch(ctx.query, ctx.currentBooks.data, ['name'])\n            updateBookList(ctx);\n        }\n    });\n    const searchInputContainer = elem('div', { className: ctx.class.searchInputContainer });\n    searchInputContainer.appendChild(searchInput);\n    ctx.bookListContainer.appendChild(searchInputContainer);\n    ctx.bookListContainer.appendChild((ctx.bookListGrid = elem('div', { className: ctx.class.bookListGrid })));\n    updateBookList(ctx);\n}\n\n\n","import { mergeClasses, mergeIcons, mergeArt } from \"./AudioPlayerStyles.js\";\nimport { loadProviders } from \"./AudioPlayerProviders.js\";\nimport { elem } from \"./AudioPlayerHelpers.js\";\nimport { createAudioElement } from \"./AudioPlayerMedia.js\";\nimport { initBibleList, handleBibleButtonClick, initBookList } from \"./AudioPlayerBibleList.js\";\nimport { chapterList, handleBookChange, updateBookList } from \"./AudioPlayerChapterList.js\";\n\nexport default class AudioPlayer {\n  constructor(containerId, options) {\n    this.container = document.getElementById(containerId);\n    this.providers = options.providers ?? [\"hark\"];\n    this.bibles = [];\n    this.currentBible = {};\n    this.currentBooks = [];\n    this.currentBook = {};\n    this.currentChapter = { number: 0 };\n    this.audio = document.createElement(\"audio\");\n    this.currentType = \"hark\";\n    this.isDragging = false;\n    this.class = mergeClasses(options.classes);\n    this.icons = mergeIcons(options.icons);\n    this.art = mergeArt(options.art);\n    this.results = [];\n    this.query = \"\";\n    this.titles = options?.titles ?? [];\n    this.view = \"bible\";\n    this.idPrefix = options?.idPrefix ?? \"audio-player\";\n    this.views = {\n        bible: {player: \"none\", bibleListContainer: \"block\", bookListContainer: \"none\", chapterListContainer: \"none\"},\n        book: {player: \"block\", bibleListContainer: \"none\", bookListContainer: \"block\", chapterListContainer: \"none\"},\n        chapter: {player: \"block\", bibleListContainer: \"none\", bookListContainer: \"none\", chapterListContainer: \"block\"},\n    };\n  }\n\n  static async create(containerId, options) {\n    const player = new AudioPlayer(containerId, options);\n    await loadProviders(player)\n    player.container.innerHTML = \"\";\n    const idp = player.idPrefix;\n    const playerContainer = elem(\"div\", {id: `${idp}-player-container`,className: player.class.playerContainer});\n    player.bibleListContainer = elem(\"div\", {id: `${idp}-bible-list-container`,className: player.class.bibleListContainer});\n    player.bookListContainer = elem(\"div\", {id: `${idp}-book-list-container`,className: player.class.bookListContainer});\n    player.chapterListContainer = elem(\"div\", {id: `${idp}-chapter-list-container`,className: player.class.chapterListContainer});\n    player.bibleBlock = elem(\"div\", {id: `${idp}-bible-block`,className: player.class.bibleBlock});\n    player.player = createMediaPlayer(player);\n    player.player.prepend(player.bibleBlock)\n    playerContainer.append(player.audio, player.player);\n    initBookList(player);\n    playerContainer.append(player.bookListContainer,player.chapterListContainer,player.bibleListContainer);\n    player.container.appendChild(playerContainer);\n    this.setDefaultView(player);\n    return player;\n  }\n\n  static async setDefaultView(player) {\n    const url = new URL(window.location);\n    if (url.searchParams.get(\"bibleId\")) {\n      await handleBibleButtonClick(player, player.bibles.find((bible) => bible.id == url.searchParams.get(\"bibleId\")));\n      player.view = \"book\";\n    }\n    if (url.searchParams.get(\"bookId\")) {\n      await handleBookChange(player, url.searchParams.get(\"bookId\"));\n      player.view = \"chapter\";\n    }\n    if (player.view === \"bible\") {\n      initBibleList(player);\n    }\n\n    setView(player)\n  }\n\n  render() {\n    if (this.view === \"bible\") {\n      initBibleList(this);\n    } else if (this.view === \"book\") {\n      updateBookList(this);\n    } else if (this.view === \"chapter\") {\n      chapterList(this);\n    }\n    setView(this)\n  }\n\n  setData(newData) {\n    Object.assign(this, newData);\n  }\n}\n\nfunction setView(player) {\n    const currentView = player.views[player.view] || views.bible;\n    player.player.style.display = currentView.player;\n    player.bibleListContainer.style.display = currentView.bibleListContainer;\n    player.bookListContainer.style.display = currentView.bookListContainer;\n    player.chapterListContainer.style.display = currentView.chapterListContainer;\n}\n\nfunction createMediaPlayer(ctx) {\n  const mediaPlayerWrap = elem(\"div\", {\n    id: \"media-player-wrap\",\n    className: ctx.class.mediaPlayerWrap,\n  });\n\n  const audioElement = createAudioElement(ctx);\n  mediaPlayerWrap.appendChild(audioElement);\n\n  return mediaPlayerWrap;\n}\n"],"names":["mergeClasses","customClasses","mergedClasses","key","Object","keys","startsWith","substring","mergeIcons","customIcons","mergedIcons","mergeArt","customArt","mergedArt","BASE_CONTENT_URL","async","loadProviders","player","providerFunctions","hark","harkList","dbp","dbpList","provider","providers","bibles","concat","i","length","customTitle","titles","id","tt","tv","country_id","fetch","then","response","json","output","map","bible","tp","dl","filter","ci","includes","harkSelect","books","filenameRequest","filenames","text","booksMap","Map","filenamePattern","split","sort","forEach","filename","match","bookNumber","bookName","chapterString","chapterNumber","parseInt","has","set","name","book_number","book_id","chapters","get","push","timingFiles","ok","console","warn","book","values","a","b","bible_id","bible_folder","timestamps","data","Array","from","initial_path","last_page","meta","pagination","current_page","results","selectBible","ctx","query","currentBooks","selectedBible","find","currentBible","url","URL","window","location","searchParams","setBookAndChapter","chapter","currentBook","setCurrentChapter","safeChapter","currentType","padLength","currentChapter","path","toString","padStart","title","number","audio","src","isArray","timestampRegex","timestampsText","catch","error","verseTimestamps","exec","timestamp","elem","tag","props","el","document","createElement","val","entries","assign","style","formatTime","timeInSeconds","minutes","seconds","parseTimestampToSeconds","timestampStr","hours","parseFloat","HTMLDialogElement","prototype","triggerShow","showModal","this","onclick","event","rect","getBoundingClientRect","clientY","top","bottom","close","clientX","left","right","createPlaybackRateControls","MIN_RATE","options","playbackRate","min","MAX_RATE","max","STEP","step","updateButtonState","button","isDisabled","className","baseClassName","class","disabled","changeRate","delta","Math","playbackRateElem","textContent","toFixed","decrementButton","incrementButton","playbackRateWrapperElem","wrapper","decrease","display","increase","append","createVolumeAndSleepControls","volumeRow","volumeInput","type","value","volume","addEventListener","volumeLabel","htmlFor","innerHTML","icons","volumeIcon","appendChild","sleepTimerButton","createSleepTimer","sleepTimer","elapsedTime","sleepDuration","sleepTimerDuration","clearInterval","updateSleepTimerUI","setInterval","remainingTime","newVolume","pause","percentageElapsed","dashArray","PI","sleepIcon","querySelector","setAttribute","createBibleBlockButtons","bibleBlockButtonGroup","idPrefix","buttons","condition","bibleListNavButton","view","render","bookListNavButton","chapterListNavButton","updateCurrentBibleBlock","bibleBlock","bibleBlockInfoWrap","createBibleBlockInfoWrap","chapterBookSelectWrapper","selectBookChapterWrap","createBookSelector","createChapterSelector","createVerseSelector","updateBookList","bibleBlockLanguageGroup","bibleBlockIso","innerText","iso","cn","bibleBlockTitleGroup","bibleBlockTitle","bibleBlockVernacular","bookListGrid","resultsBooks","result","createBookButton","item","bookListButton","bookListButtonActive","ariaLabel","handleBookChange","dataset","bookId","contentContainer","bookListTitle","bookListId","selectedBook","history","replaceState","chapterListContainer","chapterList","bookSelect","selectBook","option","selected","target","chapterSelect","selectChapter","handleChapterChange","verseSelect","selectVerse","index","verseNumber","selectedVerse","verseIndex","tsStr","verseTime","currentTime","verseColonSeparator","selectVerseSeparator","addVerseHighlightOnTimeUpdate","lastSelectedVerse","verseTimes","currentVerseIndex","bibleListContainer","bookListContainer","fragment","createDocumentFragment","chapterButton","chapterButtonActive","bookArt","art","artElement","file","play","playPauseIcon","paused","createProgressBar","seekAudio","progressWrapper","clickRatio","width","duration","progressContainer","progress","container","currentTimeDisplay","progressBarContainer","barContainer","barWrapper","progressBarInner","barInner","timestampWrapper","circleTip","onMouseMove","isDragging","onMouseUp","body","userSelect","removeEventListener","e","durationDisplay","progressPercent","sortedTimestamps","ts","margin","current","next","gapPercent","adjustedWidth","adjustedLeft","tickWrapper","position","tick","verseLabel","tickLabel","createAudioElement","navRow","createBookNavigationButton","createChapterNavigationButton","createSkipButton","createPlayPauseButton","controlsContainer","playPauseButton","playIcon","dir","findIndex","nextIndex","changeChapter","chapterChange","targetChapter","inCurrentBook","currentIndex","targetIndex","targetBook","fuzzySearch","headers","queryLower","toLowerCase","baseThreshold","minThreshold","threshold","reduce","totalScore","matches","header","itemValue","distance","getLevenshteinDistance","score","d","_","j","prev","temp","initBibleList","searchWrapper","input","placeholder","autocomplete","searchInput","oninput","updateBibleGrid","bibleListGrid","createBibleButton","buttonWrap","bibleButton","handleBibleButtonClick","testId","bibleListButtonLanguage","languageWrap","language","ln","bibleListButtonTitle","titleWrap","vernacular","downloadButton","download","handleBibleDownload","log","dialog","bibleDownloadDialog","message","download_text","copyright","audio_copyright","text_copyright","button_download","dl_size","anchor","href","click","remove","cancelButton","cancel","removeChild","initBookList","i18n","filter_books","searchInputContainer","AudioPlayer","constructor","containerId","getElementById","classes","views","create","idp","playerContainer","createMediaPlayer","prepend","setDefaultView","setView","setData","newData","currentView","mediaPlayerWrap","audioElement"],"mappings":"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"}