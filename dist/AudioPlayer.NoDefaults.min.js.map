{"version":3,"file":"AudioPlayer.NoDefaults.min.js","sources":["../src/AudioPlayerStyles.js","../src/AudioPlayerProviders.js","../src/AudioPlayerHelpers.js","../src/MediaPlaybackRate.js","../src/MediaSleepTimer.js","../src/AudioPlayerNavigation.js","../src/AudioPlayerChapterList.js","../src/MediaProgressBar.js","../src/AudioPlayerMedia.js","../src/AudioPlayerSearch.js","../src/AudioPlayerBibleList.js","../src/AudioPlayer.js"],"sourcesContent":["const defaultClasses = {\n  playerHeader: \"\",\n  playerContainer: \"w-full mx-auto max-w-7xl\",\n  bibleListContainer: \"\",\n  chapterListContainer: \"relative w-full max-w-4xl mx-auto\",\n  bibleListGrid: \"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3\",\n\n  bibleBlock: {\n    wrapper: `flex flex-col justify-between text-sm text-center md:text-base lg:text-lg font-semibold text-black`,\n    infoWrap: \"flex flex-row justify-between gap-4 max-w-md w-full mx-auto bg-stone-100 border border-stone-200 mt-12 p-3\",\n    titleGroup: \"flex-shrink truncate\",\n    vernacular: \"truncate text-sm mb-1\",\n    title: \"truncate text-2xl font-semibold\",\n    languageGroup: \"\",\n    iso: \"text-sm\",\n    buttonGroup: \"flex flex-col justify-between\",\n  },\n\n  container: \"audio-player-container mx-auto max-w-7xl w-full\",\n  audio: \"\",\n  controlsContainer: \"controls-container flex flex-col\",\n  navRow: \"flex flex-row items-center justify-center gap-4 py-4 bg-stone-100 border border-stone-200 w-full max-w-md mx-auto\",\n  prevBookButton: \"prev-book-button flex justify-center items-center\",\n  nextBookButton: \"next-book-button flex justify-center transform -scale-x-100 items-center\",\n  prevChapterButton: \"prev-chapter-button flex justify-center items-center\",\n  nextChapterButton: \"next-chapter-button flex justify-center transform -scale-x-100 items-center\",\n  playPauseButton: \"play-pause-button flex justify-center items-center\",\n  playPauseIcon: \"icon-play\",\n  controlRow2: \"grid grid-cols-5 mb-1\",\n  leftControls: \"flex flex-row justify-center items-center col-span-2 space-x-6\",\n\n  playbackRate: {\n    wrapper: \"flex mx-auto w-full max-w-md justify-center px-8 py-2 bg-stone-100 text-xs\",\n    display: \"mx-1 text-stone-400 text-sm\",\n    increase: \"w-6 h-6 border-2 rounded-2xl text-stone-500\",\n    decrease: \"w-6 h-6 border-2 rounded-2xl text-stone-500\",\n    disabled: \"opacity-50\",\n  },\n\n  rightControls: \"flex flex-row justify-center items-center col-span-2 space-x-6\",\n  playSpeedControl: \"flex flex-row justify-center items-center text-xs\",\n  decrementIcon: \"size-6\",\n  incrementIcon: \"size-6\",\n  decreaseSpeedButton: `w-6 h-6 border-2 rounded-2xl hover:border-blue-600 dark:hover:border-white text-stone-500 dark:hover:text-white`,\n  increaseSpeedButton: `w-6 h-6 border-2 rounded-2xl hover:border-blue-600 dark:hover:border-white text-stone-500 dark:hover:text-white`,\n  prevSkipButton: `flex justify-center items-center text-stone-600 hover:text-blue-600`,\n  nextSkipButton: `flex justify-center items-center transform -scale-x-100 text-stone-600 hover:text-blue-600`,\n\n  progress: {\n    container: \"relative flex flex-col mx-auto w-full max-w-md justify-around px-1 pt-4 bg-stone-100 text-xs\",\n    barContainer: \"flex flex-row justify-between relative z-10\",\n    barWrapper: \"mx-auto min-w-80 mx-3 w-3/4 sm:w-5/6 h-3 rounded-lg relative border bg-gradient-to-br shadow-inner border-stone-300 from-white to-stone-200 dark:from-neutral-50 dark:to-stone-400 border-stone-500\",\n    barInner: \"h-3 w-0 bg-blue-600 rounded-md\",\n    circleTip: \"absolute top-1/2 transform -translate-y-1/2 -translate-x-1/2 w-5 h-5 bg-blue-600 rounded-full border border-blue-500\",\n    currentTimeDisplay: \"text-black\",\n    durationDisplay: \"text-black\",\n    timestamps: \"flex w-5/6 mx-auto h-8 absolute inset-x-2 z-0 block my-4\",\n    tick: \"absolute top-0 h-full\",\n    tickWrapper: \"group relative h-full bg-stone-400 rounded-sm\",\n    tickLabel: \"verse-label hidden group-hover:block absolute left-1/2 -translate-x-1/2 top-full mt-1 px-2 py-1 text-xs bg-gray-200 text-gray-900 rounded-lg shadow border whitespace-nowrap\",\n  },\n\n  mediaPlayerWrap: \"w-full flex flex-col justify-center\",\n  mediaPlayerHeader: \"\",\n  mediaPlayerBody: \"\",\n  mediaPlayerNavRow: \"grid grid-cols-5 px-2 text-stone-700 dark:text-stone-300 divide-x divide-stone-500 dark:divide-stone-600\",\n  bibleListNavButton: \"\",\n  bookListNavButton: \"\",\n  chapterListNavButton: \"\",\n\n  volumeRow: \"flex mx-auto w-full max-w-md justify-center items-center px-8 bg-stone-100 text-xs\",\n  volumeControl: \"volume-control w-full\",\n  volumeInput: \"w-full\",\n  volumeLabel: \"flex flex-row pl-2 mx-4 w-1/2\",\n\n  selectBookChapterWrap: \"relative bg-stone-100 flex flex-row gap-2 w-full max-w-md mx-auto\",\n  selectBook: \"inline-flex items-center gap-x-1.5 bg-stone-100 hover:bg-stone-200 px-3 py-2 w-full\",\n  selectChapter: \"inline-flex items-center text-center bg-stone-100 w-12 hover:bg-stone-200 border-none appearance-none\",\n  selectVerseSeparator: \"inline-flex items-center bg-stone-100\",\n  selectVerse: \"inline-flex items-center text-center bg-stone-100 w-12 hover:bg-stone-200 border-none appearance-none\",\n\n  bibleButton: {\n    wrapper: \"relative bg-stone-100 border border-stone-200 rounded min-h-20\",\n    button: \"flex flex-row bg-stone-100 h-full w-full hover:bg-stone-200\",\n    languageWrap: \"py-1 bg-stone-200 h-full w-24 flex flex-col justify-center items-center\",\n    language: \"text-sm font-medium text-stone-900\",\n    iso: \"truncate font-mono mt-1 text-sm text-stone-500\",\n    titleWrap: \"py-1 h-full w-full flex flex-col justify-center items-center\",\n    title: \"line-clamp-2 text-center text-sm font-medium text-stone-900\",\n    vernacular: \"text-sm text-stone-500 max-w-64\",\n    download: \"absolute text-stone-500 right-0 bottom-0 rounded-tl size-8 flex justify-center items-center bg-stone-200 hover:bg-stone-300\",\n  },\n\n  bibleDownloadDialog: {\n    wrapper: \"p-4 shadow-lg text-center\",\n    button_download: \"px-5 py-2 mx-1 bg-blue-500 text-white rounded cursor-pointer\",\n    cancel: \"px-5 py-2 mx-1 bg-red-600 text-white rounded cursor-pointer\",\n    audio_copyright: \"block text-stone-600\",\n    text_copyright: \"block text-stone-600 text-sm\",\n  },\n\n  sleepTimerButton: \"sleep-timer-button group block py-1.5 px-1\",\n  sleepTimerDuration: \"text-xs pl-1 pt-2 inline-block timer-display\",\n  sleepTimerWrap: \"flex flex-row justify-center align-start text-stone-400 hover:text-blue-600\",\n  searchWrapper: \"mx-auto flex items-center w-1/3 my-3\",\n  searchInput: \"px-4 py-2 w-full max-w-7xl mx-auto bg-white border border-stone-200\",\n\n  searchInputContainer: \"flex w-full max-w-xl mx-auto my-4\",\n  bookList: {\n    container: \"w-full\",\n    grid: \"grid grid-cols-3 md:grid-cols-4 gap-2\",\n    button: \"bg-stone-100 border rounded md:rounded-lg\",\n    buttonActive: \"bg-stone-100 border border-stone-300\",\n    title: \"font-medium text-sm lg:text-base\",\n    id: \"w-full flex justify-end opacity-60 text-sm mr-8\",\n  },\n\n  chapterButton: \"bg-stone-100/90 w-12 h-12 m-2 border border-stone-700 rounded text-lg hover:bg-stone-300\",\n  chapterButtonActive: \"bg-stone-500 text-stone-100\",\n};\n\n/**\n * Merges custom CSS class definitions with a set of default classes. If a key in the custom classes starts\n * with an underscore, it will overwrite the corresponding default class after removing the underscore.\n * Keys without an underscore will simply merge by replacing the existing default with the custom class.\n *\n * @param {Object} customClasses - An object containing custom class definitions. Keys starting with\n *                 an underscore indicate classes that should overwrite default classes.\n * @returns {Object} An object containing the merged classes.\n */\nexport const mergeClasses = (customClasses = {}) => {\n  const mergedClasses = { ...defaultClasses };\n  for (const key of Object.keys(customClasses)) {\n    if (key.startsWith(\"_\")) {\n      mergedClasses[key.substring(1)] = customClasses[key];\n    } else {\n      mergedClasses[key] = customClasses[key];\n    }\n  }\n\n  return mergedClasses;\n};\n\nconst defaultIcons = {\n  speedSlow: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 30\"><path d=\"M4.83 10.06a.67.67 0 1 0 0 1.34.67.67 0 0 0 0-1.34zm.56-2.02c.43 0 .85.09 1.22.28 1.07.55 1.4 1.46 1.64 2.4.3 1.22-.07 1.95.12 2.75.17.77 1.14 3.28 4.6 5.41 3.1 1.92 8.61 2.37 15.01.26.44-.14.87-.08 1 .72a13 13 0 0 0 .76 2.78c.15.36.2.66.1.93-.11.27-.35.43-.63.56-.93.42-1.77.6-2.73.63-.36.01-.65-.15-.84-.38a1.6 1.6 0 0 1-.3-.77c-.1-.65-.16-1.37-.16-2.08 0-.25-.13-.39-.4-.25a10.32 10.32 0 0 1-5.08 1.08 9.96 9.96 0 0 1-4.97-1.46c-.25-.16-.44-.02-.44.21-.02.74.03 1.52.14 2.25.06.4.04.71-.14.94-.17.24-.45.33-.76.38a6.5 6.5 0 0 1-2.88-.16 1.26 1.26 0 0 1-.85-.76 2.01 2.01 0 0 1-.1-.93c.13-1.23.06-2.66.69-3.97.17-.36.18-.54-.34-.62-2.83-.38-6.17-2.19-7.4-3.84a3.03 3.03 0 0 1-.54-1.1c-.07-.33-.05-.68.44-.48.58.24 1.24.21 1.88-.03.3-.12.16-.44-.15-.32-.53.16-1.11.05-1.64-.14-.43-.15-.6-.53-.67-.88-.09-.5.08-1 .33-1.38a4.84 4.84 0 0 1 1.8-1.71c.42-.2.86-.31 1.29-.32Zm9.17 1.25.53 2.31a12.91 12.91 0 0 0-2.73 4.28c-.17.5.28.74.41.4.59-1.49 1.6-3.16 2.67-4.3l3.5 1.42a8.7 8.7 0 0 0-.32 2.66c0 .94.1 1.83.12 2.5.02.41.54.4.52.04-.03-.69-.12-1.6-.12-2.54 0-.98.1-1.95.32-2.57l3.99-.54a13.05 13.05 0 0 1 2.63 4.57c.11.35.59.11.5-.16a13.5 13.5 0 0 0-2.67-4.68l1.84-1.84c1.01.45 2.03 1.6 2.75 2.78.4.66.7 1.33.9 1.86.1.26.14.52.18.77l.2-.08c.5-.2.85.02 1.01.42.21.52-.09.9-.47 1.07-7.3 3.24-13.8 2.76-17.06.75-3.33-2.06-4.2-4.46-4.35-5.07-.1-.42.14-.72.5-.83.43-.13.84.03 1.01.44.24-.62.8-1.65 1.29-2.13a5.37 5.37 0 0 1 2.85-1.53zm4.38-1.24c.5-.02 1.02 0 1.52.06 2 .24 3.86 1.1 4.76 2.48l-1.8 1.84-4.12.56-3.7-1.5-.54-2.37a7.93 7.93 0 0 1 3.88-1.07z\" /></svg>`,\n  speedFast: ``,\n  sleepTimer: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" class=\"w-7 h-7\"><path d=\"M22.97 16.84h-3.25l3.56-3.26c.07-.05.1-.08.1-.14a.43.4 0 0 0-.37-.56h-4.38a.45.41 0 0 0 0 .82h3.29l-3.6 3.25a.43.4 0 0 0-.09.43.43.4 0 0 0 .4.25h4.34a.43.4 0 0 0 0-.79zm-6.44 1.98h-2.45l2.79-2.49a.43.4 0 0 0 .06-.45.43.4 0 0 0-.4-.26h-3.48a.45.41 0 0 0 0 .82h2.48l-2.79 2.5-.06.14a.31.28 0 0 0 0 .28.43.4 0 0 0 .37.28h3.5a.45.41 0 0 0 0-.82zm2.75 3.9h-1.42l1.73-1.55.1-.14v-.28a.43.4 0 0 0-.44-.29h-2.48a.43.4 0 0 0 0 .8h1.43l-1.74 1.55a.43.4 0 0 0-.09.46.43.4 0 0 0 .4.22h2.48a.43.4 0 0 0 0-.79z\" style=\"stroke-width:.296239\"/></svg>`,\n  chapters: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"size-6\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0 1 12 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5\" /></svg>`,\n  bibles: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"size-6\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155\" /></svg>`,\n  books: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"size-6\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75Z\" /></svg>`,\n  Book: `<svg xmlns=\"http://www.w3.org/2000/svg\" stroke=\"currentColor\" class=\"w-7 h-7 hover:text-blue-600 dark:hover:text-blue-300\" viewBox=\"0 0 23 13\"><g fill=\"none\" fill-rule=\"evenodd\" stroke-linecap=\"round\" stroke-width=\"1.5\"><path stroke-linejoin=\"round\" d=\"M22 2.7c0-.9-1-1.4-1.7-1l-7 4a1.1 1.1 0 0 0 0 2l7 4a1.1 1.1 0 0 0 1.7-.9V2.7h0Zm-9.7 0c0-.9-1-1.4-1.7-1l-7.1 4a1.1 1.1 0 0 0 0 2l7 4a1.1 1.1 0 0 0 1.8-.9V2.7h0Z\"/><path d=\"M1.5 1v11\"/></g></svg>`,\n  Chapter: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"size-7\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M21 16.811c0 .864-.933 1.406-1.683.977l-7.108-4.061a1.125 1.125 0 0 1 0-1.954l7.108-4.061A1.125 1.125 0 0 1 21 8.689v8.122ZM11.25 16.811c0 .864-.933 1.406-1.683.977l-7.108-4.061a1.125 1.125 0 0 1 0-1.954l7.108-4.061a1.125 1.125 0 0 1 1.683.977v8.122Z\" /></svg>`,\n  Skip: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"size-7 hover:text-blue-600 dark:hover:text-blue-300\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"m18.75 4.5-7.5 7.5 7.5 7.5m-6-15L5.25 12l7.5 7.5\" /></svg>`,\n  play: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" class=\"w-10 h-10 hover:text-blue-400\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M5.3 5.7c0-.9.9-1.4 1.6-1L18.5 11a1.1 1.1 0 0 1 0 2L6.9 19.3a1.1 1.1 0 0 1-1.6-1V5.7z\"/></svg>`,\n  pause: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" class=\"w-10 h-10 hover:text-blue-600 dark:hover:text-blue-300\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M15.8 5.3v13.4M8.2 5.3v13.4\"/></svg>`,\n  volumeIcon: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" class=\"size-5\" viewBox=\"0 0 20 20\"><path d=\"M11 4a1 1 0 0 0-2-1L5 7H3a1 1 0 0 0-1 0 7 7 0 0 0 0 3v3h3l4 4a1 1 0 0 0 2-1V4Zm5 1a1 1 0 0 0-1 1 6 6 0 0 1 0 8 1 1 0 0 0 1 1 7 7 0 0 0 0-10Z\"/><path d=\"M14 7a1 1 0 0 0-1 1 3 3 0 0 1 0 4 1 1 0 0 0 1 1 4 4 0 0 0 0-6Z\"/></svg>`,\n  download: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" class=\"size-5\"><path fill-rule=\"evenodd\" d=\"M2 4.75C2 3.784 2.784 3 3.75 3h4.836c.464 0 .909.184 1.237.513l1.414 1.414a.25.25 0 0 0 .177.073h4.836c.966 0 1.75.784 1.75 1.75v8.5A1.75 1.75 0 0 1 16.25 17H3.75A1.75 1.75 0 0 1 2 15.25V4.75Zm8.75 4a.75.75 0 0 0-1.5 0v2.546l-.943-1.048a.75.75 0 1 0-1.114 1.004l2.25 2.5a.75.75 0 0 0 1.114 0l2.25-2.5a.75.75 0 1 0-1.114-1.004l-.943 1.048V8.75Z\" clip-rule=\"evenodd\" /></svg>`,\n};\n\nexport const mergeIcons = (customIcons = {}) => {\n  const mergedIcons = { ...defaultIcons };\n  for (const key of Object.keys(customIcons)) {\n    mergedIcons[key] = customIcons[key];\n  }\n  return mergedIcons;\n};\n\nconst defaultArt = {};\nexport const mergeArt = (customArt = {}) => {\n  const mergedArt = { ...defaultArt };\n  for (const key of Object.keys(customArt)) {\n    mergedArt[key] = customArt[key];\n  }\n  return mergedArt;\n};\n","const BASE_API_URL = 'https://arc.dbs.org';\nconst BASE_CONTENT_URL = 'https://content.dbs.org';\nconst BASE_DBP_URL = 'https://4.dbt.io/api/bibles';\n\nexport async function loadProviders(player) {\n    const providerFunctions = {\n        hark: harkList,\n        dbp: dbpList,\n    };\n      \n    for (const provider of player.providers) {\n        if (providerFunctions[provider]) {\n          player.bibles = player.bibles.concat(await providerFunctions[provider]());\n        }\n    }\n    for (let i = 0; i < player.bibles.length; i++) {\n        let customTitle = player.titles[player.bibles[i].id];\n        if(customTitle) {\n            player.bibles[i].tt = customTitle.tt;\n            player.bibles[i].tv = customTitle.tv;\n        }\n    }\n}\n\nexport async function harkList(country_id = 'all', provider = 'all') {\n    const bibles = await fetch(`${BASE_CONTENT_URL}/bibles/audio-new/index.json`).then(response => response.json());\n    const output = bibles.map(bible => ({\n        ...bible,\n        tp: \"hark\",\n        dl: (bible.dl) ? `${BASE_CONTENT_URL}/bibles/audio-new/${bible.id}.zip` : \"\"\n    }));\n    if (country_id !== 'all') {\n        output = output.filter(bible => bible.ci === country_id);\n    }\n\n    if (provider !== 'all') {\n        output = output.filter(bible => bible.id.includes(provider));\n    }\n\n    return output;\n}\n\nexport async function harkSelect(id) {\n    const books = {\n        \"01\": \"GEN\", \"02\": \"EXO\", \"03\": \"LEV\", \"04\": \"NUM\", \"05\": \"DEU\", \"06\": \"JOS\",\n        \"07\": \"JDG\", \"08\": \"RUT\", \"09\": \"1SA\", \"10\": \"2SA\", \"11\": \"1KI\", \"12\": \"2KI\",\n        \"13\": \"1CH\", \"14\": \"2CH\", \"15\": \"EZR\", \"16\": \"NEH\", \"17\": \"EST\", \"18\": \"JOB\",\n        \"19\": \"PSA\", \"20\": \"PRO\", \"21\": \"ECC\", \"22\": \"SNG\", \"23\": \"ISA\", \"24\": \"JER\",\n        \"25\": \"LAM\", \"26\": \"EZK\", \"27\": \"DAN\", \"28\": \"HOS\", \"29\": \"JOL\", \"30\": \"AMO\",\n        \"31\": \"OBA\", \"32\": \"JON\", \"33\": \"MIC\", \"34\": \"NAM\", \"35\": \"HAB\", \"36\": \"ZEP\",\n        \"37\": \"HAG\", \"38\": \"ZEC\", \"39\": \"MAL\", \"40\": \"MAT\", \"41\": \"MRK\", \"42\": \"LUK\",\n        \"43\": \"JHN\", \"44\": \"ACT\", \"45\": \"ROM\", \"46\": \"1CO\", \"47\": \"2CO\", \"48\": \"GAL\",\n        \"49\": \"EPH\", \"50\": \"PHP\", \"51\": \"COL\", \"52\": \"1TH\", \"53\": \"2TH\", \"54\": \"1TI\",\n        \"55\": \"2TI\", \"56\": \"TIT\", \"57\": \"PHM\", \"58\": \"HEB\", \"59\": \"JAS\", \"60\": \"1PE\",\n        \"61\": \"2PE\", \"62\": \"1JN\", \"63\": \"2JN\", \"64\": \"3JN\", \"65\": \"JUD\", \"66\": \"REV\"\n    };\n\n    const filenameRequest = await fetch(`${BASE_CONTENT_URL}/bibles/audio-new/${id}/index.txt`);\n    const filenames = await filenameRequest.text();\n    const booksMap = new Map();\n    const filenamePattern = /^(\\d+)_(\\w+)_(\\d+)\\.mp3$/;\n\n    filenames.split('\\n').sort().forEach((filename) => {\n        const match = filename.match(filenamePattern);\n        if (match) {\n            const [, bookNumber, bookName, chapterString] = match;\n            const chapterNumber = parseInt(chapterString, 10);\n            const key = books[bookNumber];\n            if (!booksMap.has(key)) {\n                booksMap.set(key, {\n                    name: bookName,\n                    book_number: bookNumber,\n                    book_id: key,\n                    chapters: []\n                });\n            }\n            booksMap.get(key).chapters.push(chapterNumber);\n        }\n    });\n\n    let timingFiles = [];\n    const response = await fetch(`${BASE_CONTENT_URL}/bibles/audio-new/${id}/timingfiles/_index.txt`);\n    if (response.ok) {\n        timingFiles = (await response.text()).split(\"\\n\");\n    } else {\n        console.warn('timing files could not be found');\n    }\n\n    for (const book of booksMap.values()) {\n        book.chapters.sort((a, b) => a - b);\n    }\n\n    return {\n        bible_id: id,\n        bible_folder: id,\n        timestamps: timingFiles,\n        data: Array.from(booksMap.values())\n    };\n}\n\nexport async function dbpList(country_id) {\n    let initial_path = `https://4.dbt.io/api/bibles?v=4&key=${key}&media=audio`;\n    if (country_id) {\n        initial_path += '&country=' + country_id;\n    }\n    bibles = await fetch(initial_path).then(function (response) {\n        return response.json();\n    });\n    let last_page = bibles.meta.pagination.last_page;\n    let current_page = 1;\n    while (current_page >= last_page) {\n        current_page++;\n        results = await fetch(initial_path + 'page=' + current_page).then(function (response) {\n            return response.json();\n        });\n        bibles.data.concat(results.data);\n    }\n\n    return bibles;\n}\n\nexport async function dbpAudioFileSet(bibleId, filesets) {\n    for (const fileset of filesets) {\n        if (fileset.codec === 'mp3') {\n            current_fileset = fileset.id;\n            break;\n        }\n    }\n\n    let books = await fetch(`https://4.dbt.io/api/bibles/${bibleId}/book?v=4&key=${key}`).then(\n        function (response) {\n            return response.json();\n        }\n    );\n    current_books.data = books['data'];\n    current_books.visible = true\n}\n\nexport async function dbpCurrentChapter(bible, book, chapter) {\n    current_chapter = await fetch(`https://4.dbt.io/api/bibles/filesets/${bible}/${book}/${chapter}?v=4&key=${key}`)\n    .then(function (response) {\n        return response.json();\n    });\n    current_chapter = current_chapter['data'][0].path;\n}\n\nexport async function selectBible(ctx, id) {\n    ctx.query = '';\n    const books = await harkSelect(id);\n    ctx.currentBooks = books;\n    ctx.numeralFormatter = (ctx.currentBible.nm) ? new Intl.NumberFormat(ctx.currentBible.nm) : new Intl.NumberFormat()\n    \n    const selectedBible = ctx.bibles.find(bible => bible.id === ctx.currentBooks.bible_id);\n    ctx.currentBible = selectedBible;\n    const url = new URL(window.location);\n    url.searchParams.set('id', ctx.currentBible.id);\n    await setBookAndChapter(ctx, books.data[0], 1);\n}\n\nasync function setBookAndChapter(ctx, book, chapter) {\n    ctx.currentBook = book;\n    await setCurrentChapter(ctx, book, chapter);\n}\n\nexport async function setCurrentChapter(ctx, book, chapter) {\n\n    ctx.currentBook = book;\n    let safeChapter = chapter;\n\n\n    if (!book?.chapters?.includes(chapter)) {\n        safeChapter = 1;\n    }\n\n    if (ctx.currentType === 'hark') {\n        const padLength = (book.book_number === \"19\") ? 3 : 2;\n\n        ctx.currentChapter = {\n            path: `https://content.dbs.org/bibles/audio-new/${ctx.currentBooks.bible_folder}/${book.book_number}_${book.name}_${safeChapter.toString().padStart(padLength, '0')}.mp3`,\n            title: `${book.name} ${safeChapter}`,\n            number: safeChapter,\n            book_id: book.book_id,\n            timestamps: []\n        };\n        ctx.audio.src = ctx.currentChapter.path\n\n        const url = new URL(window.location);\n        url.searchParams.set('book', book.book_id);\n        url.searchParams.set('c', safeChapter);\n\n        if (Array.isArray(ctx.currentBooks.timestamps) && ctx.currentBooks.timestamps.length > 0) {\n            const timestampRegex = /Verse (\\d+)\t(\\d+:\\d+:\\d+\\.\\d+)/gm;\n            let timestampsText = await fetch(`https://content.dbs.org/bibles/audio-new/${ctx.currentBooks.bible_folder}/timingfiles/${ctx.currentBook.book_id}_${safeChapter.toString().padStart(3, '0')}.txt`).then(function (response) {\n                return response.text();\n            }).catch((error) => {\n                console.error('Error:', error);\n            })\n\n            let verseTimestamps = [];\n            let match;\n            while ((match = timestampRegex.exec(timestampsText)) !== null) {\n                // Extract verse number and timestamp from the regex match\n                const verseNumber = match[1];\n                const timestamp = match[2];\n                verseTimestamps.push(timestamp);\n            }\n\n            //await currentBook = book;\n            ctx.currentChapter.timestamps = verseTimestamps;\n            //ctx.currentChapter.sentiments = verseSentiments\n        }\n    }\n}","export function elem(tag, props = {}) {\n    const el = document.createElement(tag);\n    for (const [key, val] of Object.entries(props)) {\n        if (key === 'style' && typeof val === 'object') {\n            Object.assign(el.style, val);\n        } else {\n            el[key] = val;\n        }\n    }\n    return el;\n}\n\nexport function formatTime(ctx, timeInSeconds) {\n    const minutes = (timeInSeconds / 60) | 0;\n    const seconds = (timeInSeconds % 60) | 0;\n    return `${ctx.numeralFormatter.format(minutes)}:${seconds < 10 ? ctx.numeralFormatter.format(0) : ''}${ctx.numeralFormatter.format(seconds)}`;\n}\n\nexport const parseTimestampToSeconds = (timestampStr) => {\n    const [hours, minutes, seconds] = timestampStr.split(':');\n    return (parseInt(hours, 10) * 3600) + (parseInt(minutes, 10) * 60) + parseFloat(seconds);\n}\n\nHTMLDialogElement.prototype.triggerShow = HTMLDialogElement.prototype.showModal;\nHTMLDialogElement.prototype.showModal = function() {\n    this.triggerShow();\n    this.onclick = event => {\n        let rect = this.getBoundingClientRect();\n        if(event.clientY < rect.top || event.clientY > rect.bottom) return this.close();\n        if(event.clientX < rect.left || event.clientX > rect.right) return this.close();\n    }\n}","import { elem } from \"./AudioPlayerHelpers.js\";\n\nexport function createPlaybackRateControls(ctx) {\n  const MIN_RATE = ctx.options?.playbackRate?.min ?? 0.5;\n  const MAX_RATE = ctx.options?.playbackRate?.max ?? 2.25;\n  const STEP = ctx.options?.playbackRate?.step ?? 0.25;\n\n  const updateButtonState = (button, isDisabled) => {\n    button.className = `${button.baseClassName} ${isDisabled ? ctx.class.playbackRate?.disabled : \"\"}`;\n  };\n\n  const changeRate = (delta) => {\n    ctx.audio.playbackRate = Math.min(\n      MAX_RATE,\n      Math.max(MIN_RATE, ctx.audio.playbackRate + delta),\n    );\n\n    playbackRateElem.textContent = ctx.numeralFormatter.format(\n      ctx.audio.playbackRate,\n    );\n\n    updateButtonState(decrementButton, ctx.audio.playbackRate === MIN_RATE);\n    updateButtonState(incrementButton, ctx.audio.playbackRate === MAX_RATE);\n  };\n\n  const playbackRateWrapperElem = elem(\"div\", {\n    className: ctx.class.playbackRate?.wrapper,\n  });\n\n  const decrementButton = elem(\"button\", {\n    baseClassName: ctx.class.playbackRate?.decrease,\n    className: ctx.class.playbackRate?.decrease,\n    textContent: \"-\",\n    onclick: () => changeRate(-STEP),\n  });\n\n  const playbackRateElem = elem(\"span\", {\n    className: ctx.class.playbackRate?.display,\n    textContent: ctx.numeralFormatter.format(ctx.audio.playbackRate),\n  });\n\n  const incrementButton = elem(\"button\", {\n    baseClassName: ctx.class.playbackRate?.increase,\n    className: ctx.class.playbackRate?.increase,\n    textContent: \"+\",\n    onclick: () => changeRate(STEP),\n  });\n\n  ctx.audio.addEventListener(\"loadedmetadata\", () => {\n    playbackRateElem.textContent = ctx.numeralFormatter.format(\n      ctx.audio.playbackRate,\n    );\n  });\n\n  playbackRateWrapperElem.append(\n    decrementButton,\n    playbackRateElem,\n    incrementButton,\n  );\n  return playbackRateWrapperElem;\n}\n","import { elem, formatTime } from \"./AudioPlayerHelpers.js\";\n\nexport function createVolumeAndSleepControls(ctx) {\n  const volumeRow = elem(\"div\", { className: ctx.class.volumeRow });\n  const volumeInput = elem(\"input\", {\n    type: \"range\",\n    min: \"0\",\n    max: \"1\",\n    step: \"0.01\",\n    className: ctx.class.volumeInput,\n    id: \"volume-control\",\n    value: ctx.audio.volume,\n    \"aria-label\": \"Volume Control\",\n  });\n\n  volumeInput.addEventListener(\"input\", () => {\n    ctx.audio.volume = parseFloat(volumeInput.value);\n  });\n\n  const volumeLabel = elem(\"label\", {\n    htmlFor: \"volume-control\",\n    className: ctx.class.volumeLabel,\n    innerHTML: ctx.icons.volumeIcon,\n  });\n  volumeLabel.appendChild(volumeInput);\n  volumeRow.appendChild(volumeLabel);\n\n  const sleepTimerButton = createSleepTimer(ctx, volumeInput);\n  volumeRow.appendChild(sleepTimerButton);\n  return volumeRow;\n}\n\nfunction createSleepTimer(ctx, volumeInput) {\n  const sleepTimerButton = elem(\"button\", {\n    className: ctx.class.sleepTimerButton,\n    innerHTML: ctx.icons.sleepTimer,\n    \"aria-label\": \"Sleep Timer\",\n  });\n  let sleepTimer = null;\n  let elapsedTime = 0;\n  const sleepDuration = 1 * 60 * 1000;\n  const sleepTimerDuration = elem(\"span\", {\n    className: ctx.class.sleepTimerDuration,\n    textContent: formatTime(ctx, sleepDuration / 1000),\n    \"aria-live\": \"polite\",\n  });\n  sleepTimerButton.appendChild(sleepTimerDuration);\n  sleepTimerButton.addEventListener(\"click\", () => {\n    if (sleepTimer) {\n      clearInterval(sleepTimer);\n      sleepTimer = null;\n      volumeInput.value = 1;\n      ctx.audio.volume = 1;\n      elapsedTime = 0;\n      updateSleepTimerUI(sleepDuration);\n    } else {\n      elapsedTime = 0;\n      sleepTimer = setInterval(() => {\n        elapsedTime += 1000;\n        const remainingTime = sleepDuration - elapsedTime;\n        const newVolume = remainingTime / sleepDuration;\n\n        volumeInput.value = Math.max(0, newVolume);\n        ctx.audio.volume = parseFloat(volumeInput.value);\n        updateSleepTimerUI(remainingTime);\n\n        if (elapsedTime >= sleepDuration) {\n          clearInterval(sleepTimer);\n          sleepTimer = null;\n          ctx.audio.pause();\n          updateSleepTimerUI(0);\n        }\n      }, 1000);\n    }\n  });\n\n  ctx.audio.addEventListener(\"loadedmetadata\", () => {\n    sleepTimerDuration.textContent = formatTime(ctx, sleepDuration / 1000);\n  });\n\n  function updateSleepTimerUI(remainingTime) {\n    const percentageElapsed = elapsedTime / sleepDuration;\n    const dashArray = 2 * Math.PI * 9;\n    sleepTimerDuration.textContent = formatTime(ctx, remainingTime / 1000);\n    const sleepIcon = sleepTimerButton.querySelector(\"svg circle:nth-child(2)\");\n    if (sleepIcon) {\n      sleepIcon.setAttribute(\n        \"stroke-dashoffset\",\n        (1 - percentageElapsed) * dashArray,\n      );\n    }\n  }\n  return sleepTimerButton;\n}\n","import { elem } from \"./AudioPlayerHelpers.js\";\n\nexport function createBibleBlockButtons(ctx) {\n    let bibleBlockButtonGroup = elem('div', {\n        id: `${ctx.idPrefix}-bible-block`,\n        className: ctx.class.bibleBlock.buttonGroup });\n    const buttons = [\n        {\n            condition: true,\n            innerHTML: ctx.icons.bibles,\n            className: ctx.class.bibleListNavButton,\n            onclick: () => {ctx.view = 'bible';ctx.render()}\n        },\n        {\n            condition: ctx.view === \"book\",\n            innerHTML: ctx.icons.books,\n            className: ctx.class.bookList.navButton,\n            onclick: () => {ctx.view = 'chapter';ctx.render()}\n        },\n        {\n            condition: ctx.view === \"chapter\",\n            innerHTML: ctx.icons.chapters,\n            className: ctx.class.chapterListNavButton,\n            onclick: () => {ctx.view = 'book';ctx.render()}\n        }\n    ];\n    buttons.forEach(({ condition, innerHTML, className, onclick }) => {\n        if (condition) {\n            bibleBlockButtonGroup.appendChild(elem('button', {\n                innerHTML,\n                className,\n                onclick\n            }));\n        }\n    });\n    return bibleBlockButtonGroup;\n}\n","import { setCurrentChapter } from \"./AudioPlayerProviders.js\";\nimport { elem, parseTimestampToSeconds } from './AudioPlayerHelpers.js'\nimport { createBibleBlockButtons } from \"./AudioPlayerNavigation.js\";\n\n\nexport function updateCurrentBibleBlock(ctx, bible) {\n    ctx.bibleBlock.innerHTML = '';\n    ctx.bibleBlock.className = ctx.class.bibleBlock.wrapper;\n    const bibleBlockInfoWrap = createBibleBlockInfoWrap(ctx, bible);\n    const chapterBookSelectWrapper = elem('div', { className: ctx.class.selectBookChapterWrap });\n    chapterBookSelectWrapper.append(createBookSelector(ctx), createChapterSelector(ctx));\n    createVerseSelector(ctx, chapterBookSelectWrapper);\n    bibleBlockInfoWrap.append(createBibleBlockButtons(ctx));\n    ctx.bibleBlock.append(bibleBlockInfoWrap,chapterBookSelectWrapper);\n    updateBookList(ctx);\n}\n\nfunction createBibleBlockInfoWrap(ctx, bible) {\n    const bibleBlockInfoWrap = elem('div', { className: ctx.class.bibleBlock.infoWrap });\n    const bibleBlockLanguageGroup = elem('div', { className: ctx.class.bibleBlock.languageGroup });\n    bibleBlockLanguageGroup.append(\n        elem('div', { className: ctx.class.bibleBlock.iso, innerText: bible.iso }),\n        elem('div', { innerText: bible.cn })\n    );\n    bibleBlockInfoWrap.append(bibleBlockLanguageGroup);\n    const bibleBlockTitleGroup = elem('div', { className: ctx.class.bibleBlock.titleGroup });\n    bibleBlockTitleGroup.appendChild(elem('div', { className: ctx.class.bibleBlock.title, innerText: bible.tt }));\n    if (bible.tv && bible.tv !== bible.tt) {\n        bibleBlockTitleGroup.appendChild(elem('div', { className: ctx.class.bibleBlock.vernacular, innerText: bible.tv }));\n    }\n    bibleBlockInfoWrap.appendChild(bibleBlockTitleGroup);\n    return bibleBlockInfoWrap;\n}\n\nexport function updateBookList(ctx) {\n    const bookListGrid = ctx.bookListGrid;\n    bookListGrid.innerHTML = '';\n    if (ctx.resultsBooks && ctx.resultsBooks.length && ctx.query !== '') {\n        ctx.resultsBooks.forEach(result => {\n            bookListGrid.appendChild(createBookButton(ctx, result.item));\n        });\n    } else if (ctx.currentBooks && ctx.query === '') {\n        if (ctx.currentBooks['data']) {\n            ctx.currentBooks['data'].forEach(book => {\n                bookListGrid.appendChild(createBookButton(ctx, book));\n            });\n        }\n    }\n}\n\nexport function createBookButton(ctx, book) {\n    const button = elem('button', {\n        className: `${book.book_id} ${ctx.class.bookList.button} ${((ctx.currentBook.book_id == book.book_id) ? ctx.class.bookListButtonActive : '')}`,\n        ariaLabel: book.name,\n        onclick: () => handleBookChange(ctx, book.book_id)\n    });\n    button.dataset.bookId = book.book_id;\n    const contentContainer = elem('div');\n    contentContainer.append(\n        elem('h2', { className: ctx.class.bookList.title, textContent: book.name }),\n        elem('h3', { className: ctx.class.bookList.id, textContent: book.book_id })\n    );\n    button.appendChild(contentContainer);\n    return button;\n}\n\nexport function handleBookChange(ctx, bookId, chapter = 1) {\n    const selectedBook = ctx.currentBooks.data.find(book => book.book_id === bookId);\n    if (!selectedBook) return;\n\n    setCurrentChapter(selectedBook, chapter);\n    const url = new URL(window.location);\n    url.searchParams.set('bookId', selectedBook.book_id);\n    window.history.replaceState({}, '', url);\n\n    ctx.query = '';\n    ctx.chapterListContainer.style.display = \"block\";\n    ctx.view = \"chapter\";\n    ctx.currentBook = selectedBook;\n\n    chapterList(ctx);\n    updateCurrentBibleBlock(ctx, ctx.currentBible);\n}\n\nfunction createBookSelector(ctx) {\n    const bookSelect = elem('select', { className: ctx.class.selectBook });\n    if (ctx.currentBooks && ctx.currentBooks.data) {\n        ctx.currentBooks.data.forEach(book => {\n            const option = elem('option', {\n                value: book.book_id,\n                innerText: book.name,\n                selected: (book.book_id === ctx.currentBook.book_id)\n            });\n            bookSelect.appendChild(option);\n        });\n    }\n    bookSelect.addEventListener('change', (event) => {\n        handleBookChange(ctx, event.target.value);\n    });\n    ctx.bookSelect = bookSelect;\n    return bookSelect;\n}\n\nfunction createChapterSelector(ctx) {\n    const chapterSelect = elem('select', { className: ctx.class.selectChapter });\n    if (ctx.currentBook && ctx.currentBook.chapters) {\n        ctx.currentBook.chapters.forEach(chapter => {\n            const option = elem('option', {\n                value: chapter,\n                innerText: ctx.numeralFormatter.format(chapter),\n                selected: (chapter == ctx.currentChapter.number)\n            });\n            chapterSelect.appendChild(option);\n        });\n    }\n    chapterSelect.addEventListener('change', (event) =>\n        handleChapterChange(ctx, ctx.currentBook, parseInt(event.target.value))\n    );\n    ctx.chapterSelect = chapterSelect;\n    return chapterSelect;\n}\n\nfunction createVerseSelector(ctx, chapterBookSelectWrapper) {\n    if (!ctx.currentChapter || !ctx.currentChapter.timestamps || ctx.currentChapter.timestamps.length == 0) return;\n    const verseSelect = elem('select', { className: ctx.class.selectVerse });\n    ctx.currentChapter.timestamps.forEach((timestamp, index) => {\n        const verseNumber = index + 1;\n        const option = elem('option', {\n            value: verseNumber,\n            innerText: ctx.numeralFormatter.format(parseInt(verseNumber))\n        });\n        verseSelect.appendChild(option);\n    });\n    verseSelect.addEventListener('change', (event) => {\n        const selectedVerse = parseInt(event.target.value, 10);\n        const verseIndex = selectedVerse - 1;\n        if (ctx.currentChapter.timestamps && ctx.currentChapter.timestamps[verseIndex]) {\n            const tsStr = ctx.currentChapter.timestamps[verseIndex];\n            const verseTime = parseTimestampToSeconds(tsStr);\n            ctx.audio.currentTime = verseTime;\n        }\n    });\n    const verseColonSeparator = elem('div', {innerText: ':',className: ctx.class.selectVerseSeparator});\n    chapterBookSelectWrapper.append(verseColonSeparator,verseSelect);\n    ctx.verseSelect = verseSelect;\n    addVerseHighlightOnTimeUpdate(ctx);\n}\n\nfunction addVerseHighlightOnTimeUpdate(ctx) {\n    let lastSelectedVerse = null;\n    ctx.audio.addEventListener('timeupdate', () => {\n        const currentTime = ctx.audio.currentTime;\n        const verseTimes = ctx.currentChapter.timestamps;\n        let currentVerseIndex = -1;\n        for (let i = 0; i < verseTimes.length; i++) {\n            if (currentTime >= parseTimestampToSeconds(verseTimes[i])) {\n                currentVerseIndex = i;\n            } else {\n                break;\n            }\n        }\n        if (currentVerseIndex !== -1 && currentVerseIndex !== lastSelectedVerse) {\n            lastSelectedVerse = currentVerseIndex;\n            ctx.verseSelect.value = currentVerseIndex + 1;\n        }\n    });\n}\n\nexport function chapterList(ctx) {\n    ctx.chapterListContainer.innerHTML = '';\n    ctx.bibleListContainer.style.display = 'none';\n    ctx.bookListContainer.style.display = 'none';\n    ctx.chapterListContainer.style.display = 'block';\n\n    const fragment = document.createDocumentFragment();\n    ctx.currentBook.chapters.forEach(chapterNumber => {\n\n        const chapterButton = elem('button', {\n            className: `${ctx.class.chapterButton} ${(ctx.currentChapter.number == chapterNumber) ? ' ' + ctx.class.chapterButtonActive : ''}`,\n            ariaLabel: `Play Chapter ${chapterNumber}`,\n            textContent: ctx.numeralFormatter.format(chapterNumber),\n            onclick: () => handleChapterChange(ctx, ctx.currentBook, chapterNumber)\n        });\n\n        fragment.appendChild(chapterButton)}\n    );\n    ctx.chapterListContainer.appendChild(fragment);\n    if(ctx.currentBook?.book_id) {\n        const bookArt = ctx.art[ctx.currentBook.book_id]?.[0];\n        if (!bookArt) {\n            console.warn(`No art found for book ID: ${ctx.currentBook.book_id}`);\n            return;\n        }\n        const artElement = document.createElement('img');\n        artElement.src = `./img/chars/${bookArt.file}`;\n        artElement.className = bookArt.class;\n        ctx.chapterListContainer.appendChild(artElement);\n    }\n}\n\nexport function handleChapterChange(ctx, book, chapterNumber) {\n    setCurrentChapter(ctx, book, chapterNumber);\n    ctx.chapterSelect.value = chapterNumber\n    ctx.audio.play();\n    const playPauseIcon = document.querySelector(`.icon-play`);\n    playPauseIcon.innerHTML = ctx.audio.paused ? ctx.icons.play : ctx.icons.pause;\n    chapterList(ctx)\n}\n","import {\n  elem,\n  formatTime,\n  parseTimestampToSeconds,\n} from \"./AudioPlayerHelpers.js\";\n\nexport function createProgressBar(ctx) {\n  function seekAudio(event, ctx, progressWrapper) {\n    const rect = progressWrapper.getBoundingClientRect();\n    const clickRatio = (event.clientX - rect.left) / rect.width;\n    ctx.audio.currentTime =\n      Math.max(0, Math.min(clickRatio, 1)) * ctx.audio.duration;\n  }\n\n  const progressContainer = elem(\"div\", {\n    className: ctx.class?.progress?.container,\n  });\n  const currentTimeDisplay = elem(\"div\", {\n    id: \"currentTime\",\n    className: ctx.class?.progress?.currentTimeDisplay,\n    textContent: formatTime(ctx, ctx.audio.currentTime),\n  });\n\n  const progressBarContainer = elem(\"div\", {\n    id: \"progress-barContainer\",\n    className: ctx.class?.progress?.barContainer,\n  });\n  const progressWrapper = elem(\"div\", {\n    id: \"progress-barWrapper\",\n    className: ctx.class?.progress?.barWrapper,\n  });\n  const progressBarInner = elem(\"div\", {\n    id: \"progress-bar\",\n    className: ctx.class?.progress?.barInner,\n    style: { width: \"0%\" },\n  });\n\n  const timestampWrapper = elem(\"div\", {\n    id: \"timestamps-wrapper\",\n    className: ctx.class?.progress?.timestamps,\n  });\n\n  const circleTip = elem(\"div\", {\n    className: ctx.class?.progress?.circleTip,\n    style: { left: \"0%\" },\n  });\n\n  progressWrapper.append(progressBarInner, circleTip);\n  const onMouseMove = (event) => {\n    if (ctx.isDragging) {\n      seekAudio(event, ctx, progressWrapper);\n    }\n  };\n\n  const onMouseUp = () => {\n    if (ctx.isDragging) {\n      ctx.isDragging = false;\n      document.body.style.userSelect = \"\";\n      document.removeEventListener(\"mousemove\", onMouseMove);\n      document.removeEventListener(\"mouseup\", onMouseUp);\n    }\n  };\n\n  progressWrapper.addEventListener(\"mousedown\", () => {\n    ctx.isDragging = true;\n    document.body.style.userSelect = \"none\";\n    document.addEventListener(\"mousemove\", onMouseMove);\n    document.addEventListener(\"mouseup\", onMouseUp);\n  });\n\n  progressWrapper.addEventListener(\"click\", (e) => {\n    seekAudio(e, ctx, progressWrapper);\n  });\n\n  const durationDisplay = elem(\"div\", {\n    id: \"currentDuration\",\n    className: ctx.class?.progress?.durationDisplay,\n    textContent: formatTime(ctx, ctx.audio.duration || 0),\n  });\n\n  ctx.audio.addEventListener(\"timeupdate\", () => {\n    const progressPercent = (ctx.audio.currentTime / ctx.audio.duration) * 100;\n    progressBarInner.style.width = `${progressPercent}%`;\n    circleTip.style.left = `calc(${progressPercent}% - 3px)`;\n    currentTimeDisplay.textContent = formatTime(ctx, ctx.audio.currentTime);\n  });\n\n  ctx.audio.addEventListener(\"loadedmetadata\", () => {\n    timestampWrapper.innerHTML = \"\";\n    currentTime.textContent = formatTime(ctx, ctx.audio.currentTime);\n    durationDisplay.textContent = formatTime(ctx, ctx.audio.duration);\n\n    if (\n      ctx.currentChapter.timestamps &&\n      Array.isArray(ctx.currentChapter.timestamps)\n    ) {\n      const sortedTimestamps = ctx.currentChapter.timestamps\n        .map(parseTimestampToSeconds)\n        .filter((ts) => ts >= 0 && ts <= ctx.audio.duration)\n        .sort((a, b) => a - b);\n      const margin = 0.25;\n\n      for (let i = 0; i < sortedTimestamps.length - 1; i++) {\n        const current = sortedTimestamps[i];\n        const next = sortedTimestamps[i + 1];\n        const gapPercent = ((next - current) / ctx.audio.duration) * 100;\n        const adjustedWidth = Math.max(0, gapPercent - margin);\n        const adjustedLeft = (current / ctx.audio.duration) * 100 + margin / 2;\n        const tickWrapper = elem(\"div\", {\n          className: ctx.class.progress.tickWrapper,\n          style: {\n            position: \"absolute\",\n            left: `${adjustedLeft}%`,\n            width: `${adjustedWidth}%`,\n          },\n        });\n\n        const tick = elem(\"div\", {\n          className: `progress-tick ${ctx?.class?.progress?.tick} w-full h-full`,\n        });\n        tick.addEventListener(\"click\", () => {\n          ctx.audio.currentTime = current;\n        });\n\n        const verseLabel = elem(\"div\", {\n          className: ctx.class.progress.tickLabel,\n        });\n        verseLabel.textContent = `${i + 1}`;\n\n        tickWrapper.appendChild(tick);\n        tickWrapper.appendChild(verseLabel);\n        timestampWrapper.appendChild(tickWrapper);\n      }\n    }\n  });\n\n  progressBarContainer.append(currentTimeDisplay);\n  progressBarContainer.append(progressWrapper);\n  progressBarContainer.append(durationDisplay);\n  progressContainer.append(progressBarContainer, timestampWrapper);\n\n  return progressContainer;\n}\n","import { elem } from \"./AudioPlayerHelpers.js\";\nimport { createPlaybackRateControls } from \"./MediaPlaybackRate.js\";\nimport { createVolumeAndSleepControls } from \"./MediaSleepTimer.js\";\nimport {\n  handleChapterChange,\n  handleBookChange,\n} from \"./AudioPlayerChapterList.js\";\nimport { createProgressBar } from \"./MediaProgressBar.js\";\n\nexport function createAudioElement(ctx) {\n  const navRow = elem(\"div\", { className: ctx.class.navRow });\n  navRow.append(\n    createBookNavigationButton(ctx, \"prev\"),\n    createChapterNavigationButton(ctx, \"prev\"),\n    createSkipButton(ctx, \"prev\"),\n    createPlayPauseButton(ctx),\n    createSkipButton(ctx, \"next\"),\n    createChapterNavigationButton(ctx, \"next\"),\n    createBookNavigationButton(ctx, \"next\"),\n  );\n  const controlsContainer = elem(\"div\", {\n    className: ctx.class.controlsContainer,\n  });\n  controlsContainer.append(\n    createProgressBar(ctx),\n    createPlaybackRateControls(ctx),\n    navRow,\n    createVolumeAndSleepControls(ctx),\n  );\n  return controlsContainer;\n}\n\nfunction createPlayPauseButton(ctx) {\n  const playPauseButton = elem(\"button\", {\n    className: ctx.class.playPauseButton,\n    onclick: () => (ctx.audio.paused ? ctx.audio.play() : ctx.audio.pause()),\n  });\n\n  const playIcon = elem(\"span\", {\n    className: ctx.class.playPauseIcon,\n    innerHTML: ctx.icons.play,\n  });\n  playPauseButton.appendChild(playIcon);\n  ctx.audio.addEventListener(\"play\", () => {\n    playIcon.innerHTML = ctx.icons.pause;\n  });\n  ctx.audio.addEventListener(\"pause\", () => {\n    playIcon.innerHTML = ctx.icons.play;\n  });\n  return playPauseButton;\n}\n\nfunction createBookNavigationButton(ctx, dir) {\n  return elem(\"button\", {\n    className: ctx.class[`${dir}BookButton`],\n    innerHTML: ctx.icons[`Book`],\n    onclick: () => {\n      const index = ctx.currentBooks.data.findIndex(\n        (book) => book.book_id === ctx.currentBook.book_id,\n      );\n      const nextIndex = dir === \"prev\" ? index - 1 : index + 1;\n      if (ctx.currentBooks.data[nextIndex]) {\n        handleBookChange(ctx, ctx.currentBooks.data[nextIndex].book_id);\n        handleChapterChange(ctx, ctx.currentBooks.data[nextIndex], 1);\n      }\n    },\n  });\n}\n\nfunction createChapterNavigationButton(ctx, dir) {\n  return elem(\"button\", {\n    className: ctx.class[`${dir}ChapterButton`],\n    innerHTML: ctx.icons[`Chapter`],\n    onclick: () => changeChapter(ctx, dir),\n  });\n}\n\nasync function changeChapter(ctx, dir) {\n  const chapterChange = dir === \"prev\" ? -1 : 1;\n  const targetChapter = ctx.currentChapter.number + chapterChange;\n\n  const inCurrentBook =\n    dir === \"prev\"\n      ? targetChapter > 0\n      : targetChapter < ctx.currentBook.chapters.length + 1;\n  if (inCurrentBook) {\n    handleChapterChange(ctx, ctx.currentBook, targetChapter);\n    return;\n  }\n\n  const currentIndex = ctx.currentBooks.data.findIndex(\n    (book) => book.book_id === ctx.currentBook.book_id,\n  );\n  const targetIndex = currentIndex + chapterChange;\n  const targetBook = ctx.currentBooks.data[targetIndex];\n  if (targetBook) {\n    handleBookChange(ctx, targetBook.book_id);\n    handleChapterChange(ctx, targetBook, 1);\n  }\n}\n\nfunction createSkipButton(ctx, dir) {\n  return elem(\"button\", {\n    id: `${dir}SkipButton`,\n    className: ctx.class[`${dir}SkipButton`],\n    innerHTML: ctx.icons[`Skip`],\n    onclick: () => {\n      ctx.audio.currentTime + (dir == \"next\" ? 15 : -15);\n      ctx.audio.currentTime = Math.min(\n        Math.max(ctx.audio.currentTime, 0),\n        ctx.audio.duration,\n      );\n    },\n  });\n}\n","export function fuzzySearch(query, data, headers) {\n    const queryLower = query.toLowerCase();\n    const baseThreshold = 0.9;\n    const minThreshold = 0.5;\n    const threshold = Math.max(minThreshold, baseThreshold - (queryLower.length > 10 ? 0.15 : queryLower.length * 0.05));\n    \n    return data.reduce((results, item) => {\n        let totalScore = 0;\n        let matches = 0;\n        headers.forEach(header => {\n            if (item[header]) {\n                const itemValue = item[header].toString().toLowerCase();\n                const distance = getLevenshteinDistance(queryLower, itemValue);\n                const score = distance / Math.max(queryLower.length, itemValue.length);\n                if (score <= threshold) {\n                    totalScore += score;\n                    matches++;\n                }\n            }\n        });\n        if (matches > 0) {\n            results.push({item, score: totalScore / matches});\n        }\n        return results;\n    }, []).sort((a, b) => a.score - b.score);\n}\n\nfunction getLevenshteinDistance(a, b) {\n    if (a === b) return 0;\n    const d = Array.from({length: a.length + 1}, (_, i) => i);\n    for (let j = 1; j <= b.length; j++) {\n        let prev = d[0];\n        d[0] = j;\n        for (let i = 1; i <= a.length; i++) {\n            const temp = d[i];\n            d[i] = Math.min(d[i] + 1, d[i-1] + 1, prev + (a[i-1] !== b[j-1]));\n            prev = temp;\n        }\n    }\n    return d[a.length];\n}","import { elem } from './AudioPlayerHelpers.js'\nimport { fuzzySearch } from './AudioPlayerSearch.js';\nimport { selectBible } from  './AudioPlayerProviders.js'\nimport { updateCurrentBibleBlock, updateBookList } from './AudioPlayerChapterList.js';\n\nexport function initBibleList(ctx) {\n    ctx.bibleListContainer.innerHTML = '';\n    const container = elem('div', { className: ctx.class.searchWrapper });\n    const input = elem('input', {\n        type: 'search',\n        placeholder: `Filter (${ctx.bibles.length}) Audio Bibles`,\n        autocomplete: 'off',\n        className: ctx.class.searchInput,\n        oninput: () => {\n            ctx.query = input.value;\n            ctx.results = fuzzySearch(ctx.query, ctx.bibles, ['tt','tv','ln'])\n            updateBibleGrid(ctx);\n        }\n    });\n    input.setAttribute('aria-label', 'Search');\n    container.appendChild(input);\n    ctx.bibleListContainer.appendChild(container);\n    const bibleListGrid = elem('div', { className: ctx.class.bibleListGrid });\n    ctx.bibleListGrid = bibleListGrid;\n    ctx.bibleListContainer.appendChild(bibleListGrid);\n    updateBibleGrid(ctx);\n}\n\nfunction updateBibleGrid(ctx) {\n    const bibleListGrid = ctx.bibleListGrid;\n    bibleListGrid.innerHTML = '';\n    const bibles = ctx.query ? ctx.results.map(result => result.item) : ctx.bibles;\n    const fragment = document.createDocumentFragment();\n    bibles.forEach(bible => fragment.appendChild(createBibleButton(ctx, bible)));\n    bibleListGrid.appendChild(fragment);\n}\n\nfunction createBibleButton(ctx, bible) {\n    const buttonWrap = elem('div', {className: ctx.class.bibleButton.wrapper});\n\n    const button = elem('button', {className: ctx.class.bibleButton.button, onclick: () => handleBibleButtonClick(ctx, bible)});\n    buttonWrap.appendChild(button)\n    button.dataset.testId = bible.id;\n    button.setAttribute('aria-label', bible.tv ?? bible.tt);\n\n    const bibleListButtonLanguage = elem('div', { className: ctx.class.bibleButton.languageWrap });\n    bibleListButtonLanguage.appendChild(elem('h2', { className: ctx.class.bibleButton.language, textContent: bible.ln }));\n    bibleListButtonLanguage.appendChild(elem('small', { className: ctx.class.bibleButton.iso, textContent: bible.iso }));\n\n    const bibleListButtonTitle = elem('div', { className: ctx.class.bibleButton.titleWrap });\n    bibleListButtonTitle.appendChild(elem('h4', { className: ctx.class.bibleButton.title, textContent: bible.tt}));\n\n    if (bible.tt !== bible.tv && bible.tv) {\n        const tv = elem('p', {\n            className: ctx.class.bibleButton.vernacular,\n            textContent: bible.tv\n        });\n        bibleListButtonTitle.appendChild(tv);\n    }\n\n    button.appendChild(bibleListButtonLanguage);\n    button.appendChild(bibleListButtonTitle);\n\n    if(bible.dl) {\n        const downloadButton = elem('button', {\n            className: ctx.class.bibleButton.download,\n            innerHTML: ctx.icons.download,\n            onclick:() => handleBibleDownload(ctx, bible)})\n        buttonWrap.appendChild(downloadButton)\n    }\n\n    return buttonWrap;\n}\n\nexport async function handleBibleDownload(ctx, bible) {\n    try {\n        if (!bible.dl) {\n            console.log(\"Bible object does not contain a valid download URL\");\n            return;\n        }\n        const dialog = elem('dialog', {className: ctx.class.bibleDownloadDialog.wrapper});\n        const message = elem(\"div\", {innerHTML: ctx?.download_text ?? `<div class=\"text-sm max-w-sm\"></div>`});\n        const copyright = elem(\"div\", { innerHTML: `\n            <p class=\"${ctx.class.bibleDownloadDialog.audio_copyright}\">${bible.audio_copyright}</p>\n            <p class=\"${ctx.class.bibleDownloadDialog.text_copyright}\">${bible.text_copyright}</p>`\n        });\n        dialog.append(message, copyright);\n        const downloadButton = elem(\"button\",{className: ctx.class.bibleDownloadDialog.button_download,textContent: `Download ${bible.dl_size ?? ''}`});\n        downloadButton.addEventListener(\"click\", () => {\n            const anchor = document.body.appendChild(elem('a', { href: bible.dl, download: '' }));\n            anchor.click();\n            anchor.remove();\n            dialog.close();\n            dialog.remove();\n        });\n        dialog.appendChild(downloadButton);\n        const cancelButton = elem(\"button\", {className: ctx.class.bibleDownloadDialog.cancel, textContent: \"Cancel\"});\n        cancelButton.addEventListener(\"click\", () => {dialog.close();document.body.removeChild(dialog);});\n        dialog.appendChild(cancelButton);\n        document.body.appendChild(dialog);\n        dialog.showModal();\n      } catch (error) {\n          console.error(\"An error occurred while trying to display the dialog:\", error);\n      }\n}\n\nexport async function handleBibleButtonClick(ctx, bible) {\n\n    if (bible.tp === \"hark\") {\n        ctx.view = \"book\";\n        ctx.currentBible = bible;\n        await selectBible(ctx, bible.id);\n        updateCurrentBibleBlock(ctx, bible);\n        ctx.render();\n        const url = new URL(window.location);\n        url.searchParams.set('bibleId', bible.id);\n        window.history.replaceState({}, '', url);\n    } else if (bible.tp === \"dbl\") {\n        // Handle 'dbl' type if necessary\n    }\n}\n\nexport function initBookList(ctx) {\n    const searchInput = elem('input', {\n        type: 'search',\n        placeholder: ctx.i18n?.filter_books ?? 'Filter Books',\n        className: ctx.class.searchInput,\n        ariaLabel: 'search',\n        autocomplete: 'off',\n        oninput: () => {\n            ctx.query = searchInput.value;\n            console.log(searchInput.value, ctx.currentBooks.data)\n            ctx.resultsBooks = fuzzySearch(ctx.query, ctx.currentBooks.data, ['name'])\n            updateBookList(ctx);\n        }\n    });\n    const searchInputContainer = elem('div', { className: ctx.class.searchInputContainer });\n    searchInputContainer.appendChild(searchInput);\n    ctx.bookListContainer.appendChild(searchInputContainer);\n    ctx.bookListContainer.appendChild((ctx.bookListGrid = elem('div', { className: ctx.class.bookList.grid })));\n    updateBookList(ctx);\n}\n","import { mergeClasses, mergeIcons, mergeArt } from \"./AudioPlayerStyles.js\";\nimport { loadProviders } from \"./AudioPlayerProviders.js\";\nimport { elem } from \"./AudioPlayerHelpers.js\";\nimport { createAudioElement } from \"./AudioPlayerMedia.js\";\nimport { initBibleList, handleBibleButtonClick, initBookList } from \"./AudioPlayerBibleList.js\";\nimport { chapterList, handleBookChange, updateBookList } from \"./AudioPlayerChapterList.js\";\n\nexport default class AudioPlayer {\n  constructor(containerId, options) {\n    this.container = document.getElementById(containerId);\n    this.providers = options.providers ?? [\"hark\"];\n    this.bibles = [];\n    this.currentBible = {};\n    this.currentBooks = [];\n    this.currentBook = {};\n    this.currentChapter = { number: 0 };\n    this.audio = document.createElement(\"audio\");\n    this.currentType = \"hark\";\n    this.isDragging = false;\n    this.class = mergeClasses(options.classes);\n    this.icons = mergeIcons(options.icons);\n    this.art = mergeArt(options.art);\n    this.results = [];\n    this.query = \"\";\n    this.titles = options?.titles ?? [];\n    this.view = \"bible\";\n    this.numeralFormatter = new Intl.NumberFormat()\n    this.idPrefix = options?.idPrefix ?? \"audio-player\";\n    this.views = {\n        bible: {player: \"none\", bibleListContainer: \"block\", bookListContainer: \"none\", chapterListContainer: \"none\"},\n        book: {player: \"block\", bibleListContainer: \"none\", bookListContainer: \"block\", chapterListContainer: \"none\"},\n        chapter: {player: \"block\", bibleListContainer: \"none\", bookListContainer: \"none\", chapterListContainer: \"block\"},\n    };\n  }\n\n  static async create(containerId, options) {\n    const player = new AudioPlayer(containerId, options);\n    await loadProviders(player)\n    player.container.innerHTML = \"\";\n    const idp = player.idPrefix;\n    const playerContainer = elem(\"div\", {id: `${idp}-player-container`,className: player.class.playerContainer});\n    player.bibleListContainer = elem(\"div\", {id: `${idp}-bible-list-container`,className: player.class.bibleListContainer});\n    player.bookListContainer = elem(\"div\", {id: `${idp}-book-list-container`,className: player.class.bookList.container});\n    player.chapterListContainer = elem(\"div\", {id: `${idp}-chapter-list-container`,className: player.class.chapterListContainer});\n    player.bibleBlock = elem(\"div\", {id: `${idp}-bible-block`,className: player.class.bibleBlock.wrapper});\n    player.player = createMediaPlayer(player);\n    player.player.prepend(player.bibleBlock)\n    playerContainer.append(player.audio, player.player);\n    initBookList(player);\n    playerContainer.append(player.bookListContainer,player.chapterListContainer,player.bibleListContainer);\n    player.container.appendChild(playerContainer);\n    this.setDefaultView(player);\n    return player;\n  }\n\n  static async setDefaultView(player) {\n    const url = new URL(window.location);\n    if (url.searchParams.get(\"bibleId\")) {\n      await handleBibleButtonClick(player, player.bibles.find((bible) => bible.id == url.searchParams.get(\"bibleId\")));\n      player.view = \"book\";\n    }\n    if (url.searchParams.get(\"bookId\")) {\n      await handleBookChange(player, url.searchParams.get(\"bookId\"));\n      player.view = \"chapter\";\n    }\n    if (player.view === \"bible\") {\n      initBibleList(player);\n    }\n\n    setView(player)\n  }\n\n  render() {\n    if (this.view === \"bible\") {\n      initBibleList(this);\n    } else if (this.view === \"book\") {\n      updateBookList(this);\n    } else if (this.view === \"chapter\") {\n      chapterList(this);\n    }\n    setView(this)\n  }\n\n  setData(newData) {\n    Object.assign(this, newData);\n  }\n}\n\nfunction setView(player) {\n    const currentView = player.views[player.view] || views.bible;\n    player.player.style.display = currentView.player;\n    player.bibleListContainer.style.display = currentView.bibleListContainer;\n    player.bookListContainer.style.display = currentView.bookListContainer;\n    player.chapterListContainer.style.display = currentView.chapterListContainer;\n}\n\nfunction createMediaPlayer(ctx) {\n  const mediaPlayerWrap = elem(\"div\", {\n    id: \"media-player-wrap\",\n    className: ctx.class.mediaPlayerWrap,\n  });\n\n  const audioElement = createAudioElement(ctx);\n  mediaPlayerWrap.appendChild(audioElement);\n\n  return mediaPlayerWrap;\n}\n"],"names":["mergeClasses","customClasses","mergedClasses","key","Object","keys","startsWith","substring","mergeIcons","customIcons","mergedIcons","mergeArt","customArt","mergedArt","BASE_CONTENT_URL","async","loadProviders","player","providerFunctions","hark","harkList","dbp","dbpList","provider","providers","bibles","concat","i","length","customTitle","titles","id","tt","tv","country_id","fetch","then","response","json","output","map","bible","tp","dl","filter","ci","includes","harkSelect","books","filenameRequest","filenames","text","booksMap","Map","filenamePattern","split","sort","forEach","filename","match","bookNumber","bookName","chapterString","chapterNumber","parseInt","has","set","name","book_number","book_id","chapters","get","push","timingFiles","ok","console","warn","book","values","a","b","bible_id","bible_folder","timestamps","data","Array","from","initial_path","last_page","meta","pagination","current_page","results","selectBible","ctx","query","currentBooks","numeralFormatter","currentBible","Intl","NumberFormat","nm","selectedBible","find","url","URL","window","location","searchParams","setBookAndChapter","chapter","currentBook","setCurrentChapter","safeChapter","currentType","padLength","currentChapter","path","toString","padStart","title","number","audio","src","isArray","timestampRegex","timestampsText","catch","error","verseTimestamps","exec","timestamp","elem","tag","props","el","document","createElement","val","entries","assign","style","formatTime","timeInSeconds","minutes","seconds","format","parseTimestampToSeconds","timestampStr","hours","parseFloat","HTMLDialogElement","prototype","triggerShow","showModal","this","onclick","event","rect","getBoundingClientRect","clientY","top","bottom","close","clientX","left","right","createPlaybackRateControls","MIN_RATE","options","playbackRate","min","MAX_RATE","max","STEP","step","updateButtonState","button","isDisabled","className","baseClassName","class","disabled","changeRate","delta","Math","playbackRateElem","textContent","decrementButton","incrementButton","playbackRateWrapperElem","wrapper","decrease","display","increase","addEventListener","append","createVolumeAndSleepControls","volumeRow","volumeInput","type","value","volume","volumeLabel","htmlFor","innerHTML","icons","volumeIcon","appendChild","sleepTimerButton","createSleepTimer","sleepTimer","elapsedTime","sleepDuration","sleepTimerDuration","clearInterval","updateSleepTimerUI","setInterval","remainingTime","newVolume","pause","percentageElapsed","dashArray","PI","sleepIcon","querySelector","setAttribute","createBibleBlockButtons","bibleBlockButtonGroup","idPrefix","bibleBlock","buttonGroup","buttons","condition","bibleListNavButton","view","render","bookList","navButton","chapterListNavButton","updateCurrentBibleBlock","bibleBlockInfoWrap","createBibleBlockInfoWrap","chapterBookSelectWrapper","selectBookChapterWrap","createBookSelector","createChapterSelector","createVerseSelector","updateBookList","infoWrap","bibleBlockLanguageGroup","languageGroup","iso","innerText","cn","bibleBlockTitleGroup","titleGroup","vernacular","bookListGrid","resultsBooks","result","createBookButton","item","bookListButtonActive","ariaLabel","handleBookChange","dataset","bookId","contentContainer","selectedBook","history","replaceState","chapterListContainer","chapterList","bookSelect","selectBook","option","selected","target","chapterSelect","selectChapter","handleChapterChange","verseSelect","selectVerse","index","verseNumber","selectedVerse","verseIndex","tsStr","verseTime","currentTime","verseColonSeparator","selectVerseSeparator","addVerseHighlightOnTimeUpdate","lastSelectedVerse","verseTimes","currentVerseIndex","bibleListContainer","bookListContainer","fragment","createDocumentFragment","chapterButton","chapterButtonActive","bookArt","art","artElement","file","play","playPauseIcon","paused","createProgressBar","seekAudio","progressWrapper","clickRatio","width","duration","progressContainer","progress","container","currentTimeDisplay","progressBarContainer","barContainer","barWrapper","progressBarInner","barInner","timestampWrapper","circleTip","onMouseMove","isDragging","onMouseUp","body","userSelect","removeEventListener","e","durationDisplay","progressPercent","sortedTimestamps","ts","margin","current","next","gapPercent","adjustedWidth","adjustedLeft","tickWrapper","position","tick","verseLabel","tickLabel","createAudioElement","navRow","createBookNavigationButton","createChapterNavigationButton","createSkipButton","createPlayPauseButton","controlsContainer","playPauseButton","playIcon","dir","findIndex","nextIndex","changeChapter","chapterChange","targetChapter","inCurrentBook","currentIndex","targetIndex","targetBook","fuzzySearch","headers","queryLower","toLowerCase","baseThreshold","minThreshold","threshold","reduce","totalScore","matches","header","itemValue","distance","getLevenshteinDistance","score","d","_","j","prev","temp","initBibleList","searchWrapper","input","placeholder","autocomplete","searchInput","oninput","updateBibleGrid","bibleListGrid","createBibleButton","buttonWrap","bibleButton","handleBibleButtonClick","testId","bibleListButtonLanguage","languageWrap","language","ln","bibleListButtonTitle","titleWrap","downloadButton","download","handleBibleDownload","log","dialog","bibleDownloadDialog","message","download_text","copyright","audio_copyright","text_copyright","button_download","dl_size","anchor","href","click","remove","cancelButton","cancel","removeChild","initBookList","i18n","filter_books","searchInputContainer","grid","AudioPlayer","constructor","containerId","getElementById","classes","views","create","idp","playerContainer","createMediaPlayer","prepend","setDefaultView","setView","setData","newData","currentView","mediaPlayerWrap","audioElement"],"mappings":"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"}