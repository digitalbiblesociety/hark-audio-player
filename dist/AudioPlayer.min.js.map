{"version":3,"file":"AudioPlayer.min.js","sources":["../src/AudioPlayerStyles.js","../src/AudioPlayerProviders.js","../src/AudioPlayerHelpers.js","../src/MediaSleepTimer.js","../src/AudioPlayerChapterList.js","../src/AudioPlayerNavigation.js","../src/AudioPlayerMedia.js","../src/MediaProgressBar.js","../src/MediaPlaybackRate.js","../src/AudioPlayerSearch.js","../src/AudioPlayerBibleList.js","../src/AudioPlayer.js"],"sourcesContent":["const defaultClasses = {\n  playerHeader: \"\",\n  playerContainer: \"w-full mx-auto max-w-7xl\",\n  bibleListContainer: \"\",\n  chapterListContainer: \"relative w-full max-w-4xl mx-auto\",\n  bibleListGrid: \"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3\",\n\n  bibleBlock: {\n    wrapper: `flex flex-col justify-between text-sm text-center md:text-base lg:text-lg font-semibold text-black`,\n    infoWrap: \"flex flex-row justify-between gap-4 max-w-md w-full mx-auto bg-stone-100 border border-stone-200 mt-12 p-3\",\n    titleGroup: \"flex-shrink truncate\",\n    vernacular: \"truncate text-sm mb-1\",\n    title: \"truncate text-2xl font-semibold\",\n    languageGroup: \"\",\n    iso: \"text-sm\",\n    buttonGroup: \"flex flex-col justify-between\",\n  },\n\n  container: \"audio-player-container mx-auto max-w-7xl w-full\",\n  audio: \"\",\n  controlsContainer: \"controls-container flex flex-col\",\n  navRow: \"flex flex-row items-center justify-center gap-4 py-4 bg-stone-100 border border-stone-200 w-full max-w-md mx-auto\",\n  prevBookButton: \"prev-book-button flex justify-center items-center\",\n  nextBookButton: \"next-book-button flex justify-center transform -scale-x-100 items-center\",\n  prevChapterButton: \"prev-chapter-button flex justify-center items-center\",\n  nextChapterButton: \"next-chapter-button flex justify-center transform -scale-x-100 items-center\",\n  playPauseButton: \"play-pause-button flex justify-center items-center\",\n  playPauseIcon: \"icon-play\",\n  controlRow2: \"grid grid-cols-5 mb-1\",\n  leftControls: \"flex flex-row justify-center items-center col-span-2 space-x-6\",\n\n  playbackRate: {\n    wrapper: \"flex mx-auto w-full max-w-md justify-center px-8 py-2 bg-stone-100 text-xs\",\n    display: \"mx-1 text-stone-400 text-sm\",\n    increase: \"w-6 h-6 border-2 rounded-2xl text-stone-500\",\n    decrease: \"w-6 h-6 border-2 rounded-2xl text-stone-500\",\n    disabled: \"opacity-50\",\n  },\n\n  rightControls: \"flex flex-row justify-center items-center col-span-2 space-x-6\",\n  playSpeedControl: \"flex flex-row justify-center items-center text-xs\",\n  decrementIcon: \"size-6\",\n  incrementIcon: \"size-6\",\n  decreaseSpeedButton: `w-6 h-6 border-2 rounded-2xl hover:border-blue-600 dark:hover:border-white text-stone-500 dark:hover:text-white`,\n  increaseSpeedButton: `w-6 h-6 border-2 rounded-2xl hover:border-blue-600 dark:hover:border-white text-stone-500 dark:hover:text-white`,\n  prevSkipButton: `flex justify-center items-center text-stone-600 hover:text-blue-600`,\n  nextSkipButton: `flex justify-center items-center transform -scale-x-100 text-stone-600 hover:text-blue-600`,\n\n  progress: {\n    container: \"relative flex flex-col mx-auto w-full max-w-md justify-around px-1 pt-4 bg-stone-100 text-xs\",\n    barContainer: \"flex flex-row justify-between relative z-10\",\n    barWrapper: \"mx-auto min-w-80 mx-3 w-3/4 sm:w-5/6 h-3 rounded-lg relative border bg-gradient-to-br shadow-inner border-stone-300 from-white to-stone-200 dark:from-neutral-50 dark:to-stone-400 border-stone-500\",\n    barInner: \"h-3 w-0 bg-blue-600 rounded-md\",\n    circleTip: \"absolute top-1/2 transform -translate-y-1/2 -translate-x-1/2 w-5 h-5 bg-blue-600 rounded-full border border-blue-500\",\n    currentTimeDisplay: \"text-black\",\n    durationDisplay: \"text-black\",\n    timestamps: \"flex w-5/6 mx-auto h-8 absolute inset-x-2 z-0 block my-4\",\n    tick: \"absolute top-0 h-full\",\n    tickWrapper: \"group relative h-full bg-stone-400 rounded-sm\",\n    tickLabel: \"verse-label hidden group-hover:block absolute left-1/2 -translate-x-1/2 top-full mt-1 px-2 py-1 text-xs bg-gray-200 text-gray-900 rounded-lg shadow border whitespace-nowrap\",\n  },\n\n  mediaPlayerWrap: \"w-full flex flex-col justify-center\",\n  mediaPlayerHeader: \"\",\n  mediaPlayerBody: \"\",\n  mediaPlayerNavRow: \"grid grid-cols-5 px-2 text-stone-700 dark:text-stone-300 divide-x divide-stone-500 dark:divide-stone-600\",\n  bibleListNavButton: \"\",\n  bookListNavButton: \"\",\n  chapterListNavButton: \"\",\n\n  volumeRow: \"flex mx-auto w-full max-w-md justify-center items-center px-8 bg-stone-100 text-xs\",\n  volumeControl: \"volume-control w-full\",\n  volumeInput: \"w-full\",\n  volumeLabel: \"flex flex-row pl-2 mx-4 w-1/2\",\n\n  selectBookChapterWrap: \"relative bg-stone-100 flex flex-row gap-2 w-full max-w-md mx-auto\",\n  selectBook: \"inline-flex items-center gap-x-1.5 bg-stone-100 hover:bg-stone-200 px-3 py-2 w-full\",\n  selectChapter: \"inline-flex items-center text-center bg-stone-100 w-12 hover:bg-stone-200 border-none appearance-none\",\n  selectVerseSeparator: \"inline-flex items-center bg-stone-100\",\n  selectVerse: \"inline-flex items-center text-center bg-stone-100 w-12 hover:bg-stone-200 border-none appearance-none\",\n\n  bibleButton: {\n    wrapper: \"relative bg-stone-100 border border-stone-200 rounded min-h-20\",\n    button: \"flex flex-row bg-stone-100 h-full w-full hover:bg-stone-200\",\n    languageWrap: \"py-1 bg-stone-200 h-full w-24 flex flex-col justify-center items-center\",\n    language: \"text-sm font-medium text-stone-900\",\n    iso: \"truncate font-mono mt-1 text-sm text-stone-500\",\n    titleWrap: \"py-1 h-full w-full flex flex-col justify-center items-center\",\n    title: \"line-clamp-2 text-center text-sm font-medium text-stone-900\",\n    vernacular: \"text-sm text-stone-500 max-w-64\",\n    download: \"absolute text-stone-500 right-0 bottom-0 rounded-tl size-8 flex justify-center items-center bg-stone-200 hover:bg-stone-300\",\n  },\n\n  bibleDownloadDialog: {\n    wrapper: \"p-4 shadow-lg text-center\",\n    button_download: \"px-5 py-2 mx-1 bg-blue-500 text-white rounded cursor-pointer\",\n    cancel: \"px-5 py-2 mx-1 bg-red-600 text-white rounded cursor-pointer\",\n    audio_copyright: \"block text-stone-600\",\n    text_copyright: \"block text-stone-600 text-sm\",\n  },\n\n  sleepTimerButton: \"sleep-timer-button group block py-1.5 px-1\",\n  sleepTimerDuration: \"text-xs pl-1 pt-2 inline-block timer-display\",\n  sleepTimerWrap: \"flex flex-row justify-center align-start text-stone-400 hover:text-blue-600\",\n  searchWrapper: \"mx-auto flex items-center w-1/3 my-3\",\n  searchInput: \"px-4 py-2 w-full max-w-7xl mx-auto bg-white border border-stone-200\",\n\n  searchInputContainer: \"flex w-full max-w-xl mx-auto my-4\",\n  bookList: {\n    container: \"w-full\",\n    grid: \"grid grid-cols-3 md:grid-cols-4 gap-2\",\n    button: \"bg-stone-100 border rounded md:rounded-lg\",\n    buttonActive: \"bg-stone-100 border border-stone-300\",\n    title: \"font-medium text-sm lg:text-base\",\n    id: \"w-full flex justify-end opacity-60 text-sm mr-8\",\n  },\n\n  chapterButton: \"bg-stone-100/90 w-12 h-12 m-2 border border-stone-700 rounded text-lg hover:bg-stone-300\",\n  chapterButtonActive: \"bg-stone-500 text-stone-100\",\n};\n\n/**\n * Merges custom CSS class definitions with a set of default classes. If a key in the custom classes starts\n * with an underscore, it will overwrite the corresponding default class after removing the underscore.\n * Keys without an underscore will simply merge by replacing the existing default with the custom class.\n *\n * @param {Object} customClasses - An object containing custom class definitions. Keys starting with\n *                 an underscore indicate classes that should overwrite default classes.\n * @returns {Object} An object containing the merged classes.\n */\nexport const mergeClasses = (customClasses = {}) => {\n  const mergedClasses = { ...defaultClasses };\n  for (const key of Object.keys(customClasses)) {\n    if (key.startsWith(\"_\")) {\n      mergedClasses[key.substring(1)] = customClasses[key];\n    } else {\n      mergedClasses[key] = customClasses[key];\n    }\n  }\n\n  return mergedClasses;\n};\n\nconst defaultIcons = {\n  speedSlow: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 30\"><path d=\"M4.83 10.06a.67.67 0 1 0 0 1.34.67.67 0 0 0 0-1.34zm.56-2.02c.43 0 .85.09 1.22.28 1.07.55 1.4 1.46 1.64 2.4.3 1.22-.07 1.95.12 2.75.17.77 1.14 3.28 4.6 5.41 3.1 1.92 8.61 2.37 15.01.26.44-.14.87-.08 1 .72a13 13 0 0 0 .76 2.78c.15.36.2.66.1.93-.11.27-.35.43-.63.56-.93.42-1.77.6-2.73.63-.36.01-.65-.15-.84-.38a1.6 1.6 0 0 1-.3-.77c-.1-.65-.16-1.37-.16-2.08 0-.25-.13-.39-.4-.25a10.32 10.32 0 0 1-5.08 1.08 9.96 9.96 0 0 1-4.97-1.46c-.25-.16-.44-.02-.44.21-.02.74.03 1.52.14 2.25.06.4.04.71-.14.94-.17.24-.45.33-.76.38a6.5 6.5 0 0 1-2.88-.16 1.26 1.26 0 0 1-.85-.76 2.01 2.01 0 0 1-.1-.93c.13-1.23.06-2.66.69-3.97.17-.36.18-.54-.34-.62-2.83-.38-6.17-2.19-7.4-3.84a3.03 3.03 0 0 1-.54-1.1c-.07-.33-.05-.68.44-.48.58.24 1.24.21 1.88-.03.3-.12.16-.44-.15-.32-.53.16-1.11.05-1.64-.14-.43-.15-.6-.53-.67-.88-.09-.5.08-1 .33-1.38a4.84 4.84 0 0 1 1.8-1.71c.42-.2.86-.31 1.29-.32Zm9.17 1.25.53 2.31a12.91 12.91 0 0 0-2.73 4.28c-.17.5.28.74.41.4.59-1.49 1.6-3.16 2.67-4.3l3.5 1.42a8.7 8.7 0 0 0-.32 2.66c0 .94.1 1.83.12 2.5.02.41.54.4.52.04-.03-.69-.12-1.6-.12-2.54 0-.98.1-1.95.32-2.57l3.99-.54a13.05 13.05 0 0 1 2.63 4.57c.11.35.59.11.5-.16a13.5 13.5 0 0 0-2.67-4.68l1.84-1.84c1.01.45 2.03 1.6 2.75 2.78.4.66.7 1.33.9 1.86.1.26.14.52.18.77l.2-.08c.5-.2.85.02 1.01.42.21.52-.09.9-.47 1.07-7.3 3.24-13.8 2.76-17.06.75-3.33-2.06-4.2-4.46-4.35-5.07-.1-.42.14-.72.5-.83.43-.13.84.03 1.01.44.24-.62.8-1.65 1.29-2.13a5.37 5.37 0 0 1 2.85-1.53zm4.38-1.24c.5-.02 1.02 0 1.52.06 2 .24 3.86 1.1 4.76 2.48l-1.8 1.84-4.12.56-3.7-1.5-.54-2.37a7.93 7.93 0 0 1 3.88-1.07z\" /></svg>`,\n  speedFast: ``,\n  sleepTimer: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" class=\"w-7 h-7\"><path d=\"M22.97 16.84h-3.25l3.56-3.26c.07-.05.1-.08.1-.14a.43.4 0 0 0-.37-.56h-4.38a.45.41 0 0 0 0 .82h3.29l-3.6 3.25a.43.4 0 0 0-.09.43.43.4 0 0 0 .4.25h4.34a.43.4 0 0 0 0-.79zm-6.44 1.98h-2.45l2.79-2.49a.43.4 0 0 0 .06-.45.43.4 0 0 0-.4-.26h-3.48a.45.41 0 0 0 0 .82h2.48l-2.79 2.5-.06.14a.31.28 0 0 0 0 .28.43.4 0 0 0 .37.28h3.5a.45.41 0 0 0 0-.82zm2.75 3.9h-1.42l1.73-1.55.1-.14v-.28a.43.4 0 0 0-.44-.29h-2.48a.43.4 0 0 0 0 .8h1.43l-1.74 1.55a.43.4 0 0 0-.09.46.43.4 0 0 0 .4.22h2.48a.43.4 0 0 0 0-.79z\" style=\"stroke-width:.296239\"/></svg>`,\n  chapters: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"size-6\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0 1 12 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5\" /></svg>`,\n  bibles: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"size-6\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155\" /></svg>`,\n  books: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"size-6\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75Z\" /></svg>`,\n  Book: `<svg xmlns=\"http://www.w3.org/2000/svg\" stroke=\"currentColor\" class=\"w-7 h-7 hover:text-blue-600 dark:hover:text-blue-300\" viewBox=\"0 0 23 13\"><g fill=\"none\" fill-rule=\"evenodd\" stroke-linecap=\"round\" stroke-width=\"1.5\"><path stroke-linejoin=\"round\" d=\"M22 2.7c0-.9-1-1.4-1.7-1l-7 4a1.1 1.1 0 0 0 0 2l7 4a1.1 1.1 0 0 0 1.7-.9V2.7h0Zm-9.7 0c0-.9-1-1.4-1.7-1l-7.1 4a1.1 1.1 0 0 0 0 2l7 4a1.1 1.1 0 0 0 1.8-.9V2.7h0Z\"/><path d=\"M1.5 1v11\"/></g></svg>`,\n  Chapter: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"size-7\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M21 16.811c0 .864-.933 1.406-1.683.977l-7.108-4.061a1.125 1.125 0 0 1 0-1.954l7.108-4.061A1.125 1.125 0 0 1 21 8.689v8.122ZM11.25 16.811c0 .864-.933 1.406-1.683.977l-7.108-4.061a1.125 1.125 0 0 1 0-1.954l7.108-4.061a1.125 1.125 0 0 1 1.683.977v8.122Z\" /></svg>`,\n  Skip: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"size-7 hover:text-blue-600 dark:hover:text-blue-300\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"m18.75 4.5-7.5 7.5 7.5 7.5m-6-15L5.25 12l7.5 7.5\" /></svg>`,\n  play: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" class=\"w-10 h-10 hover:text-blue-400\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M5.3 5.7c0-.9.9-1.4 1.6-1L18.5 11a1.1 1.1 0 0 1 0 2L6.9 19.3a1.1 1.1 0 0 1-1.6-1V5.7z\"/></svg>`,\n  pause: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" class=\"w-10 h-10 hover:text-blue-600 dark:hover:text-blue-300\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M15.8 5.3v13.4M8.2 5.3v13.4\"/></svg>`,\n  volumeIcon: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" class=\"size-5\" viewBox=\"0 0 20 20\"><path d=\"M11 4a1 1 0 0 0-2-1L5 7H3a1 1 0 0 0-1 0 7 7 0 0 0 0 3v3h3l4 4a1 1 0 0 0 2-1V4Zm5 1a1 1 0 0 0-1 1 6 6 0 0 1 0 8 1 1 0 0 0 1 1 7 7 0 0 0 0-10Z\"/><path d=\"M14 7a1 1 0 0 0-1 1 3 3 0 0 1 0 4 1 1 0 0 0 1 1 4 4 0 0 0 0-6Z\"/></svg>`,\n  download: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" class=\"size-5\"><path fill-rule=\"evenodd\" d=\"M2 4.75C2 3.784 2.784 3 3.75 3h4.836c.464 0 .909.184 1.237.513l1.414 1.414a.25.25 0 0 0 .177.073h4.836c.966 0 1.75.784 1.75 1.75v8.5A1.75 1.75 0 0 1 16.25 17H3.75A1.75 1.75 0 0 1 2 15.25V4.75Zm8.75 4a.75.75 0 0 0-1.5 0v2.546l-.943-1.048a.75.75 0 1 0-1.114 1.004l2.25 2.5a.75.75 0 0 0 1.114 0l2.25-2.5a.75.75 0 1 0-1.114-1.004l-.943 1.048V8.75Z\" clip-rule=\"evenodd\" /></svg>`,\n};\n\nexport const mergeIcons = (customIcons = {}) => {\n  const mergedIcons = { ...defaultIcons };\n  for (const key of Object.keys(customIcons)) {\n    mergedIcons[key] = customIcons[key];\n  }\n  return mergedIcons;\n};\n\nconst defaultArt = {};\nexport const mergeArt = (customArt = {}) => {\n  const mergedArt = { ...defaultArt };\n  for (const key of Object.keys(customArt)) {\n    mergedArt[key] = customArt[key];\n  }\n  return mergedArt;\n};\n","const BASE_API_URL = 'https://arc.dbs.org';\nconst BASE_CONTENT_URL = 'https://content.dbs.org';\nconst BASE_DBP_URL = 'https://4.dbt.io/api/bibles';\n\nexport async function loadProviders(player) {\n    const providerFunctions = {\n        hark: harkList,\n        dbp: dbpList,\n    };\n      \n    for (const provider of player.providers) {\n        if (providerFunctions[provider]) {\n          player.bibles = player.bibles.concat(await providerFunctions[provider]());\n        }\n    }\n    for (let i = 0; i < player.bibles.length; i++) {\n        let customTitle = player.titles[player.bibles[i].id];\n        if(customTitle) {\n            player.bibles[i].tt = customTitle.tt;\n            player.bibles[i].tv = customTitle.tv;\n        }\n    }\n}\n\nexport async function harkList(country_id = 'all', provider = 'all') {\n    const bibles = await fetch(`${BASE_CONTENT_URL}/bibles/audio-new/index.json`).then(response => response.json());\n    const output = bibles.map(bible => ({\n        ...bible,\n        tp: \"hark\",\n        dl: (bible.dl) ? `${BASE_CONTENT_URL}/bibles/audio-new/${bible.id}.zip` : \"\"\n    }));\n    if (country_id !== 'all') {\n        output = output.filter(bible => bible.ci === country_id);\n    }\n\n    if (provider !== 'all') {\n        output = output.filter(bible => bible.id.includes(provider));\n    }\n\n    return output;\n}\n\nexport async function harkSelect(id) {\n    const books = {\n        \"01\": \"GEN\", \"02\": \"EXO\", \"03\": \"LEV\", \"04\": \"NUM\", \"05\": \"DEU\", \"06\": \"JOS\",\n        \"07\": \"JDG\", \"08\": \"RUT\", \"09\": \"1SA\", \"10\": \"2SA\", \"11\": \"1KI\", \"12\": \"2KI\",\n        \"13\": \"1CH\", \"14\": \"2CH\", \"15\": \"EZR\", \"16\": \"NEH\", \"17\": \"EST\", \"18\": \"JOB\",\n        \"19\": \"PSA\", \"20\": \"PRO\", \"21\": \"ECC\", \"22\": \"SNG\", \"23\": \"ISA\", \"24\": \"JER\",\n        \"25\": \"LAM\", \"26\": \"EZK\", \"27\": \"DAN\", \"28\": \"HOS\", \"29\": \"JOL\", \"30\": \"AMO\",\n        \"31\": \"OBA\", \"32\": \"JON\", \"33\": \"MIC\", \"34\": \"NAM\", \"35\": \"HAB\", \"36\": \"ZEP\",\n        \"37\": \"HAG\", \"38\": \"ZEC\", \"39\": \"MAL\", \"40\": \"MAT\", \"41\": \"MRK\", \"42\": \"LUK\",\n        \"43\": \"JHN\", \"44\": \"ACT\", \"45\": \"ROM\", \"46\": \"1CO\", \"47\": \"2CO\", \"48\": \"GAL\",\n        \"49\": \"EPH\", \"50\": \"PHP\", \"51\": \"COL\", \"52\": \"1TH\", \"53\": \"2TH\", \"54\": \"1TI\",\n        \"55\": \"2TI\", \"56\": \"TIT\", \"57\": \"PHM\", \"58\": \"HEB\", \"59\": \"JAS\", \"60\": \"1PE\",\n        \"61\": \"2PE\", \"62\": \"1JN\", \"63\": \"2JN\", \"64\": \"3JN\", \"65\": \"JUD\", \"66\": \"REV\"\n    };\n\n    const filenameRequest = await fetch(`${BASE_CONTENT_URL}/bibles/audio-new/${id}/index.txt`);\n    const filenames = await filenameRequest.text();\n    const booksMap = new Map();\n    const filenamePattern = /^(\\d+)_(\\w+)_(\\d+)\\.mp3$/;\n\n    filenames.split('\\n').sort().forEach((filename) => {\n        const match = filename.match(filenamePattern);\n        if (match) {\n            const [, bookNumber, bookName, chapterString] = match;\n            const chapterNumber = parseInt(chapterString, 10);\n            const key = books[bookNumber];\n            if (!booksMap.has(key)) {\n                booksMap.set(key, {\n                    name: bookName,\n                    book_number: bookNumber,\n                    book_id: key,\n                    chapters: []\n                });\n            }\n            booksMap.get(key).chapters.push(chapterNumber);\n        }\n    });\n\n    let timingFiles = [];\n    const response = await fetch(`${BASE_CONTENT_URL}/bibles/audio-new/${id}/timingfiles/_index.txt`);\n    if (response.ok) {\n        timingFiles = (await response.text()).split(\"\\n\");\n    } else {\n        console.warn('timing files could not be found');\n    }\n\n    for (const book of booksMap.values()) {\n        book.chapters.sort((a, b) => a - b);\n    }\n\n    return {\n        bible_id: id,\n        bible_folder: id,\n        timestamps: timingFiles,\n        data: Array.from(booksMap.values())\n    };\n}\n\nexport async function dbpList(country_id) {\n    let initial_path = `https://4.dbt.io/api/bibles?v=4&key=${key}&media=audio`;\n    if (country_id) {\n        initial_path += '&country=' + country_id;\n    }\n    bibles = await fetch(initial_path).then(function (response) {\n        return response.json();\n    });\n    let last_page = bibles.meta.pagination.last_page;\n    let current_page = 1;\n    while (current_page >= last_page) {\n        current_page++;\n        results = await fetch(initial_path + 'page=' + current_page).then(function (response) {\n            return response.json();\n        });\n        bibles.data.concat(results.data);\n    }\n\n    return bibles;\n}\n\nexport async function dbpAudioFileSet(bibleId, filesets) {\n    for (const fileset of filesets) {\n        if (fileset.codec === 'mp3') {\n            current_fileset = fileset.id;\n            break;\n        }\n    }\n\n    let books = await fetch(`https://4.dbt.io/api/bibles/${bibleId}/book?v=4&key=${key}`).then(\n        function (response) {\n            return response.json();\n        }\n    );\n    current_books.data = books['data'];\n    current_books.visible = true\n}\n\nexport async function dbpCurrentChapter(bible, book, chapter) {\n    current_chapter = await fetch(`https://4.dbt.io/api/bibles/filesets/${bible}/${book}/${chapter}?v=4&key=${key}`)\n    .then(function (response) {\n        return response.json();\n    });\n    current_chapter = current_chapter['data'][0].path;\n}\n\nexport async function selectBible(ctx, id) {\n    ctx.query = '';\n    const books = await harkSelect(id);\n    ctx.currentBooks = books;\n    ctx.numeralFormatter = (ctx.currentBible.nm) ? new Intl.NumberFormat(ctx.currentBible.nm) : new Intl.NumberFormat()\n    \n    const selectedBible = ctx.bibles.find(bible => bible.id === ctx.currentBooks.bible_id);\n    ctx.currentBible = selectedBible;\n    const url = new URL(window.location);\n    url.searchParams.set('id', ctx.currentBible.id);\n    await setBookAndChapter(ctx, books.data[0], 1);\n}\n\nasync function setBookAndChapter(ctx, book, chapter) {\n    ctx.currentBook = book;\n    await setCurrentChapter(ctx, book, chapter);\n}\n\nexport async function setCurrentChapter(ctx, book, chapter) {\n\n    ctx.currentBook = book;\n    let safeChapter = chapter;\n\n\n    if (!book?.chapters?.includes(chapter)) {\n        safeChapter = 1;\n    }\n\n    if (ctx.currentType === 'hark') {\n        const padLength = (book.book_number === \"19\") ? 3 : 2;\n\n        ctx.currentChapter = {\n            path: `https://content.dbs.org/bibles/audio-new/${ctx.currentBooks.bible_folder}/${book.book_number}_${book.name}_${safeChapter.toString().padStart(padLength, '0')}.mp3`,\n            title: `${book.name} ${safeChapter}`,\n            number: safeChapter,\n            book_id: book.book_id,\n            timestamps: []\n        };\n        ctx.audio.src = ctx.currentChapter.path\n\n        const url = new URL(window.location);\n        url.searchParams.set('book', book.book_id);\n        url.searchParams.set('c', safeChapter);\n\n        if (Array.isArray(ctx.currentBooks.timestamps) && ctx.currentBooks.timestamps.length > 0) {\n            const timestampRegex = /Verse (\\d+)\t(\\d+:\\d+:\\d+\\.\\d+)/gm;\n            let timestampsText = await fetch(`https://content.dbs.org/bibles/audio-new/${ctx.currentBooks.bible_folder}/timingfiles/${ctx.currentBook.book_id}_${safeChapter.toString().padStart(3, '0')}.txt`).then(function (response) {\n                return response.text();\n            }).catch((error) => {\n                console.error('Error:', error);\n            })\n\n            let verseTimestamps = [];\n            let match;\n            while ((match = timestampRegex.exec(timestampsText)) !== null) {\n                // Extract verse number and timestamp from the regex match\n                const verseNumber = match[1];\n                const timestamp = match[2];\n                verseTimestamps.push(timestamp);\n            }\n\n            //await currentBook = book;\n            ctx.currentChapter.timestamps = verseTimestamps;\n            //ctx.currentChapter.sentiments = verseSentiments\n        }\n    }\n}","export function elem(tag, props = {}) {\n    const el = document.createElement(tag);\n    for (const [key, val] of Object.entries(props)) {\n        if (key === 'style' && typeof val === 'object') {\n            Object.assign(el.style, val);\n        } else {\n            el[key] = val;\n        }\n    }\n    return el;\n}\n\nexport function formatTime(ctx, timeInSeconds) {\n    const minutes = (timeInSeconds / 60) | 0;\n    const seconds = (timeInSeconds % 60) | 0;\n    return `${ctx.numeralFormatter.format(minutes)}:${seconds < 10 ? ctx.numeralFormatter.format(0) : ''}${ctx.numeralFormatter.format(seconds)}`;\n}\n\nexport const parseTimestampToSeconds = (timestampStr) => {\n    const [hours, minutes, seconds] = timestampStr.split(':');\n    return (parseInt(hours, 10) * 3600) + (parseInt(minutes, 10) * 60) + parseFloat(seconds);\n}\n\nHTMLDialogElement.prototype.triggerShow = HTMLDialogElement.prototype.showModal;\nHTMLDialogElement.prototype.showModal = function() {\n    this.triggerShow();\n    this.onclick = event => {\n        let rect = this.getBoundingClientRect();\n        if(event.clientY < rect.top || event.clientY > rect.bottom) return this.close();\n        if(event.clientX < rect.left || event.clientX > rect.right) return this.close();\n    }\n}","import { elem, formatTime } from \"./AudioPlayerHelpers.js\";\n\nexport function createVolumeAndSleepControls(ctx) {\n  const volumeRow = elem(\"div\", { className: ctx.class.volumeRow });\n  const volumeInput = elem(\"input\", {\n    type: \"range\",\n    min: \"0\",\n    max: \"1\",\n    step: \"0.01\",\n    className: ctx.class.volumeInput,\n    id: \"volume-control\",\n    value: ctx.audio.volume,\n    \"aria-label\": \"Volume Control\",\n  });\n\n  volumeInput.addEventListener(\"input\", () => {\n    ctx.audio.volume = parseFloat(volumeInput.value);\n  });\n\n  const volumeLabel = elem(\"label\", {\n    htmlFor: \"volume-control\",\n    className: ctx.class.volumeLabel,\n    innerHTML: ctx.icons.volumeIcon,\n  });\n  volumeLabel.appendChild(volumeInput);\n  volumeRow.appendChild(volumeLabel);\n\n  const sleepTimerButton = createSleepTimer(ctx, volumeInput);\n  volumeRow.appendChild(sleepTimerButton);\n  return volumeRow;\n}\n\nfunction createSleepTimer(ctx, volumeInput) {\n  const sleepTimerButton = elem(\"button\", {\n    className: ctx.class.sleepTimerButton,\n    innerHTML: ctx.icons.sleepTimer,\n    \"aria-label\": \"Sleep Timer\",\n  });\n  let sleepTimer = null;\n  let elapsedTime = 0;\n  const sleepDuration = 1 * 60 * 1000;\n  const sleepTimerDuration = elem(\"span\", {\n    className: ctx.class.sleepTimerDuration,\n    textContent: formatTime(ctx, sleepDuration / 1000),\n    \"aria-live\": \"polite\",\n  });\n  sleepTimerButton.appendChild(sleepTimerDuration);\n  sleepTimerButton.addEventListener(\"click\", () => {\n    if (sleepTimer) {\n      clearInterval(sleepTimer);\n      sleepTimer = null;\n      volumeInput.value = 1;\n      ctx.audio.volume = 1;\n      elapsedTime = 0;\n      updateSleepTimerUI(sleepDuration);\n    } else {\n      elapsedTime = 0;\n      sleepTimer = setInterval(() => {\n        elapsedTime += 1000;\n        const remainingTime = sleepDuration - elapsedTime;\n        const newVolume = remainingTime / sleepDuration;\n\n        volumeInput.value = Math.max(0, newVolume);\n        ctx.audio.volume = parseFloat(volumeInput.value);\n        updateSleepTimerUI(remainingTime);\n\n        if (elapsedTime >= sleepDuration) {\n          clearInterval(sleepTimer);\n          sleepTimer = null;\n          ctx.audio.pause();\n          updateSleepTimerUI(0);\n        }\n      }, 1000);\n    }\n  });\n\n  ctx.audio.addEventListener(\"loadedmetadata\", () => {\n    sleepTimerDuration.textContent = formatTime(ctx, sleepDuration / 1000);\n  });\n\n  function updateSleepTimerUI(remainingTime) {\n    const percentageElapsed = elapsedTime / sleepDuration;\n    const dashArray = 2 * Math.PI * 9;\n    sleepTimerDuration.textContent = formatTime(ctx, remainingTime / 1000);\n    const sleepIcon = sleepTimerButton.querySelector(\"svg circle:nth-child(2)\");\n    if (sleepIcon) {\n      sleepIcon.setAttribute(\n        \"stroke-dashoffset\",\n        (1 - percentageElapsed) * dashArray,\n      );\n    }\n  }\n  return sleepTimerButton;\n}\n","import { setCurrentChapter } from \"./AudioPlayerProviders.js\";\nimport { elem, parseTimestampToSeconds } from './AudioPlayerHelpers.js'\nimport { createBibleBlockButtons } from \"./AudioPlayerNavigation.js\";\n\n\nexport function updateCurrentBibleBlock(ctx, bible) {\n    ctx.bibleBlock.innerHTML = '';\n    ctx.bibleBlock.className = ctx.class.bibleBlock.wrapper;\n    const bibleBlockInfoWrap = createBibleBlockInfoWrap(ctx, bible);\n    const chapterBookSelectWrapper = elem('div', { className: ctx.class.selectBookChapterWrap });\n    chapterBookSelectWrapper.append(createBookSelector(ctx), createChapterSelector(ctx));\n    createVerseSelector(ctx, chapterBookSelectWrapper);\n    bibleBlockInfoWrap.append(createBibleBlockButtons(ctx));\n    ctx.bibleBlock.append(bibleBlockInfoWrap,chapterBookSelectWrapper);\n    updateBookList(ctx);\n}\n\nfunction createBibleBlockInfoWrap(ctx, bible) {\n    const bibleBlockInfoWrap = elem('div', { className: ctx.class.bibleBlock.infoWrap });\n    const bibleBlockLanguageGroup = elem('div', { className: ctx.class.bibleBlock.languageGroup });\n    bibleBlockLanguageGroup.append(\n        elem('div', { className: ctx.class.bibleBlock.iso, innerText: bible.iso }),\n        elem('div', { innerText: bible.cn })\n    );\n    bibleBlockInfoWrap.append(bibleBlockLanguageGroup);\n    const bibleBlockTitleGroup = elem('div', { className: ctx.class.bibleBlock.titleGroup });\n    bibleBlockTitleGroup.appendChild(elem('div', { className: ctx.class.bibleBlock.title, innerText: bible.tt }));\n    if (bible.tv && bible.tv !== bible.tt) {\n        bibleBlockTitleGroup.appendChild(elem('div', { className: ctx.class.bibleBlock.vernacular, innerText: bible.tv }));\n    }\n    bibleBlockInfoWrap.appendChild(bibleBlockTitleGroup);\n    return bibleBlockInfoWrap;\n}\n\nexport function updateBookList(ctx) {\n    const bookListGrid = ctx.bookListGrid;\n    bookListGrid.innerHTML = '';\n    if (ctx.resultsBooks && ctx.resultsBooks.length && ctx.query !== '') {\n        ctx.resultsBooks.forEach(result => {\n            bookListGrid.appendChild(createBookButton(ctx, result.item));\n        });\n    } else if (ctx.currentBooks && ctx.query === '') {\n        if (ctx.currentBooks['data']) {\n            ctx.currentBooks['data'].forEach(book => {\n                bookListGrid.appendChild(createBookButton(ctx, book));\n            });\n        }\n    }\n}\n\nexport function createBookButton(ctx, book) {\n    const button = elem('button', {\n        className: `${book.book_id} ${ctx.class.bookList.button} ${((ctx.currentBook.book_id == book.book_id) ? ctx.class.bookListButtonActive : '')}`,\n        ariaLabel: book.name,\n        onclick: () => handleBookChange(ctx, book.book_id)\n    });\n    button.dataset.bookId = book.book_id;\n    const contentContainer = elem('div');\n    contentContainer.append(\n        elem('h2', { className: ctx.class.bookList.title, textContent: book.name }),\n        elem('h3', { className: ctx.class.bookList.id, textContent: book.book_id })\n    );\n    button.appendChild(contentContainer);\n    return button;\n}\n\nexport function handleBookChange(ctx, bookId, chapter = 1) {\n    const selectedBook = ctx.currentBooks.data.find(book => book.book_id === bookId);\n    if (!selectedBook) return;\n\n    setCurrentChapter(selectedBook, chapter);\n    const url = new URL(window.location);\n    url.searchParams.set('bookId', selectedBook.book_id);\n    window.history.replaceState({}, '', url);\n\n    ctx.query = '';\n    ctx.chapterListContainer.style.display = \"block\";\n    ctx.view = \"chapter\";\n    ctx.currentBook = selectedBook;\n\n    chapterList(ctx);\n    updateCurrentBibleBlock(ctx, ctx.currentBible);\n}\n\nfunction createBookSelector(ctx) {\n    const bookSelect = elem('select', { className: ctx.class.selectBook });\n    if (ctx.currentBooks && ctx.currentBooks.data) {\n        ctx.currentBooks.data.forEach(book => {\n            const option = elem('option', {\n                value: book.book_id,\n                innerText: book.name,\n                selected: (book.book_id === ctx.currentBook.book_id)\n            });\n            bookSelect.appendChild(option);\n        });\n    }\n    bookSelect.addEventListener('change', (event) => {\n        handleBookChange(ctx, event.target.value);\n    });\n    ctx.bookSelect = bookSelect;\n    return bookSelect;\n}\n\nfunction createChapterSelector(ctx) {\n    const chapterSelect = elem('select', { className: ctx.class.selectChapter });\n    if (ctx.currentBook && ctx.currentBook.chapters) {\n        ctx.currentBook.chapters.forEach(chapter => {\n            const option = elem('option', {\n                value: chapter,\n                innerText: ctx.numeralFormatter.format(chapter),\n                selected: (chapter == ctx.currentChapter.number)\n            });\n            chapterSelect.appendChild(option);\n        });\n    }\n    chapterSelect.addEventListener('change', (event) =>\n        handleChapterChange(ctx, ctx.currentBook, parseInt(event.target.value))\n    );\n    ctx.chapterSelect = chapterSelect;\n    return chapterSelect;\n}\n\nfunction createVerseSelector(ctx, chapterBookSelectWrapper) {\n    if (!ctx.currentChapter || !ctx.currentChapter.timestamps || ctx.currentChapter.timestamps.length == 0) return;\n    const verseSelect = elem('select', { className: ctx.class.selectVerse });\n    ctx.currentChapter.timestamps.forEach((timestamp, index) => {\n        const verseNumber = index + 1;\n        const option = elem('option', {\n            value: verseNumber,\n            innerText: ctx.numeralFormatter.format(parseInt(verseNumber))\n        });\n        verseSelect.appendChild(option);\n    });\n    verseSelect.addEventListener('change', (event) => {\n        const selectedVerse = parseInt(event.target.value, 10);\n        const verseIndex = selectedVerse - 1;\n        if (ctx.currentChapter.timestamps && ctx.currentChapter.timestamps[verseIndex]) {\n            const tsStr = ctx.currentChapter.timestamps[verseIndex];\n            const verseTime = parseTimestampToSeconds(tsStr);\n            ctx.audio.currentTime = verseTime;\n        }\n    });\n    const verseColonSeparator = elem('div', {innerText: ':',className: ctx.class.selectVerseSeparator});\n    chapterBookSelectWrapper.append(verseColonSeparator,verseSelect);\n    ctx.verseSelect = verseSelect;\n    addVerseHighlightOnTimeUpdate(ctx);\n}\n\nfunction addVerseHighlightOnTimeUpdate(ctx) {\n    let lastSelectedVerse = null;\n    ctx.audio.addEventListener('timeupdate', () => {\n        const currentTime = ctx.audio.currentTime;\n        const verseTimes = ctx.currentChapter.timestamps;\n        let currentVerseIndex = -1;\n        for (let i = 0; i < verseTimes.length; i++) {\n            if (currentTime >= parseTimestampToSeconds(verseTimes[i])) {\n                currentVerseIndex = i;\n            } else {\n                break;\n            }\n        }\n        if (currentVerseIndex !== -1 && currentVerseIndex !== lastSelectedVerse) {\n            lastSelectedVerse = currentVerseIndex;\n            ctx.verseSelect.value = currentVerseIndex + 1;\n        }\n    });\n}\n\nexport function chapterList(ctx) {\n    ctx.chapterListContainer.innerHTML = '';\n    ctx.bibleListContainer.style.display = 'none';\n    ctx.bookListContainer.style.display = 'none';\n    ctx.chapterListContainer.style.display = 'block';\n\n    const fragment = document.createDocumentFragment();\n    ctx.currentBook.chapters.forEach(chapterNumber => {\n\n        const chapterButton = elem('button', {\n            className: `${ctx.class.chapterButton} ${(ctx.currentChapter.number == chapterNumber) ? ' ' + ctx.class.chapterButtonActive : ''}`,\n            ariaLabel: `Play Chapter ${chapterNumber}`,\n            textContent: ctx.numeralFormatter.format(chapterNumber),\n            onclick: () => handleChapterChange(ctx, ctx.currentBook, chapterNumber)\n        });\n\n        fragment.appendChild(chapterButton)}\n    );\n    ctx.chapterListContainer.appendChild(fragment);\n    if(ctx.currentBook?.book_id) {\n        const bookArt = ctx.art[ctx.currentBook.book_id]?.[0];\n        if (!bookArt) {\n            console.warn(`No art found for book ID: ${ctx.currentBook.book_id}`);\n            return;\n        }\n        const artElement = document.createElement('img');\n        artElement.src = `./img/chars/${bookArt.file}`;\n        artElement.className = bookArt.class;\n        ctx.chapterListContainer.appendChild(artElement);\n    }\n}\n\nexport function handleChapterChange(ctx, book, chapterNumber) {\n    setCurrentChapter(ctx, book, chapterNumber);\n    ctx.chapterSelect.value = chapterNumber\n    ctx.audio.play();\n    const playPauseIcon = document.querySelector(`.icon-play`);\n    playPauseIcon.innerHTML = ctx.audio.paused ? ctx.icons.play : ctx.icons.pause;\n    chapterList(ctx)\n}\n","import { elem } from \"./AudioPlayerHelpers.js\";\n\nexport function createBibleBlockButtons(ctx) {\n    let bibleBlockButtonGroup = elem('div', {\n        id: `${ctx.idPrefix}-bible-block`,\n        className: ctx.class.bibleBlock.buttonGroup });\n    const buttons = [\n        {\n            condition: true,\n            innerHTML: ctx.icons.bibles,\n            className: ctx.class.bibleListNavButton,\n            onclick: () => {ctx.view = 'bible';ctx.render()}\n        },\n        {\n            condition: ctx.view === \"book\",\n            innerHTML: ctx.icons.books,\n            className: ctx.class.bookList.navButton,\n            onclick: () => {ctx.view = 'chapter';ctx.render()}\n        },\n        {\n            condition: ctx.view === \"chapter\",\n            innerHTML: ctx.icons.chapters,\n            className: ctx.class.chapterListNavButton,\n            onclick: () => {ctx.view = 'book';ctx.render()}\n        }\n    ];\n    buttons.forEach(({ condition, innerHTML, className, onclick }) => {\n        if (condition) {\n            bibleBlockButtonGroup.appendChild(elem('button', {\n                innerHTML,\n                className,\n                onclick\n            }));\n        }\n    });\n    return bibleBlockButtonGroup;\n}\n","import { elem } from \"./AudioPlayerHelpers.js\";\nimport { createPlaybackRateControls } from \"./MediaPlaybackRate.js\";\nimport { createVolumeAndSleepControls } from \"./MediaSleepTimer.js\";\nimport {\n  handleChapterChange,\n  handleBookChange,\n} from \"./AudioPlayerChapterList.js\";\nimport { createProgressBar } from \"./MediaProgressBar.js\";\n\nexport function createAudioElement(ctx) {\n  const navRow = elem(\"div\", { className: ctx.class.navRow });\n  navRow.append(\n    createBookNavigationButton(ctx, \"prev\"),\n    createChapterNavigationButton(ctx, \"prev\"),\n    createSkipButton(ctx, \"prev\"),\n    createPlayPauseButton(ctx),\n    createSkipButton(ctx, \"next\"),\n    createChapterNavigationButton(ctx, \"next\"),\n    createBookNavigationButton(ctx, \"next\"),\n  );\n  const controlsContainer = elem(\"div\", {\n    className: ctx.class.controlsContainer,\n  });\n  controlsContainer.append(\n    createProgressBar(ctx),\n    createPlaybackRateControls(ctx),\n    navRow,\n    createVolumeAndSleepControls(ctx),\n  );\n  return controlsContainer;\n}\n\nfunction createPlayPauseButton(ctx) {\n  const playPauseButton = elem(\"button\", {\n    className: ctx.class.playPauseButton,\n    onclick: () => (ctx.audio.paused ? ctx.audio.play() : ctx.audio.pause()),\n  });\n\n  const playIcon = elem(\"span\", {\n    className: ctx.class.playPauseIcon,\n    innerHTML: ctx.icons.play,\n  });\n  playPauseButton.appendChild(playIcon);\n  ctx.audio.addEventListener(\"play\", () => {\n    playIcon.innerHTML = ctx.icons.pause;\n  });\n  ctx.audio.addEventListener(\"pause\", () => {\n    playIcon.innerHTML = ctx.icons.play;\n  });\n  return playPauseButton;\n}\n\nfunction createBookNavigationButton(ctx, dir) {\n  return elem(\"button\", {\n    className: ctx.class[`${dir}BookButton`],\n    innerHTML: ctx.icons[`Book`],\n    onclick: () => {\n      const index = ctx.currentBooks.data.findIndex(\n        (book) => book.book_id === ctx.currentBook.book_id,\n      );\n      const nextIndex = dir === \"prev\" ? index - 1 : index + 1;\n      if (ctx.currentBooks.data[nextIndex]) {\n        handleBookChange(ctx, ctx.currentBooks.data[nextIndex].book_id);\n        handleChapterChange(ctx, ctx.currentBooks.data[nextIndex], 1);\n      }\n    },\n  });\n}\n\nfunction createChapterNavigationButton(ctx, dir) {\n  return elem(\"button\", {\n    className: ctx.class[`${dir}ChapterButton`],\n    innerHTML: ctx.icons[`Chapter`],\n    onclick: () => changeChapter(ctx, dir),\n  });\n}\n\nasync function changeChapter(ctx, dir) {\n  const chapterChange = dir === \"prev\" ? -1 : 1;\n  const targetChapter = ctx.currentChapter.number + chapterChange;\n\n  const inCurrentBook =\n    dir === \"prev\"\n      ? targetChapter > 0\n      : targetChapter < ctx.currentBook.chapters.length + 1;\n  if (inCurrentBook) {\n    handleChapterChange(ctx, ctx.currentBook, targetChapter);\n    return;\n  }\n\n  const currentIndex = ctx.currentBooks.data.findIndex(\n    (book) => book.book_id === ctx.currentBook.book_id,\n  );\n  const targetIndex = currentIndex + chapterChange;\n  const targetBook = ctx.currentBooks.data[targetIndex];\n  if (targetBook) {\n    handleBookChange(ctx, targetBook.book_id);\n    handleChapterChange(ctx, targetBook, 1);\n  }\n}\n\nfunction createSkipButton(ctx, dir) {\n  return elem(\"button\", {\n    id: `${dir}SkipButton`,\n    className: ctx.class[`${dir}SkipButton`],\n    innerHTML: ctx.icons[`Skip`],\n    onclick: () => {\n      ctx.audio.currentTime + (dir == \"next\" ? 15 : -15);\n      ctx.audio.currentTime = Math.min(\n        Math.max(ctx.audio.currentTime, 0),\n        ctx.audio.duration,\n      );\n    },\n  });\n}\n","import {\n  elem,\n  formatTime,\n  parseTimestampToSeconds,\n} from \"./AudioPlayerHelpers.js\";\n\nexport function createProgressBar(ctx) {\n  function seekAudio(event, ctx, progressWrapper) {\n    const rect = progressWrapper.getBoundingClientRect();\n    const clickRatio = (event.clientX - rect.left) / rect.width;\n    ctx.audio.currentTime =\n      Math.max(0, Math.min(clickRatio, 1)) * ctx.audio.duration;\n  }\n\n  const progressContainer = elem(\"div\", {\n    className: ctx.class?.progress?.container,\n  });\n  const currentTimeDisplay = elem(\"div\", {\n    id: \"currentTime\",\n    className: ctx.class?.progress?.currentTimeDisplay,\n    textContent: formatTime(ctx, ctx.audio.currentTime),\n  });\n\n  const progressBarContainer = elem(\"div\", {\n    id: \"progress-barContainer\",\n    className: ctx.class?.progress?.barContainer,\n  });\n  const progressWrapper = elem(\"div\", {\n    id: \"progress-barWrapper\",\n    className: ctx.class?.progress?.barWrapper,\n  });\n  const progressBarInner = elem(\"div\", {\n    id: \"progress-bar\",\n    className: ctx.class?.progress?.barInner,\n    style: { width: \"0%\" },\n  });\n\n  const timestampWrapper = elem(\"div\", {\n    id: \"timestamps-wrapper\",\n    className: ctx.class?.progress?.timestamps,\n  });\n\n  const circleTip = elem(\"div\", {\n    className: ctx.class?.progress?.circleTip,\n    style: { left: \"0%\" },\n  });\n\n  progressWrapper.append(progressBarInner, circleTip);\n  const onMouseMove = (event) => {\n    if (ctx.isDragging) {\n      seekAudio(event, ctx, progressWrapper);\n    }\n  };\n\n  const onMouseUp = () => {\n    if (ctx.isDragging) {\n      ctx.isDragging = false;\n      document.body.style.userSelect = \"\";\n      document.removeEventListener(\"mousemove\", onMouseMove);\n      document.removeEventListener(\"mouseup\", onMouseUp);\n    }\n  };\n\n  progressWrapper.addEventListener(\"mousedown\", () => {\n    ctx.isDragging = true;\n    document.body.style.userSelect = \"none\";\n    document.addEventListener(\"mousemove\", onMouseMove);\n    document.addEventListener(\"mouseup\", onMouseUp);\n  });\n\n  progressWrapper.addEventListener(\"click\", (e) => {\n    seekAudio(e, ctx, progressWrapper);\n  });\n\n  const durationDisplay = elem(\"div\", {\n    id: \"currentDuration\",\n    className: ctx.class?.progress?.durationDisplay,\n    textContent: formatTime(ctx, ctx.audio.duration || 0),\n  });\n\n  ctx.audio.addEventListener(\"timeupdate\", () => {\n    const progressPercent = (ctx.audio.currentTime / ctx.audio.duration) * 100;\n    progressBarInner.style.width = `${progressPercent}%`;\n    circleTip.style.left = `calc(${progressPercent}% - 3px)`;\n    currentTimeDisplay.textContent = formatTime(ctx, ctx.audio.currentTime);\n  });\n\n  ctx.audio.addEventListener(\"loadedmetadata\", () => {\n    timestampWrapper.innerHTML = \"\";\n    currentTime.textContent = formatTime(ctx, ctx.audio.currentTime);\n    durationDisplay.textContent = formatTime(ctx, ctx.audio.duration);\n\n    if (\n      ctx.currentChapter.timestamps &&\n      Array.isArray(ctx.currentChapter.timestamps)\n    ) {\n      const sortedTimestamps = ctx.currentChapter.timestamps\n        .map(parseTimestampToSeconds)\n        .filter((ts) => ts >= 0 && ts <= ctx.audio.duration)\n        .sort((a, b) => a - b);\n      const margin = 0.25;\n\n      for (let i = 0; i < sortedTimestamps.length - 1; i++) {\n        const current = sortedTimestamps[i];\n        const next = sortedTimestamps[i + 1];\n        const gapPercent = ((next - current) / ctx.audio.duration) * 100;\n        const adjustedWidth = Math.max(0, gapPercent - margin);\n        const adjustedLeft = (current / ctx.audio.duration) * 100 + margin / 2;\n        const tickWrapper = elem(\"div\", {\n          className: ctx.class.progress.tickWrapper,\n          style: {\n            position: \"absolute\",\n            left: `${adjustedLeft}%`,\n            width: `${adjustedWidth}%`,\n          },\n        });\n\n        const tick = elem(\"div\", {\n          className: `progress-tick ${ctx?.class?.progress?.tick} w-full h-full`,\n        });\n        tick.addEventListener(\"click\", () => {\n          ctx.audio.currentTime = current;\n        });\n\n        const verseLabel = elem(\"div\", {\n          className: ctx.class.progress.tickLabel,\n        });\n        verseLabel.textContent = `${i + 1}`;\n\n        tickWrapper.appendChild(tick);\n        tickWrapper.appendChild(verseLabel);\n        timestampWrapper.appendChild(tickWrapper);\n      }\n    }\n  });\n\n  progressBarContainer.append(currentTimeDisplay);\n  progressBarContainer.append(progressWrapper);\n  progressBarContainer.append(durationDisplay);\n  progressContainer.append(progressBarContainer, timestampWrapper);\n\n  return progressContainer;\n}\n","import { elem } from \"./AudioPlayerHelpers.js\";\n\nexport function createPlaybackRateControls(ctx) {\n  const MIN_RATE = ctx.options?.playbackRate?.min ?? 0.5;\n  const MAX_RATE = ctx.options?.playbackRate?.max ?? 2.25;\n  const STEP = ctx.options?.playbackRate?.step ?? 0.25;\n\n  const updateButtonState = (button, isDisabled) => {\n    button.className = `${button.baseClassName} ${isDisabled ? ctx.class.playbackRate?.disabled : \"\"}`;\n  };\n\n  const changeRate = (delta) => {\n    ctx.audio.playbackRate = Math.min(\n      MAX_RATE,\n      Math.max(MIN_RATE, ctx.audio.playbackRate + delta),\n    );\n\n    playbackRateElem.textContent = ctx.numeralFormatter.format(\n      ctx.audio.playbackRate,\n    );\n\n    updateButtonState(decrementButton, ctx.audio.playbackRate === MIN_RATE);\n    updateButtonState(incrementButton, ctx.audio.playbackRate === MAX_RATE);\n  };\n\n  const playbackRateWrapperElem = elem(\"div\", {\n    className: ctx.class.playbackRate?.wrapper,\n  });\n\n  const decrementButton = elem(\"button\", {\n    baseClassName: ctx.class.playbackRate?.decrease,\n    className: ctx.class.playbackRate?.decrease,\n    textContent: \"-\",\n    onclick: () => changeRate(-STEP),\n  });\n\n  const playbackRateElem = elem(\"span\", {\n    className: ctx.class.playbackRate?.display,\n    textContent: ctx.numeralFormatter.format(ctx.audio.playbackRate),\n  });\n\n  const incrementButton = elem(\"button\", {\n    baseClassName: ctx.class.playbackRate?.increase,\n    className: ctx.class.playbackRate?.increase,\n    textContent: \"+\",\n    onclick: () => changeRate(STEP),\n  });\n\n  ctx.audio.addEventListener(\"loadedmetadata\", () => {\n    playbackRateElem.textContent = ctx.numeralFormatter.format(\n      ctx.audio.playbackRate,\n    );\n  });\n\n  playbackRateWrapperElem.append(\n    decrementButton,\n    playbackRateElem,\n    incrementButton,\n  );\n  return playbackRateWrapperElem;\n}\n","export function fuzzySearch(query, data, headers) {\n    const queryLower = query.toLowerCase();\n    const baseThreshold = 0.9;\n    const minThreshold = 0.5;\n    const threshold = Math.max(minThreshold, baseThreshold - (queryLower.length > 10 ? 0.15 : queryLower.length * 0.05));\n    \n    return data.reduce((results, item) => {\n        let totalScore = 0;\n        let matches = 0;\n        headers.forEach(header => {\n            if (item[header]) {\n                const itemValue = item[header].toString().toLowerCase();\n                const distance = getLevenshteinDistance(queryLower, itemValue);\n                const score = distance / Math.max(queryLower.length, itemValue.length);\n                if (score <= threshold) {\n                    totalScore += score;\n                    matches++;\n                }\n            }\n        });\n        if (matches > 0) {\n            results.push({item, score: totalScore / matches});\n        }\n        return results;\n    }, []).sort((a, b) => a.score - b.score);\n}\n\nfunction getLevenshteinDistance(a, b) {\n    if (a === b) return 0;\n    const d = Array.from({length: a.length + 1}, (_, i) => i);\n    for (let j = 1; j <= b.length; j++) {\n        let prev = d[0];\n        d[0] = j;\n        for (let i = 1; i <= a.length; i++) {\n            const temp = d[i];\n            d[i] = Math.min(d[i] + 1, d[i-1] + 1, prev + (a[i-1] !== b[j-1]));\n            prev = temp;\n        }\n    }\n    return d[a.length];\n}","import { elem } from './AudioPlayerHelpers.js'\nimport { fuzzySearch } from './AudioPlayerSearch.js';\nimport { selectBible } from  './AudioPlayerProviders.js'\nimport { updateCurrentBibleBlock, updateBookList } from './AudioPlayerChapterList.js';\n\nexport function initBibleList(ctx) {\n    ctx.bibleListContainer.innerHTML = '';\n    const container = elem('div', { className: ctx.class.searchWrapper });\n    const input = elem('input', {\n        type: 'search',\n        placeholder: `Filter (${ctx.bibles.length}) Audio Bibles`,\n        autocomplete: 'off',\n        className: ctx.class.searchInput,\n        oninput: () => {\n            ctx.query = input.value;\n            ctx.results = fuzzySearch(ctx.query, ctx.bibles, ['tt','tv','ln'])\n            updateBibleGrid(ctx);\n        }\n    });\n    input.setAttribute('aria-label', 'Search');\n    container.appendChild(input);\n    ctx.bibleListContainer.appendChild(container);\n    const bibleListGrid = elem('div', { className: ctx.class.bibleListGrid });\n    ctx.bibleListGrid = bibleListGrid;\n    ctx.bibleListContainer.appendChild(bibleListGrid);\n    updateBibleGrid(ctx);\n}\n\nfunction updateBibleGrid(ctx) {\n    const bibleListGrid = ctx.bibleListGrid;\n    bibleListGrid.innerHTML = '';\n    const bibles = ctx.query ? ctx.results.map(result => result.item) : ctx.bibles;\n    const fragment = document.createDocumentFragment();\n    bibles.forEach(bible => fragment.appendChild(createBibleButton(ctx, bible)));\n    bibleListGrid.appendChild(fragment);\n}\n\nfunction createBibleButton(ctx, bible) {\n    const buttonWrap = elem('div', {className: ctx.class.bibleButton.wrapper});\n\n    const button = elem('button', {className: ctx.class.bibleButton.button, onclick: () => handleBibleButtonClick(ctx, bible)});\n    buttonWrap.appendChild(button)\n    button.dataset.testId = bible.id;\n    button.setAttribute('aria-label', bible.tv ?? bible.tt);\n\n    const bibleListButtonLanguage = elem('div', { className: ctx.class.bibleButton.languageWrap });\n    bibleListButtonLanguage.appendChild(elem('h2', { className: ctx.class.bibleButton.language, textContent: bible.ln }));\n    bibleListButtonLanguage.appendChild(elem('small', { className: ctx.class.bibleButton.iso, textContent: bible.iso }));\n\n    const bibleListButtonTitle = elem('div', { className: ctx.class.bibleButton.titleWrap });\n    bibleListButtonTitle.appendChild(elem('h4', { className: ctx.class.bibleButton.title, textContent: bible.tt}));\n\n    if (bible.tt !== bible.tv && bible.tv) {\n        const tv = elem('p', {\n            className: ctx.class.bibleButton.vernacular,\n            textContent: bible.tv\n        });\n        bibleListButtonTitle.appendChild(tv);\n    }\n\n    button.appendChild(bibleListButtonLanguage);\n    button.appendChild(bibleListButtonTitle);\n\n    if(bible.dl) {\n        const downloadButton = elem('button', {\n            className: ctx.class.bibleButton.download,\n            innerHTML: ctx.icons.download,\n            onclick:() => handleBibleDownload(ctx, bible)})\n        buttonWrap.appendChild(downloadButton)\n    }\n\n    return buttonWrap;\n}\n\nexport async function handleBibleDownload(ctx, bible) {\n    try {\n        if (!bible.dl) {\n            console.log(\"Bible object does not contain a valid download URL\");\n            return;\n        }\n        const dialog = elem('dialog', {className: ctx.class.bibleDownloadDialog.wrapper});\n        const message = elem(\"div\", {innerHTML: ctx?.download_text ?? `<div class=\"text-sm max-w-sm\"></div>`});\n        const copyright = elem(\"div\", { innerHTML: `\n            <p class=\"${ctx.class.bibleDownloadDialog.audio_copyright}\">${bible.audio_copyright}</p>\n            <p class=\"${ctx.class.bibleDownloadDialog.text_copyright}\">${bible.text_copyright}</p>`\n        });\n        dialog.append(message, copyright);\n        const downloadButton = elem(\"button\",{className: ctx.class.bibleDownloadDialog.button_download,textContent: `Download ${bible.dl_size ?? ''}`});\n        downloadButton.addEventListener(\"click\", () => {\n            const anchor = document.body.appendChild(elem('a', { href: bible.dl, download: '' }));\n            anchor.click();\n            anchor.remove();\n            dialog.close();\n            dialog.remove();\n        });\n        dialog.appendChild(downloadButton);\n        const cancelButton = elem(\"button\", {className: ctx.class.bibleDownloadDialog.cancel, textContent: \"Cancel\"});\n        cancelButton.addEventListener(\"click\", () => {dialog.close();document.body.removeChild(dialog);});\n        dialog.appendChild(cancelButton);\n        document.body.appendChild(dialog);\n        dialog.showModal();\n      } catch (error) {\n          console.error(\"An error occurred while trying to display the dialog:\", error);\n      }\n}\n\nexport async function handleBibleButtonClick(ctx, bible) {\n\n    if (bible.tp === \"hark\") {\n        ctx.view = \"book\";\n        ctx.currentBible = bible;\n        await selectBible(ctx, bible.id);\n        updateCurrentBibleBlock(ctx, bible);\n        ctx.render();\n        const url = new URL(window.location);\n        url.searchParams.set('bibleId', bible.id);\n        window.history.replaceState({}, '', url);\n    } else if (bible.tp === \"dbl\") {\n        // Handle 'dbl' type if necessary\n    }\n}\n\nexport function initBookList(ctx) {\n    const searchInput = elem('input', {\n        type: 'search',\n        placeholder: ctx.i18n?.filter_books ?? 'Filter Books',\n        className: ctx.class.searchInput,\n        ariaLabel: 'search',\n        autocomplete: 'off',\n        oninput: () => {\n            ctx.query = searchInput.value;\n            console.log(searchInput.value, ctx.currentBooks.data)\n            ctx.resultsBooks = fuzzySearch(ctx.query, ctx.currentBooks.data, ['name'])\n            updateBookList(ctx);\n        }\n    });\n    const searchInputContainer = elem('div', { className: ctx.class.searchInputContainer });\n    searchInputContainer.appendChild(searchInput);\n    ctx.bookListContainer.appendChild(searchInputContainer);\n    ctx.bookListContainer.appendChild((ctx.bookListGrid = elem('div', { className: ctx.class.bookList.grid })));\n    updateBookList(ctx);\n}\n","import { mergeClasses, mergeIcons, mergeArt } from \"./AudioPlayerStyles.js\";\nimport { loadProviders } from \"./AudioPlayerProviders.js\";\nimport { elem } from \"./AudioPlayerHelpers.js\";\nimport { createAudioElement } from \"./AudioPlayerMedia.js\";\nimport { initBibleList, handleBibleButtonClick, initBookList } from \"./AudioPlayerBibleList.js\";\nimport { chapterList, handleBookChange, updateBookList } from \"./AudioPlayerChapterList.js\";\n\nexport default class AudioPlayer {\n  constructor(containerId, options) {\n    this.container = document.getElementById(containerId);\n    this.providers = options.providers ?? [\"hark\"];\n    this.bibles = [];\n    this.currentBible = {};\n    this.currentBooks = [];\n    this.currentBook = {};\n    this.currentChapter = { number: 0 };\n    this.audio = document.createElement(\"audio\");\n    this.currentType = \"hark\";\n    this.isDragging = false;\n    this.class = mergeClasses(options.classes);\n    this.icons = mergeIcons(options.icons);\n    this.art = mergeArt(options.art);\n    this.results = [];\n    this.query = \"\";\n    this.titles = options?.titles ?? [];\n    this.view = \"bible\";\n    this.numeralFormatter = new Intl.NumberFormat()\n    this.idPrefix = options?.idPrefix ?? \"audio-player\";\n    this.views = {\n        bible: {player: \"none\", bibleListContainer: \"block\", bookListContainer: \"none\", chapterListContainer: \"none\"},\n        book: {player: \"block\", bibleListContainer: \"none\", bookListContainer: \"block\", chapterListContainer: \"none\"},\n        chapter: {player: \"block\", bibleListContainer: \"none\", bookListContainer: \"none\", chapterListContainer: \"block\"},\n    };\n  }\n\n  static async create(containerId, options) {\n    const player = new AudioPlayer(containerId, options);\n    await loadProviders(player)\n    player.container.innerHTML = \"\";\n    const idp = player.idPrefix;\n    const playerContainer = elem(\"div\", {id: `${idp}-player-container`,className: player.class.playerContainer});\n    player.bibleListContainer = elem(\"div\", {id: `${idp}-bible-list-container`,className: player.class.bibleListContainer});\n    player.bookListContainer = elem(\"div\", {id: `${idp}-book-list-container`,className: player.class.bookList.container});\n    player.chapterListContainer = elem(\"div\", {id: `${idp}-chapter-list-container`,className: player.class.chapterListContainer});\n    player.bibleBlock = elem(\"div\", {id: `${idp}-bible-block`,className: player.class.bibleBlock.wrapper});\n    player.player = createMediaPlayer(player);\n    player.player.prepend(player.bibleBlock)\n    playerContainer.append(player.audio, player.player);\n    initBookList(player);\n    playerContainer.append(player.bookListContainer,player.chapterListContainer,player.bibleListContainer);\n    player.container.appendChild(playerContainer);\n    this.setDefaultView(player);\n    return player;\n  }\n\n  static async setDefaultView(player) {\n    const url = new URL(window.location);\n    if (url.searchParams.get(\"bibleId\")) {\n      await handleBibleButtonClick(player, player.bibles.find((bible) => bible.id == url.searchParams.get(\"bibleId\")));\n      player.view = \"book\";\n    }\n    if (url.searchParams.get(\"bookId\")) {\n      await handleBookChange(player, url.searchParams.get(\"bookId\"));\n      player.view = \"chapter\";\n    }\n    if (player.view === \"bible\") {\n      initBibleList(player);\n    }\n\n    setView(player)\n  }\n\n  render() {\n    if (this.view === \"bible\") {\n      initBibleList(this);\n    } else if (this.view === \"book\") {\n      updateBookList(this);\n    } else if (this.view === \"chapter\") {\n      chapterList(this);\n    }\n    setView(this)\n  }\n\n  setData(newData) {\n    Object.assign(this, newData);\n  }\n}\n\nfunction setView(player) {\n    const currentView = player.views[player.view] || views.bible;\n    player.player.style.display = currentView.player;\n    player.bibleListContainer.style.display = currentView.bibleListContainer;\n    player.bookListContainer.style.display = currentView.bookListContainer;\n    player.chapterListContainer.style.display = currentView.chapterListContainer;\n}\n\nfunction createMediaPlayer(ctx) {\n  const mediaPlayerWrap = elem(\"div\", {\n    id: \"media-player-wrap\",\n    className: ctx.class.mediaPlayerWrap,\n  });\n\n  const audioElement = createAudioElement(ctx);\n  mediaPlayerWrap.appendChild(audioElement);\n\n  return mediaPlayerWrap;\n}\n"],"names":["defaultClasses","playerHeader","playerContainer","bibleListContainer","chapterListContainer","bibleListGrid","bibleBlock","wrapper","infoWrap","titleGroup","vernacular","title","languageGroup","iso","buttonGroup","container","audio","controlsContainer","navRow","prevBookButton","nextBookButton","prevChapterButton","nextChapterButton","playPauseButton","playPauseIcon","controlRow2","leftControls","playbackRate","display","increase","decrease","disabled","rightControls","playSpeedControl","decrementIcon","incrementIcon","decreaseSpeedButton","increaseSpeedButton","prevSkipButton","nextSkipButton","progress","barContainer","barWrapper","barInner","circleTip","currentTimeDisplay","durationDisplay","timestamps","tick","tickWrapper","tickLabel","mediaPlayerWrap","mediaPlayerHeader","mediaPlayerBody","mediaPlayerNavRow","bibleListNavButton","bookListNavButton","chapterListNavButton","volumeRow","volumeControl","volumeInput","volumeLabel","selectBookChapterWrap","selectBook","selectChapter","selectVerseSeparator","selectVerse","bibleButton","button","languageWrap","language","titleWrap","download","bibleDownloadDialog","button_download","cancel","audio_copyright","text_copyright","sleepTimerButton","sleepTimerDuration","sleepTimerWrap","searchWrapper","searchInput","searchInputContainer","bookList","grid","buttonActive","id","chapterButton","chapterButtonActive","defaultIcons","speedSlow","speedFast","sleepTimer","chapters","bibles","books","Book","Chapter","Skip","play","pause","volumeIcon","defaultArt","BASE_CONTENT_URL","async","harkList","country_id","provider","output","fetch","then","response","json","map","bible","tp","dl","filter","ci","includes","dbpList","initial_path","key","last_page","meta","pagination","current_page","results","data","concat","selectBible","ctx","query","filenameRequest","filenames","text","booksMap","Map","filenamePattern","split","sort","forEach","filename","match","bookNumber","bookName","chapterString","chapterNumber","parseInt","has","set","name","book_number","book_id","get","push","timingFiles","ok","console","warn","book","values","a","b","bible_id","bible_folder","Array","from","harkSelect","currentBooks","numeralFormatter","currentBible","Intl","NumberFormat","nm","selectedBible","find","URL","window","location","searchParams","chapter","currentBook","setCurrentChapter","setBookAndChapter","safeChapter","currentType","padLength","currentChapter","path","toString","padStart","number","src","url","isArray","length","timestampRegex","timestampsText","catch","error","verseTimestamps","exec","timestamp","elem","tag","props","el","document","createElement","val","Object","entries","assign","style","formatTime","timeInSeconds","minutes","seconds","format","parseTimestampToSeconds","timestampStr","hours","parseFloat","createVolumeAndSleepControls","className","class","type","min","max","step","value","volume","addEventListener","htmlFor","innerHTML","icons","appendChild","elapsedTime","sleepDuration","textContent","updateSleepTimerUI","remainingTime","percentageElapsed","dashArray","Math","PI","sleepIcon","querySelector","setAttribute","clearInterval","setInterval","newVolume","createSleepTimer","updateCurrentBibleBlock","bibleBlockInfoWrap","bibleBlockLanguageGroup","append","innerText","cn","bibleBlockTitleGroup","tt","tv","createBibleBlockInfoWrap","chapterBookSelectWrapper","bookSelect","option","selected","event","handleBookChange","target","createBookSelector","chapterSelect","handleChapterChange","createChapterSelector","verseSelect","index","verseNumber","verseIndex","tsStr","verseTime","currentTime","verseColonSeparator","lastSelectedVerse","verseTimes","currentVerseIndex","i","addVerseHighlightOnTimeUpdate","createVerseSelector","bibleBlockButtonGroup","idPrefix","condition","onclick","view","render","navButton","createBibleBlockButtons","updateBookList","bookListGrid","resultsBooks","result","createBookButton","item","bookListButtonActive","ariaLabel","dataset","bookId","contentContainer","selectedBook","history","replaceState","chapterList","bookListContainer","fragment","createDocumentFragment","bookArt","art","artElement","file","paused","createAudioElement","createBookNavigationButton","createChapterNavigationButton","createSkipButton","playIcon","createPlayPauseButton","seekAudio","progressWrapper","rect","getBoundingClientRect","clickRatio","clientX","left","width","duration","progressContainer","progressBarContainer","progressBarInner","timestampWrapper","onMouseMove","isDragging","onMouseUp","body","userSelect","removeEventListener","e","progressPercent","sortedTimestamps","ts","margin","current","gapPercent","adjustedWidth","adjustedLeft","position","verseLabel","createProgressBar","MIN_RATE","options","MAX_RATE","STEP","updateButtonState","isDisabled","baseClassName","changeRate","delta","playbackRateElem","decrementButton","incrementButton","playbackRateWrapperElem","createPlaybackRateControls","dir","findIndex","nextIndex","chapterChange","targetChapter","inCurrentBook","currentIndex","targetIndex","targetBook","changeChapter","fuzzySearch","headers","queryLower","toLowerCase","threshold","reduce","totalScore","matches","header","itemValue","score","d","_","j","prev","temp","getLevenshteinDistance","initBibleList","input","placeholder","autocomplete","oninput","updateBibleGrid","buttonWrap","handleBibleButtonClick","testId","bibleListButtonLanguage","ln","bibleListButtonTitle","downloadButton","log","dialog","message","download_text","copyright","dl_size","anchor","href","click","remove","close","cancelButton","removeChild","showModal","handleBibleDownload","createBibleButton","HTMLDialogElement","prototype","triggerShow","this","clientY","top","bottom","right","AudioPlayer","constructor","containerId","getElementById","providers","customClasses","mergedClasses","keys","startsWith","substring","mergeClasses","classes","customIcons","mergedIcons","mergeIcons","customArt","mergedArt","mergeArt","titles","views","player","create","providerFunctions","hark","dbp","customTitle","loadProviders","idp","audioElement","createMediaPlayer","prepend","i18n","filter_books","initBookList","setDefaultView","setView","setData","newData","currentView"],"mappings":"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"}