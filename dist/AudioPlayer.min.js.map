{"version":3,"file":"AudioPlayer.min.js","sources":["../src/AudioPlayerStyles.js","../src/AudioPlayerProviders.js","../src/AudioPlayerHelpers.js","../src/MediaSleepTimer.js","../src/AudioPlayerChapterList.js","../src/AudioPlayerNavigation.js","../src/AudioPlayerMedia.js","../src/MediaProgressBar.js","../src/MediaPlaybackRate.js","../src/AudioPlayerSearch.js","../src/AudioPlayerBibleList.js","../src/AudioPlayer.js"],"sourcesContent":["const defaultClasses = {\n  playerHeader: '',\n  playerContainer: 'w-full mx-auto max-w-7xl',\n  bibleListContainer: '',\n  chapterListContainer: 'relative w-full max-w-4xl mx-auto',\n  bibleListGrid: 'grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3',\n\n  bibleBlockInfoWrap: 'flex flex-row justify-between gap-4 max-w-md w-full mx-auto bg-stone-100 border border-stone-200 mt-12 p-3',\n  bibleBlock: 'flex flex-col justify-between text-sm text-center md:text-base lg:text-lg font-semibold text-black',\n  bibleBlockTitleGroup: 'flex-shrink truncate',\n  bibleBlockVernacular: 'truncate text-sm mb-1',\n  bibleBlockTitle: 'truncate text-2xl font-semibold',\n  bibleBlockLanguageGroup: '',\n  bibleBlockIso: 'text-sm',\n  bibleBlockButtonGroup: 'flex flex-col justify-between',\n\n  container: 'audio-player-container mx-auto max-w-7xl w-full',\n  audio: '',\n  controlsContainer: 'controls-container flex flex-col',\n  navRow: 'flex flex-row items-center justify-center gap-4 py-4 bg-stone-100 border border-stone-200 w-full max-w-md mx-auto',\n  prevBookButton: 'prev-book-button flex justify-center items-center',\n  prevChapterButton: 'prev-chapter-button flex justify-center items-center',\n  playPauseButton: 'play-pause-button flex justify-center items-center',\n  playPauseIcon: 'icon-play',\n  nextChapterButton: 'next-chapter-button flex justify-center items-center',\n  nextBookButton: 'next-book-button flex justify-center items-center',\n  controlRow2: 'grid grid-cols-5 mb-1',\n  leftControls: 'flex flex-row justify-center items-center col-span-2 space-x-6',\n\n  playbackRate: {\n    wrapper: 'flex mx-auto w-full max-w-md justify-center px-8 py-2 bg-stone-100 text-xs',\n    display: 'mx-1 text-stone-400 text-sm',\n    increase: 'w-6 h-6 border-2 rounded-2xl text-stone-500',\n    decrease: 'w-6 h-6 border-2 rounded-2xl text-stone-500',\n    disabled: 'opacity-50'\n  },\n\n  rightControls: 'flex flex-row justify-center items-center col-span-2 space-x-6',\n  playSpeedControl: 'flex flex-row justify-center items-center text-xs',\n  decrementIcon: 'size-6',\n  incrementIcon: 'size-6',\n  decreaseSpeedButton: 'w-6 h-6 border-2 rounded-2xl hover:border-blue-600 dark:hover:border-white text-stone-500 dark:hover:text-white',\n  increaseSpeedButton: 'w-6 h-6 border-2 rounded-2xl hover:border-blue-600 dark:hover:border-white text-stone-500 dark:hover:text-white',\n  prevSkipButton: 'flex justify-center items-center text-stone-400 hover:text-blue-600 dark:text-white dark:hover:text-blue-400',\n  nextSkipButton: 'flex justify-center items-center text-stone-400 hover:text-blue-600 dark:text-white dark:hover:text-blue-400',\n\n  progress: {\n    container: 'relative flex flex-col mx-auto w-full max-w-md justify-around px-1 pt-4 bg-stone-100 text-xs',\n    barContainer: 'flex flex-row justify-between relative z-10',\n    barWrapper: 'mx-auto min-w-80 mx-3 w-3/4 sm:w-5/6 h-3 rounded-lg relative border bg-gradient-to-br shadow-inner border-stone-300 from-white to-stone-200 dark:from-neutral-50 dark:to-stone-400 border-stone-500',\n    barInner: 'h-3 w-0 bg-blue-600 rounded-md',\n    circleTip: 'absolute top-1/2 transform -translate-y-1/2 -translate-x-1/2 w-5 h-5 bg-blue-600 rounded-full border border-blue-500',\n    currentTimeDisplay: 'text-black',\n    durationDisplay: 'text-black',\n    timestamps: 'flex w-5/6 mx-auto h-8 absolute inset-x-2 z-0 block my-4',\n    tick: 'absolute top-0 h-full',\n    tickWrapper: 'group relative h-full bg-stone-400 rounded-sm',\n    tickLabel: 'verse-label hidden group-hover:block absolute left-1/2 -translate-x-1/2 top-full mt-1 px-2 py-1 text-xs bg-gray-200 text-gray-900 rounded-lg shadow border whitespace-nowrap'\n  },\n  \n  mediaPlayerWrap: 'w-full flex flex-col justify-center',\n  mediaPlayerHeader: '',\n  mediaPlayerBody: '',\n  mediaPlayerNavRow: 'grid grid-cols-5 px-2 text-stone-700 dark:text-stone-300 divide-x divide-stone-500 dark:divide-stone-600',\n  bibleListNavButton: '',\n  bookListNavButton: '',\n  chapterListNavButton: '',\n\n  volumeRow: 'flex mx-auto w-full max-w-md justify-center items-center px-8 bg-stone-100 text-xs',\n  volumeControl: 'volume-control w-full',\n  volumeInput: 'w-full',\n  volumeLabel: 'flex flex-row pl-2 mx-4 w-1/2',\n\n  selectBookChapterWrap: 'relative bg-stone-100 flex flex-row gap-2 w-full max-w-md mx-auto',\n  selectBook: 'inline-flex items-center gap-x-1.5 bg-stone-100 hover:bg-stone-200 px-3 py-2 w-full',\n  selectChapter: 'inline-flex items-center text-center bg-stone-100 w-12 hover:bg-stone-200 border-none appearance-none',\n  selectVerseSeparator: 'inline-flex items-center bg-stone-100',\n  selectVerse: \"inline-flex items-center text-center bg-stone-100 w-12 hover:bg-stone-200 border-none appearance-none\",\n\n  bibleButton: {\n    wrapper: 'relative bg-stone-100 border border-stone-200 rounded min-h-20',\n    button: 'flex flex-row bg-stone-100 h-full w-full hover:bg-stone-200',\n    languageWrap: 'py-1 bg-stone-200 h-full w-24 flex flex-col justify-center items-center',\n    language: 'text-sm font-medium text-stone-900',\n    iso: 'truncate font-mono mt-1 text-sm text-stone-500',\n    titleWrap: 'py-1 h-full w-full flex flex-col justify-center items-center',\n    title: 'line-clamp-2 text-center text-sm font-medium text-stone-900',\n    vernacular: 'text-sm text-stone-500 max-w-64',\n    download: 'absolute text-stone-500 right-0 bottom-0 rounded-tl size-8 flex justify-center items-center bg-stone-200 hover:bg-stone-300'\n  },\n\n  bibleDownloadDialog: {\n    wrapper: 'p-4 shadow-lg text-center',\n    button_download: 'px-5 py-2 mx-1 bg-blue-500 text-white rounded cursor-pointer',\n    cancel: 'px-5 py-2 mx-1 bg-red-600 text-white rounded cursor-pointer',\n    audio_copyright: 'block text-stone-600',\n    text_copyright: 'block text-stone-600 text-sm',\n  },\n\n  sleepTimerButton: 'sleep-timer-button group block py-1.5 px-1',\n  sleepTimerDuration: 'text-xs pl-1 pt-2 inline-block timer-display',\n  sleepTimerWrap: 'flex flex-row justify-center align-start text-stone-400 hover:text-blue-600',\n  searchWrapper: 'mx-auto flex items-center w-1/3 my-3',\n  searchInput: 'px-4 py-2 w-full max-w-7xl mx-auto bg-white border border-stone-200',\n  \n  searchInputContainer: 'flex w-full max-w-xl mx-auto my-4',\n  bookListContainer: 'w-full',\n  bookListGrid: 'grid grid-cols-3 md:grid-cols-4 gap-2',\n  bookListButton: 'bg-stone-100 border rounded md:rounded-lg',\n  bookListButtonActive: 'bg-stone-100 border border-stone-300',\n  bookListTitle: 'font-medium text-sm lg:text-base',\n  bookListId: 'w-full flex justify-end opacity-60 text-sm mr-8',\n  chapterButton: 'bg-stone-100/90 w-12 h-12 m-2 border border-stone-700 rounded text-lg hover:bg-stone-300',\n  chapterButtonActive: 'bg-stone-500 text-stone-100'\n};\n\n/**\n * Merges custom CSS class definitions with a set of default classes. If a key in the custom classes starts\n * with an underscore, it will overwrite the corresponding default class after removing the underscore.\n * Keys without an underscore will simply merge by replacing the existing default with the custom class.\n *\n * @param {Object} customClasses - An object containing custom class definitions. Keys starting with\n *                 an underscore indicate classes that should overwrite default classes.\n * @returns {Object} An object containing the merged classes.\n */\nexport const mergeClasses = (customClasses = {}) => {\n  const mergedClasses = { ...defaultClasses };\n  for (const key of Object.keys(customClasses)) {\n    if (key.startsWith('_')) {\n      mergedClasses[key.substring(1)] = customClasses[key];\n    } else {\n      mergedClasses[key] = customClasses[key];\n    }\n  }\n\n  return mergedClasses;\n};\n\nconst defaultIcons = {\n  speedSlow: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 30\"><path d=\"M4.83 10.06a.67.67 0 1 0 0 1.34.67.67 0 0 0 0-1.34zm.56-2.02c.43 0 .85.09 1.22.28 1.07.55 1.4 1.46 1.64 2.4.3 1.22-.07 1.95.12 2.75.17.77 1.14 3.28 4.6 5.41 3.1 1.92 8.61 2.37 15.01.26.44-.14.87-.08 1 .72a13 13 0 0 0 .76 2.78c.15.36.2.66.1.93-.11.27-.35.43-.63.56-.93.42-1.77.6-2.73.63-.36.01-.65-.15-.84-.38a1.6 1.6 0 0 1-.3-.77c-.1-.65-.16-1.37-.16-2.08 0-.25-.13-.39-.4-.25a10.32 10.32 0 0 1-5.08 1.08 9.96 9.96 0 0 1-4.97-1.46c-.25-.16-.44-.02-.44.21-.02.74.03 1.52.14 2.25.06.4.04.71-.14.94-.17.24-.45.33-.76.38a6.5 6.5 0 0 1-2.88-.16 1.26 1.26 0 0 1-.85-.76 2.01 2.01 0 0 1-.1-.93c.13-1.23.06-2.66.69-3.97.17-.36.18-.54-.34-.62-2.83-.38-6.17-2.19-7.4-3.84a3.03 3.03 0 0 1-.54-1.1c-.07-.33-.05-.68.44-.48.58.24 1.24.21 1.88-.03.3-.12.16-.44-.15-.32-.53.16-1.11.05-1.64-.14-.43-.15-.6-.53-.67-.88-.09-.5.08-1 .33-1.38a4.84 4.84 0 0 1 1.8-1.71c.42-.2.86-.31 1.29-.32Zm9.17 1.25.53 2.31a12.91 12.91 0 0 0-2.73 4.28c-.17.5.28.74.41.4.59-1.49 1.6-3.16 2.67-4.3l3.5 1.42a8.7 8.7 0 0 0-.32 2.66c0 .94.1 1.83.12 2.5.02.41.54.4.52.04-.03-.69-.12-1.6-.12-2.54 0-.98.1-1.95.32-2.57l3.99-.54a13.05 13.05 0 0 1 2.63 4.57c.11.35.59.11.5-.16a13.5 13.5 0 0 0-2.67-4.68l1.84-1.84c1.01.45 2.03 1.6 2.75 2.78.4.66.7 1.33.9 1.86.1.26.14.52.18.77l.2-.08c.5-.2.85.02 1.01.42.21.52-.09.9-.47 1.07-7.3 3.24-13.8 2.76-17.06.75-3.33-2.06-4.2-4.46-4.35-5.07-.1-.42.14-.72.5-.83.43-.13.84.03 1.01.44.24-.62.8-1.65 1.29-2.13a5.37 5.37 0 0 1 2.85-1.53zm4.38-1.24c.5-.02 1.02 0 1.52.06 2 .24 3.86 1.1 4.76 2.48l-1.8 1.84-4.12.56-3.7-1.5-.54-2.37a7.93 7.93 0 0 1 3.88-1.07z\" /></svg>`,\n  speedFast: ``,\n  sleepTimer: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" class=\"w-7 h-7\"><path d=\"M22.97 16.84h-3.25l3.56-3.26c.07-.05.1-.08.1-.14a.43.4 0 0 0-.37-.56h-4.38a.45.41 0 0 0 0 .82h3.29l-3.6 3.25a.43.4 0 0 0-.09.43.43.4 0 0 0 .4.25h4.34a.43.4 0 0 0 0-.79zm-6.44 1.98h-2.45l2.79-2.49a.43.4 0 0 0 .06-.45.43.4 0 0 0-.4-.26h-3.48a.45.41 0 0 0 0 .82h2.48l-2.79 2.5-.06.14a.31.28 0 0 0 0 .28.43.4 0 0 0 .37.28h3.5a.45.41 0 0 0 0-.82zm2.75 3.9h-1.42l1.73-1.55.1-.14v-.28a.43.4 0 0 0-.44-.29h-2.48a.43.4 0 0 0 0 .8h1.43l-1.74 1.55a.43.4 0 0 0-.09.46.43.4 0 0 0 .4.22h2.48a.43.4 0 0 0 0-.79z\" style=\"stroke-width:.296239\"/></svg>`,\n  chapters: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"size-6\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0 1 12 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5\" /></svg>`,\n  bibles: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"size-6\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155\" /></svg>`,\n  books: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"size-6\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75Z\" /></svg>`,\n  prevBook: `<svg xmlns=\"http://www.w3.org/2000/svg\" stroke=\"currentColor\" class=\"w-7 h-7 hover:text-blue-600 dark:hover:text-blue-300\" viewBox=\"0 0 23 13\"><g fill=\"none\" fill-rule=\"evenodd\" stroke-linecap=\"round\" stroke-width=\"1.5\"><path stroke-linejoin=\"round\" d=\"M22 2.7c0-.9-1-1.4-1.7-1l-7 4a1.1 1.1 0 0 0 0 2l7 4a1.1 1.1 0 0 0 1.7-.9V2.7h0Zm-9.7 0c0-.9-1-1.4-1.7-1l-7.1 4a1.1 1.1 0 0 0 0 2l7 4a1.1 1.1 0 0 0 1.8-.9V2.7h0Z\"/><path d=\"M1.5 1v11\"/></g></svg>`,\n  nextBook: `<svg xmlns=\"http://www.w3.org/2000/svg\" stroke=\"currentColor\" class=\"w-7 h-7 hover:text-blue-600 dark:hover:text-blue-300\" viewBox=\"0 0 23 13\"><g fill=\"none\" fill-rule=\"evenodd\" stroke-linecap=\"round\" stroke-width=\"1.5\"><path stroke-linejoin=\"round\" d=\"M1 2.7c0-.9 1-1.4 1.7-1l7 4a1.1 1.1 0 0 1 0 2l-7 4a1.1 1.1 0 0 1-1.7-.9V2.7h0Zm9.7 0c0-.9 1-1.4 1.7-1l7.1 4a1.1 1.1 0 0 1 0 2l-7 4a1.1 1.1 0 0 1-1.8-.9V2.7h0Z\"/><path d=\"M21.5 1v11\"/></g></svg>`,\n  prevChapter: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" class=\"w-7 h-7 hover:text-blue-600 dark:hover:text-blue-300\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M21 16.8c0 .9-1 1.4-1.7 1l-7-4a1.1 1.1 0 0 1 0-2l7-4a1.1 1.1 0 0 1 1.7.9v8.1zm-9.8 0c0 .9-.9 1.4-1.6 1l-7.1-4a1.1 1.1 0 0 1 0-2l7-4a1.1 1.1 0 0 1 1.8.9v8.1z\"/></svg>`,\n  nextChapter: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" class=\"w-7 h-7 hover:text-blue-600 dark:hover:text-blue-300\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M3 8.7c0-.9 1-1.4 1.7-1l7 4a1.1 1.1 0 0 1 0 2l-7 4a1.1 1.1 0 0 1-1.7-.9V8.7zm9.8 0c0-.9.9-1.4 1.6-1l7.1 4a1.1 1.1 0 0 1 0 2l-7 4a1.1 1.1 0 0 1-1.8-.9V8.7z\"/></svg>`,\n  prevSkip: `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"w-7 h-7\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path d=\"M16 1a2 2 0 0 0-1.4.6l-3 3a2 2 0 0 0 0 2.8l3 3a2 2 0 1 0 2.8-2.8L15.8 6l1.6-1.6A2 2 0 0 0 16 1zm8 0a2 2 0 0 0-1.4.6l-3 3a2 2 0 0 0 0 2.8l3 3a2 2 0 0 0 3.2-2.3A16 16 0 0 1 24 40 16 16 0 0 1 8 24a2 2 0 1 0-4 0A20 20 0 1 0 25.7 4 2 2 0 0 0 24 1zm.8 16c-.7 0-1.3.5-1.4 1.2l-.9 4.5a1.5 1.5 0 0 0 1.5 1.8h3.3c1 0 1.7.8 1.7 1.8 0 1.4-1 1.7-2 1.7-1.6 0-2.5-.6-2.6-.7a1.5 1.5 0 0 0-1.8 2.4c.1.1 1.7 1.3 4.4 1.3 3 0 5-2 5-4.8 0-2.6-2.1-4.7-4.8-4.7h-1.4l.3-1.5H30a1.5 1.5 0 1 0 0-3h-5.2zm-6.4 0H18l-3 1a1.5 1.5 0 0 0 1 3l1-.4v8.9a1.5 1.5 0 1 0 3 0v-11a1.5 1.5 0 0 0-1.6-1.5z\" style=\"stroke:none;stroke-width:1;stroke-dasharray:none;stroke-linecap:butt;stroke-dashoffset:0;stroke-linejoin:miter;stroke-miterlimit:4;fill-rule:nonzero;opacity:1\" transform=\"matrix(.5 0 0 .5 1 1.7)\"/></svg>`,\n  nextSkip: `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"w-7 h-7\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path d=\"M24 .5A1.5 1.5 0 0 0 23 3l1 1a20 20 0 1 0 21 19.4 1.5 1.5 0 1 0-3 0A17 17 0 1 1 23.8 7.2l-.9.8a1.5 1.5 0 1 0 2.2 2.2l3.5-3.5c.5-.6.5-1.6 0-2.2L25 1c-.3-.3-.7-.4-1.1-.4zm7 0A1.5 1.5 0 0 0 30 3l2.4 2.4-2.5 2.4a1.5 1.5 0 1 0 2.2 2.2l3.5-3.5c.5-.6.5-1.6 0-2.2L32 1c-.3-.3-.7-.4-1.1-.4zM19.6 17h-.3l-3 1a1.3 1.3 0 0 0 .8 2.4l1.4-.4v9.8a1.3 1.3 0 1 0 2.5 0V18.1a1.2 1.2 0 0 0-1.4-1.2zm6.1 0c-.6 0-1.1.4-1.2 1l-.8 4.8a1.3 1.3 0 0 0 1.2 1.5h3.5a2 2 0 0 1 2 2c0 .8-.1 1.2-.5 1.6a3 3 0 0 1-1.8.5c-1.7 0-3-.8-3-.8a1.3 1.3 0 1 0-1.5 2c.5.3 2 1.3 4.5 1.3a5 5 0 0 0 3.5-1.2 4.6 4.6 0 0 0-3.2-8h-2l.4-2.2h4.5a1.3 1.3 0 1 0 0-2.5h-5.6z\" style=\"stroke:none;stroke-width:1;stroke-dasharray:none;stroke-linecap:butt;stroke-dashoffset:0;stroke-linejoin:miter;stroke-miterlimit:4;fill-rule:nonzero\" transform=\"matrix(.5 0 0 .5 .5 1.8)\"/></svg>`,\n  play: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" class=\"w-10 h-10 hover:text-blue-400\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M5.3 5.7c0-.9.9-1.4 1.6-1L18.5 11a1.1 1.1 0 0 1 0 2L6.9 19.3a1.1 1.1 0 0 1-1.6-1V5.7z\"/></svg>`,\n  pause: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" class=\"w-10 h-10 hover:text-blue-600 dark:hover:text-blue-300\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M15.8 5.3v13.4M8.2 5.3v13.4\"/></svg>`,\n  volumeIcon: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" class=\"size-5\" viewBox=\"0 0 20 20\"><path d=\"M11 4a1 1 0 0 0-2-1L5 7H3a1 1 0 0 0-1 0 7 7 0 0 0 0 3v3h3l4 4a1 1 0 0 0 2-1V4Zm5 1a1 1 0 0 0-1 1 6 6 0 0 1 0 8 1 1 0 0 0 1 1 7 7 0 0 0 0-10Z\"/><path d=\"M14 7a1 1 0 0 0-1 1 3 3 0 0 1 0 4 1 1 0 0 0 1 1 4 4 0 0 0 0-6Z\"/></svg>`,\n  download: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" class=\"size-5\"><path fill-rule=\"evenodd\" d=\"M2 4.75C2 3.784 2.784 3 3.75 3h4.836c.464 0 .909.184 1.237.513l1.414 1.414a.25.25 0 0 0 .177.073h4.836c.966 0 1.75.784 1.75 1.75v8.5A1.75 1.75 0 0 1 16.25 17H3.75A1.75 1.75 0 0 1 2 15.25V4.75Zm8.75 4a.75.75 0 0 0-1.5 0v2.546l-.943-1.048a.75.75 0 1 0-1.114 1.004l2.25 2.5a.75.75 0 0 0 1.114 0l2.25-2.5a.75.75 0 1 0-1.114-1.004l-.943 1.048V8.75Z\" clip-rule=\"evenodd\" /></svg>`\n}\n\nexport const mergeIcons = (customIcons = {}) => {\n  const mergedIcons = { ...defaultIcons };\n  for (const key of Object.keys(customIcons)) {\n    mergedIcons[key] = customIcons[key];\n  }\n  return mergedIcons;\n};\n\nconst defaultArt = {}\nexport const mergeArt = (customArt = {}) => {\n  const mergedArt = { ...defaultArt };\n  for (const key of Object.keys(customArt)) {\n    mergedArt[key] = customArt[key];\n  }\n  return mergedArt;\n};","const BASE_API_URL = 'https://arc.dbs.org';\nconst BASE_CONTENT_URL = 'https://content.dbs.org';\nconst BASE_DBP_URL = 'https://4.dbt.io/api/bibles';\n\nexport async function loadProviders(player) {\n    const providerFunctions = {\n        hark: harkList,\n        dbp: dbpList,\n    };\n      \n    for (const provider of player.providers) {\n        if (providerFunctions[provider]) {\n          player.bibles = player.bibles.concat(await providerFunctions[provider]());\n        }\n    }\n    for (let i = 0; i < player.bibles.length; i++) {\n        let customTitle = player.titles[player.bibles[i].id];\n        if(customTitle) {\n            player.bibles[i].tt = customTitle.tt;\n            player.bibles[i].tv = customTitle.tv;\n        }\n    }\n}\n\nexport async function harkList(country_id = 'all', provider = 'all') {\n    const bibles = await fetch(`${BASE_CONTENT_URL}/bibles/audio-new/index.json`).then(response => response.json());\n    const output = bibles.map(bible => ({\n        ...bible,\n        tp: \"hark\",\n        dl: (bible.dl) ? `${BASE_CONTENT_URL}/bibles/audio-new/${bible.id}.zip` : \"\"\n    }));\n    if (country_id !== 'all') {\n        output = output.filter(bible => bible.ci === country_id);\n    }\n\n    if (provider !== 'all') {\n        output = output.filter(bible => bible.id.includes(provider));\n    }\n\n    return output;\n}\n\nexport async function harkSelect(id) {\n    const books = {\n        \"01\": \"GEN\", \"02\": \"EXO\", \"03\": \"LEV\", \"04\": \"NUM\", \"05\": \"DEU\", \"06\": \"JOS\",\n        \"07\": \"JDG\", \"08\": \"RUT\", \"09\": \"1SA\", \"10\": \"2SA\", \"11\": \"1KI\", \"12\": \"2KI\",\n        \"13\": \"1CH\", \"14\": \"2CH\", \"15\": \"EZR\", \"16\": \"NEH\", \"17\": \"EST\", \"18\": \"JOB\",\n        \"19\": \"PSA\", \"20\": \"PRO\", \"21\": \"ECC\", \"22\": \"SNG\", \"23\": \"ISA\", \"24\": \"JER\",\n        \"25\": \"LAM\", \"26\": \"EZK\", \"27\": \"DAN\", \"28\": \"HOS\", \"29\": \"JOL\", \"30\": \"AMO\",\n        \"31\": \"OBA\", \"32\": \"JON\", \"33\": \"MIC\", \"34\": \"NAM\", \"35\": \"HAB\", \"36\": \"ZEP\",\n        \"37\": \"HAG\", \"38\": \"ZEC\", \"39\": \"MAL\", \"40\": \"MAT\", \"41\": \"MRK\", \"42\": \"LUK\",\n        \"43\": \"JHN\", \"44\": \"ACT\", \"45\": \"ROM\", \"46\": \"1CO\", \"47\": \"2CO\", \"48\": \"GAL\",\n        \"49\": \"EPH\", \"50\": \"PHP\", \"51\": \"COL\", \"52\": \"1TH\", \"53\": \"2TH\", \"54\": \"1TI\",\n        \"55\": \"2TI\", \"56\": \"TIT\", \"57\": \"PHM\", \"58\": \"HEB\", \"59\": \"JAS\", \"60\": \"1PE\",\n        \"61\": \"2PE\", \"62\": \"1JN\", \"63\": \"2JN\", \"64\": \"3JN\", \"65\": \"JUD\", \"66\": \"REV\"\n    };\n\n    const filenameRequest = await fetch(`${BASE_CONTENT_URL}/bibles/audio-new/${id}/index.txt`);\n    const filenames = await filenameRequest.text();\n    const booksMap = new Map();\n    const filenamePattern = /^(\\d+)_(\\w+)_(\\d+)\\.mp3$/;\n\n    filenames.split('\\n').sort().forEach((filename) => {\n        const match = filename.match(filenamePattern);\n        if (match) {\n            const [, bookNumber, bookName, chapterString] = match;\n            const chapterNumber = parseInt(chapterString, 10);\n            const key = books[bookNumber];\n            if (!booksMap.has(key)) {\n                booksMap.set(key, {\n                    name: bookName,\n                    book_number: bookNumber,\n                    book_id: key,\n                    chapters: []\n                });\n            }\n            booksMap.get(key).chapters.push(chapterNumber);\n        }\n    });\n\n    let timingFiles = [];\n    const response = await fetch(`${BASE_CONTENT_URL}/bibles/audio-new/${id}/timingfiles/_index.txt`);\n    if (response.ok) {\n        timingFiles = (await response.text()).split(\"\\n\");\n    } else {\n        console.warn('timing files could not be found');\n    }\n\n    for (const book of booksMap.values()) {\n        book.chapters.sort((a, b) => a - b);\n    }\n\n    return {\n        bible_id: id,\n        bible_folder: id,\n        timestamps: timingFiles,\n        data: Array.from(booksMap.values())\n    };\n}\n\nexport async function dbpList(country_id) {\n    let initial_path = `https://4.dbt.io/api/bibles?v=4&key=${key}&media=audio`;\n    if (country_id) {\n        initial_path += '&country=' + country_id;\n    }\n    bibles = await fetch(initial_path).then(function (response) {\n        return response.json();\n    });\n    let last_page = bibles.meta.pagination.last_page;\n    let current_page = 1;\n    while (current_page >= last_page) {\n        current_page++;\n        results = await fetch(initial_path + 'page=' + current_page).then(function (response) {\n            return response.json();\n        });\n        bibles.data.concat(results.data);\n    }\n\n    return bibles;\n}\n\nexport async function dbpAudioFileSet(bibleId, filesets) {\n    for (const fileset of filesets) {\n        if (fileset.codec === 'mp3') {\n            current_fileset = fileset.id;\n            break;\n        }\n    }\n\n    let books = await fetch(`https://4.dbt.io/api/bibles/${bibleId}/book?v=4&key=${key}`).then(\n        function (response) {\n            return response.json();\n        }\n    );\n    current_books.data = books['data'];\n    current_books.visible = true\n}\n\nexport async function dbpCurrentChapter(bible, book, chapter) {\n    current_chapter = await fetch(`https://4.dbt.io/api/bibles/filesets/${bible}/${book}/${chapter}?v=4&key=${key}`)\n    .then(function (response) {\n        return response.json();\n    });\n    current_chapter = current_chapter['data'][0].path;\n}\n\nexport async function selectBible(ctx, id) {\n    ctx.query = '';\n    const books = await harkSelect(id);\n    ctx.currentBooks = books;\n\n    const selectedBible = ctx.bibles.find(bible => bible.id === ctx.currentBooks.bible_id);\n    ctx.currentBible = selectedBible;\n    const url = new URL(window.location);\n    url.searchParams.set('id', ctx.currentBible.id);\n    await setBookAndChapter(ctx, books.data[0], 1);\n}\n\nasync function setBookAndChapter(ctx, book, chapter) {\n    ctx.currentBook = book;\n    await setCurrentChapter(ctx, book, chapter);\n}\n\nexport async function setCurrentChapter(ctx, book, chapter) {\n\n    ctx.currentBook = book;\n    let safeChapter = chapter;\n\n\n    if (!book?.chapters?.includes(chapter)) {\n        safeChapter = 1;\n    }\n\n    if (ctx.currentType === 'hark') {\n        const padLength = (book.book_number === \"19\") ? 3 : 2;\n\n        ctx.currentChapter = {\n            path: `https://content.dbs.org/bibles/audio-new/${ctx.currentBooks.bible_folder}/${book.book_number}_${book.name}_${safeChapter.toString().padStart(padLength, '0')}.mp3`,\n            title: `${book.name} ${safeChapter}`,\n            number: safeChapter,\n            book_id: book.book_id,\n            timestamps: []\n        };\n        ctx.audio.src = ctx.currentChapter.path\n\n        const url = new URL(window.location);\n        url.searchParams.set('book', book.book_id);\n        url.searchParams.set('c', safeChapter);\n\n        if (Array.isArray(ctx.currentBooks.timestamps) && ctx.currentBooks.timestamps.length > 0) {\n            const timestampRegex = /Verse (\\d+)\t(\\d+:\\d+:\\d+\\.\\d+)/gm;\n            let timestampsText = await fetch(`https://content.dbs.org/bibles/audio-new/${ctx.currentBooks.bible_folder}/timingfiles/${ctx.currentBook.book_id}_${safeChapter.toString().padStart(3, '0')}.txt`).then(function (response) {\n                return response.text();\n            }).catch((error) => {\n                console.error('Error:', error);\n            })\n\n            let verseTimestamps = [];\n            let match;\n            while ((match = timestampRegex.exec(timestampsText)) !== null) {\n                // Extract verse number and timestamp from the regex match\n                const verseNumber = match[1];\n                const timestamp = match[2];\n                verseTimestamps.push(timestamp);\n            }\n\n            //await currentBook = book;\n            ctx.currentChapter.timestamps = verseTimestamps;\n            //ctx.currentChapter.sentiments = verseSentiments\n        }\n    }\n}","export function elem(tag, props = {}) {\n    const el = document.createElement(tag);\n    for (const [key, val] of Object.entries(props)) {\n        if (key === 'style' && typeof val === 'object') {\n            Object.assign(el.style, val);\n        } else {\n            el[key] = val;\n        }\n    }\n    return el;\n}\n\nexport function formatTime(timeInSeconds) {\n    const minutes = (timeInSeconds / 60) | 0;\n    const seconds = (timeInSeconds % 60) | 0;\n    return `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;\n}\n\nexport const parseTimestampToSeconds = (timestampStr) => {\n    const [hours, minutes, seconds] = timestampStr.split(':');\n    return (parseInt(hours, 10) * 3600) + (parseInt(minutes, 10) * 60) + parseFloat(seconds);\n}\n\nHTMLDialogElement.prototype.triggerShow = HTMLDialogElement.prototype.showModal;\nHTMLDialogElement.prototype.showModal = function() {\n    this.triggerShow();\n    this.onclick = event => {\n        let rect = this.getBoundingClientRect();\n        if(event.clientY < rect.top || event.clientY > rect.bottom) return this.close();\n        if(event.clientX < rect.left || event.clientX > rect.right) return this.close();\n    }\n}","import { elem, formatTime } from \"./AudioPlayerHelpers.js\";\n\nexport function createVolumeAndSleepControls(ctx) {\n    const volumeRow = elem('div', { className: ctx.class.volumeRow });\n    const volumeInput = elem('input', {\n        type: 'range',\n        min: '0',\n        max: '1',\n        step: '0.01',\n        className: ctx.class.volumeInput,\n        id: 'volume-control',\n        value: ctx.audio.volume,\n        'aria-label': 'Volume Control'\n    });\n    volumeInput.addEventListener('input', () => {ctx.audio.volume = parseFloat(volumeInput.value)});\n    const volumeLabel = elem('label', {\n        htmlFor: 'volume-control',\n        className: ctx.class.volumeLabel,\n        innerHTML: ctx.icons.volumeIcon\n    });\n    volumeLabel.appendChild(volumeInput);\n    volumeRow.appendChild(volumeLabel);\n\n    const sleepTimerButton = createSleepTimer(ctx, volumeInput);\n    volumeRow.appendChild(sleepTimerButton)\n    return volumeRow;\n}\n\nfunction createSleepTimer(ctx, volumeInput) {\n    const sleepTimerButton = elem('button', {className: ctx.class.sleepTimerButton,innerHTML: ctx.icons.sleepTimer,'aria-label': 'Sleep Timer'});\n    let sleepTimer = null;\n    let elapsedTime = 0;\n    const sleepDuration = 1 * 60 * 1000;\n    const sleepTimerDuration = elem('span', {className: ctx.class.sleepTimerDuration,textContent: formatTime(sleepDuration / 1000),'aria-live': 'polite'});\n    sleepTimerButton.appendChild(sleepTimerDuration);\n    sleepTimerButton.addEventListener('click', () => {\n        if (sleepTimer) {\n            clearInterval(sleepTimer);\n            sleepTimer = null;\n            volumeInput.value = 1;\n            ctx.audio.volume = 1;\n            elapsedTime = 0;\n            updateSleepTimerUI(sleepDuration);\n        } else {\n            elapsedTime = 0;\n            sleepTimer = setInterval(() => {\n                elapsedTime += 1000;\n                const remainingTime = sleepDuration - elapsedTime;\n                const newVolume = remainingTime / sleepDuration;\n\n                volumeInput.value = Math.max(0, newVolume);\n                ctx.audio.volume = parseFloat(volumeInput.value);\n                updateSleepTimerUI(remainingTime);\n\n                if (elapsedTime >= sleepDuration) {\n                    clearInterval(sleepTimer);\n                    sleepTimer = null;\n                    ctx.audio.pause();\n                    updateSleepTimerUI(0);\n                }\n            }, 1000);\n        }\n    });\n\n    function updateSleepTimerUI(remainingTime) {\n        const percentageElapsed = elapsedTime / sleepDuration;\n        const dashArray = 2 * Math.PI * 9;\n        sleepTimerDuration.textContent = formatTime(remainingTime / 1000);\n        const sleepIcon = sleepTimerButton.querySelector('svg circle:nth-child(2)');\n        if (sleepIcon) {\n            sleepIcon.setAttribute('stroke-dashoffset', (1 - percentageElapsed) * dashArray);\n        }\n    }\n    return sleepTimerButton;\n}\n","import { setCurrentChapter } from \"./AudioPlayerProviders.js\";\nimport { elem, parseTimestampToSeconds } from './AudioPlayerHelpers.js'\nimport { createBibleBlockButtons } from \"./AudioPlayerNavigation.js\";\n\n\nexport function updateCurrentBibleBlock(ctx, bible) {\n    ctx.bibleBlock.innerHTML = '';\n    ctx.bibleBlock.className = ctx.class.bibleBlock;\n    const bibleBlockInfoWrap = createBibleBlockInfoWrap(ctx, bible);\n    const chapterBookSelectWrapper = elem('div', { className: ctx.class.selectBookChapterWrap });\n    chapterBookSelectWrapper.append(createBookSelector(ctx), createChapterSelector(ctx));\n    createVerseSelector(ctx, chapterBookSelectWrapper);\n    bibleBlockInfoWrap.append(createBibleBlockButtons(ctx));\n    ctx.bibleBlock.append(bibleBlockInfoWrap,chapterBookSelectWrapper);\n    updateBookList(ctx);\n}\n\nfunction createBibleBlockInfoWrap(ctx, bible) {\n    const bibleBlockInfoWrap = elem('div', { className: ctx.class.bibleBlockInfoWrap });\n    const bibleBlockLanguageGroup = elem('div', { className: ctx.class.bibleBlockLanguageGroup });\n    bibleBlockLanguageGroup.append(\n        elem('div', { className: ctx.class.bibleBlockIso, innerText: bible.iso }),\n        elem('div', { innerText: bible.cn })\n    );\n    bibleBlockInfoWrap.append(bibleBlockLanguageGroup);\n    const bibleBlockTitleGroup = elem('div', { className: ctx.class.bibleBlockTitleGroup });\n    bibleBlockTitleGroup.appendChild(elem('div', { className: ctx.class.bibleBlockTitle, innerText: bible.tt }));\n    if (bible.tv && bible.tv !== bible.tt) {\n        bibleBlockTitleGroup.appendChild(elem('div', { className: ctx.class.bibleBlockVernacular, innerText: bible.tv }));\n    }\n    bibleBlockInfoWrap.appendChild(bibleBlockTitleGroup);\n    return bibleBlockInfoWrap;\n}\n\nexport function updateBookList(ctx) {\n    const bookListGrid = ctx.bookListGrid;\n    bookListGrid.innerHTML = '';\n    if (ctx.resultsBooks && ctx.resultsBooks.length && ctx.query !== '') {\n        ctx.resultsBooks.forEach(result => {\n            bookListGrid.appendChild(createBookButton(ctx, result.item));\n        });\n    } else if (ctx.currentBooks && ctx.query === '') {\n        if (ctx.currentBooks['data']) {\n            ctx.currentBooks['data'].forEach(book => {\n                bookListGrid.appendChild(createBookButton(ctx, book));\n            });\n        }\n    }\n}\n\nexport function createBookButton(ctx, book) {\n    const button = elem('button', {\n        className: `${book.book_id} ${ctx.class.bookListButton} ${((ctx.currentBook.book_id == book.book_id) ? ctx.class.bookListButtonActive : '')}`,\n        ariaLabel: book.name,\n        onclick: () => handleBookChange(ctx, book.book_id)\n    });\n    button.dataset.bookId = book.book_id;\n    const contentContainer = elem('div');\n    contentContainer.append(\n        elem('h2', { className: ctx.class.bookListTitle, textContent: book.name }),\n        elem('h3', { className: ctx.class.bookListId, textContent: book.book_id })\n    );\n    button.appendChild(contentContainer);\n    return button;\n}\n\nexport function handleBookChange(ctx, bookId, chapter = 1) {\n    const selectedBook = ctx.currentBooks.data.find(book => book.book_id === bookId);\n    if (!selectedBook) return;\n\n    setCurrentChapter(selectedBook, chapter);\n    const url = new URL(window.location);\n    url.searchParams.set('bookId', selectedBook.book_id);\n    window.history.replaceState({}, '', url);\n\n    ctx.query = '';\n    ctx.chapterListContainer.style.display = \"block\";\n    ctx.view = \"chapter\";\n    ctx.currentBook = selectedBook;\n\n    chapterList(ctx);\n    updateCurrentBibleBlock(ctx, ctx.currentBible);\n}\n\nfunction createBookSelector(ctx) {\n    const bookSelect = elem('select', { className: ctx.class.selectBook });\n    if (ctx.currentBooks && ctx.currentBooks.data) {\n        ctx.currentBooks.data.forEach(book => {\n            const option = elem('option', {\n                value: book.book_id,\n                innerText: book.name,\n                selected: (book.book_id === ctx.currentBook.book_id)\n            });\n            bookSelect.appendChild(option);\n        });\n    }\n    bookSelect.addEventListener('change', (event) => {\n        handleBookChange(ctx, event.target.value);\n    });\n    ctx.bookSelect = bookSelect;\n    return bookSelect;\n}\n\nfunction createChapterSelector(ctx) {\n    const chapterSelect = elem('select', { className: ctx.class.selectChapter });\n    if (ctx.currentBook && ctx.currentBook.chapters) {\n        ctx.currentBook.chapters.forEach(chapter => {\n            const option = elem('option', {\n                value: chapter,\n                innerText: chapter,\n                selected: (chapter == ctx.currentChapter.number)\n            });\n            chapterSelect.appendChild(option);\n        });\n    }\n    chapterSelect.addEventListener('change', (event) => \n        handleChapterChange(ctx, ctx.currentBook, parseInt(event.target.value))\n    );\n    ctx.chapterSelect = chapterSelect;\n    return chapterSelect;\n}\n\nfunction createVerseSelector(ctx, chapterBookSelectWrapper) {\n    if (!ctx.currentChapter || !ctx.currentChapter.timestamps || ctx.currentChapter.timestamps.length == 0) return; \n    const verseSelect = elem('select', { className: ctx.class.selectVerse });\n    ctx.currentChapter.timestamps.forEach((timestamp, index) => {\n        const verseNumber = index + 1;\n        const option = elem('option', {\n            value: verseNumber,\n            innerText: `${verseNumber}`\n        });\n        verseSelect.appendChild(option);\n    });\n    verseSelect.addEventListener('change', (event) => {\n        const selectedVerse = parseInt(event.target.value, 10);\n        const verseIndex = selectedVerse - 1;\n        if (ctx.currentChapter.timestamps && ctx.currentChapter.timestamps[verseIndex]) {\n            const tsStr = ctx.currentChapter.timestamps[verseIndex];\n            const verseTime = parseTimestampToSeconds(tsStr);\n            ctx.audio.currentTime = verseTime;\n        }\n    });\n    const verseColonSeparator = elem('div', {innerText: ':',className: ctx.class.selectVerseSeparator});\n    chapterBookSelectWrapper.append(verseColonSeparator,verseSelect);\n    ctx.verseSelect = verseSelect;\n    addVerseHighlightOnTimeUpdate(ctx);\n}\n\nfunction addVerseHighlightOnTimeUpdate(ctx) {\n    let lastSelectedVerse = null;\n    ctx.audio.addEventListener('timeupdate', () => {\n        const currentTime = ctx.audio.currentTime;\n        const verseTimes = ctx.currentChapter.timestamps;\n        let currentVerseIndex = -1;\n        for (let i = 0; i < verseTimes.length; i++) {\n            if (currentTime >= parseTimestampToSeconds(verseTimes[i])) {\n                currentVerseIndex = i;\n            } else {\n                break;\n            }\n        }\n        if (currentVerseIndex !== -1 && currentVerseIndex !== lastSelectedVerse) {\n            lastSelectedVerse = currentVerseIndex;\n            ctx.verseSelect.value = currentVerseIndex + 1;\n        }\n    });\n}\n\nexport function chapterList(ctx) {\n    ctx.chapterListContainer.innerHTML = '';\n    ctx.bibleListContainer.style.display = 'none';\n    ctx.bookListContainer.style.display = 'none';\n    ctx.chapterListContainer.style.display = 'block';\n\n    const fragment = document.createDocumentFragment();\n    ctx.currentBook.chapters.forEach(chapterNumber => {\n\n        const chapterButton = elem('button', {\n            className: `${ctx.class.chapterButton} ${(ctx.currentChapter.number == chapterNumber) ? ' ' + ctx.class.chapterButtonActive : ''}`,\n            ariaLabel: `Play Chapter ${chapterNumber}`,\n            textContent: chapterNumber,\n            onclick: () => handleChapterChange(ctx, ctx.currentBook, chapterNumber)\n        });\n\n        fragment.appendChild(chapterButton)}\n    );\n    ctx.chapterListContainer.appendChild(fragment);\n    if(ctx.currentBook?.book_id) {\n        const bookArt = ctx.art[ctx.currentBook.book_id]?.[0];\n        if (!bookArt) {\n            console.warn(`No art found for book ID: ${ctx.currentBook.book_id}`);\n            return;\n        }\n        const artElement = document.createElement('img');\n        artElement.src = `./img/chars/${bookArt.file}`;\n        artElement.className = bookArt.class;\n        ctx.chapterListContainer.appendChild(artElement);\n    }\n}\n\nexport function handleChapterChange(ctx, book, chapterNumber) {\n    setCurrentChapter(ctx, book, chapterNumber);\n    ctx.chapterSelect.value = chapterNumber\n    ctx.audio.play();\n    const playPauseIcon = document.querySelector(`.icon-play`);\n    playPauseIcon.innerHTML = ctx.audio.paused ? ctx.icons.play : ctx.icons.pause;\n    chapterList(ctx)\n}","import { elem } from \"./AudioPlayerHelpers.js\";\n\nexport function createBibleBlockButtons(ctx) {\n    let bibleBlockButtonGroup = elem('div', {\n        id: `${ctx.idPrefix}-bible-block`,\n        className: ctx.class.bibleBlockButtonGroup });\n    const buttons = [\n        {\n            condition: true,\n            innerHTML: ctx.icons.bibles,\n            className: ctx.class.bibleListNavButton,\n            onclick: () => {ctx.view = 'bible';ctx.render()}\n        },\n        {\n            condition: ctx.view === \"book\",\n            innerHTML: ctx.icons.books,\n            className: ctx.class.bookListNavButton,\n            onclick: () => {ctx.view = 'chapter';ctx.render()}\n        },\n        {\n            condition: ctx.view === \"chapter\",\n            innerHTML: ctx.icons.chapters,\n            className: ctx.class.chapterListNavButton,\n            onclick: () => {ctx.view = 'book';ctx.render()}\n        }\n    ];\n    buttons.forEach(({ condition, innerHTML, className, onclick }) => {\n        if (condition) {\n            bibleBlockButtonGroup.appendChild(elem('button', {\n                innerHTML,\n                className,\n                onclick\n            }));\n        }\n    });\n    return bibleBlockButtonGroup;\n}\n","import { elem } from \"./AudioPlayerHelpers.js\";\nimport { createPlaybackRateControls } from './MediaPlaybackRate.js'\nimport { createVolumeAndSleepControls } from './MediaSleepTimer.js'\nimport { handleChapterChange, handleBookChange } from \"./AudioPlayerChapterList.js\";\nimport { createProgressBar } from './MediaProgressBar.js'\n\nexport function createAudioElement(ctx) {\n    const navRow = elem('div', { className: ctx.class.navRow });\n    navRow.append(\n        createBookNavigationButton(ctx, 'prev'),\n        createChapterNavigationButton(ctx, 'prev'),\n        createSkipButton(ctx, 'prev'),\n        createPlayPauseButton(ctx),\n        createSkipButton(ctx, 'next'),\n        createChapterNavigationButton(ctx, 'next'),\n        createBookNavigationButton(ctx, 'next')\n    );\n    const controlsContainer = elem('div', { className: ctx.class.controlsContainer });\n    controlsContainer.append(\n        createProgressBar(ctx),\n        createPlaybackRateControls(ctx),\n        navRow,\n        createVolumeAndSleepControls(ctx)\n    );\n    return controlsContainer;\n}\n\nfunction createPlayPauseButton(ctx) {\n    const playPauseButton = elem('button', {\n        className: ctx.class.playPauseButton,\n        onclick: () => ctx.audio.paused ? ctx.audio.play() : ctx.audio.pause()\n    });\n\n    const playIcon = elem('span', {className: ctx.class.playPauseIcon,innerHTML: ctx.icons.play});\n    playPauseButton.appendChild(playIcon);\n    ctx.audio.addEventListener('play', () => { playIcon.innerHTML = ctx.icons.pause; });\n    ctx.audio.addEventListener('pause', () => { playIcon.innerHTML = ctx.icons.play; });\n    return playPauseButton;\n}\n\n\nfunction createBookNavigationButton(ctx, dir) {\n    return elem('button', {\n        className: ctx.class[`${dir}BookButton`],\n        innerHTML: ctx.icons[`${dir}Book`],\n        onclick: () => {\n            const index = ctx.currentBooks.data.findIndex(book => book.book_id === ctx.currentBook.book_id);\n            const nextIndex = dir === 'prev' ? index - 1 : index + 1;\n            if (ctx.currentBooks.data[nextIndex]) {\n                handleBookChange(ctx, ctx.currentBooks.data[nextIndex].book_id);\n                handleChapterChange(ctx, ctx.currentBooks.data[nextIndex], 1);\n            }\n        }\n    });\n}\n\nfunction createChapterNavigationButton(ctx, dir) {\n    return elem('button', {\n        className: ctx.class[`${dir}ChapterButton`],\n        innerHTML: ctx.icons[`${dir}Chapter`],\n        onclick: () => changeChapter(ctx, dir)\n    });\n}\n\nasync function changeChapter(ctx, dir) {\n    const chapterChange = (dir === 'prev') ? -1 : 1;\n    const targetChapter = ctx.currentChapter.number + chapterChange;\n\n    const inCurrentBook = dir === 'prev' ? (targetChapter > 0) : (targetChapter < ctx.currentBook.chapters.length + 1);\n    if (inCurrentBook) {\n        handleChapterChange(ctx, ctx.currentBook, targetChapter);\n        return\n    }\n\n    const currentIndex = ctx.currentBooks.data.findIndex(book => book.book_id === ctx.currentBook.book_id);\n    const targetIndex = currentIndex + chapterChange;\n    const targetBook = ctx.currentBooks.data[targetIndex];\n    if (targetBook) {\n        handleBookChange(ctx, targetBook.book_id);\n        handleChapterChange(ctx, targetBook, 1);\n    }\n}\n\nfunction createSkipButton(ctx, dir) {\n    return elem('button', {\n        id: `${dir}SkipButton`,\n        className: ctx.class[`${dir}SkipButton`],\n        innerHTML: ctx.icons[`${dir}Skip`],\n        onclick: () => {\n            ctx.audio.currentTime + (dir == \"next\" ? 15 : -15);\n            ctx.audio.currentTime = Math.min(Math.max(ctx.audio.currentTime, 0), ctx.audio.duration);\n        }\n    });\n}","import { elem, formatTime, parseTimestampToSeconds } from \"./AudioPlayerHelpers.js\";\n\nexport function createProgressBar(ctx) {\n    function seekAudio(event, ctx, progressWrapper) {\n        const rect = progressWrapper.getBoundingClientRect();\n        const clickRatio = (event.clientX - rect.left) / rect.width;\n        ctx.audio.currentTime = Math.max(0, Math.min(clickRatio, 1)) * ctx.audio.duration;\n    }\n\n    const progressContainer = elem('div', { className: ctx.class?.progress?.container });\n    const currentTimeDisplay = elem('div', {\n        id: 'currentTime',\n        className: ctx.class?.progress?.currentTimeDisplay,\n        textContent: formatTime(ctx.audio.currentTime)\n    });\n\n    const progressBarContainer = elem('div', { id: 'progress-barContainer', className: ctx.class?.progress?.barContainer });\n    const progressWrapper = elem('div', { id: 'progress-barWrapper', className: ctx.class?.progress?.barWrapper });\n    const progressBarInner = elem('div', { id: 'progress-bar', className: ctx.class?.progress?.barInner, style: { width: '0%' } });\n\n    const timestampWrapper = elem('div', {id: 'timestamps-wrapper', className:ctx.class?.progress?.timestamps})\n\n    const circleTip = elem('div', { \n        className: ctx.class?.progress?.circleTip, \n        style: { left: '0%' } \n    });\n\n    progressWrapper.append(progressBarInner, circleTip);\n    const onMouseMove = (event) => {\n        if (ctx.isDragging) {\n            seekAudio(event, ctx, progressWrapper);\n        }\n    };\n\n    const onMouseUp = () => {\n        if (ctx.isDragging) {\n            ctx.isDragging = false;\n            document.body.style.userSelect = '';\n            document.removeEventListener('mousemove', onMouseMove);\n            document.removeEventListener('mouseup', onMouseUp);\n        }\n    };\n\n    progressWrapper.addEventListener('mousedown', () => {\n        ctx.isDragging = true;\n        document.body.style.userSelect = 'none';\n        document.addEventListener('mousemove', onMouseMove);\n        document.addEventListener('mouseup', onMouseUp);\n    });\n\n    progressWrapper.addEventListener('click', (e) => {\n        seekAudio(e, ctx, progressWrapper);\n    });\n\n    const durationDisplay = elem('div', {\n        className: ctx.class?.progress?.durationDisplay,\n        textContent: formatTime(ctx.audio.duration || 0)\n    });\n\n    ctx.audio.addEventListener('timeupdate', () => {\n        const progressPercent = (ctx.audio.currentTime / ctx.audio.duration) * 100;\n        progressBarInner.style.width = `${progressPercent}%`;\n        circleTip.style.left = `calc(${progressPercent}% - 3px)`;\n        currentTimeDisplay.textContent = formatTime(ctx.audio.currentTime);\n    });\n\n    ctx.audio.addEventListener('loadedmetadata', () => {\n        timestampWrapper.innerHTML = '';\n        durationDisplay.textContent = formatTime(ctx.audio.duration);\n      \n        if (ctx.currentChapter.timestamps && Array.isArray(ctx.currentChapter.timestamps)) {\n          const sortedTimestamps = ctx.currentChapter.timestamps.map(parseTimestampToSeconds).filter(ts => ts >= 0 && ts <= ctx.audio.duration).sort((a, b) => a - b);\n          const margin = .25;\n      \n          for (let i = 0; i < sortedTimestamps.length - 1; i++) {\n            const current = sortedTimestamps[i];\n            const next = sortedTimestamps[i + 1];\n            const gapPercent = ((next - current) / ctx.audio.duration) * 100;\n            const adjustedWidth = Math.max(0, gapPercent - margin);\n            const adjustedLeft = ((current / ctx.audio.duration) * 100) + margin / 2;\n            const tickWrapper = elem('div',{className: ctx.class.progress.tickWrapper,style:{position: 'absolute', left: `${adjustedLeft}%`, width: `${adjustedWidth}%`}});\n      \n            const tick = elem('div', {className: `progress-tick ${ctx?.class?.progress?.tick} w-full h-full`});\n            tick.addEventListener('click', () => {ctx.audio.currentTime = current;});\n      \n            const verseLabel = elem('div', {className: ctx.class.progress.tickLabel});\n            verseLabel.textContent = `${i + 1}`;\n\n            tickWrapper.appendChild(tick);\n            tickWrapper.appendChild(verseLabel);\n            timestampWrapper.appendChild(tickWrapper);\n          }\n        }\n      });\n      \n    \n    \n    progressBarContainer.append(currentTimeDisplay)\n    progressBarContainer.append(progressWrapper)\n    progressBarContainer.append(durationDisplay)\n    progressContainer.append(progressBarContainer, timestampWrapper);\n\n    return progressContainer;\n}\n","import { elem } from \"./AudioPlayerHelpers.js\";\n\nexport function createPlaybackRateControls(ctx) {\n    const MIN_RATE = ctx.options?.playbackRate?.min ?? 0.5;\n    const MAX_RATE = ctx.options?.playbackRate?.max ?? 2.25;\n    const STEP = ctx.options?.playbackRate?.step ?? 0.25;\n\n    const updateButtonState = (button, isDisabled) => {\n        button.className = `${button.baseClassName} ${isDisabled ? ctx.class.playbackRate?.disabled : ''}`;\n    };\n    const changeRate = (delta) => {\n        ctx.audio.playbackRate = Math.min(MAX_RATE, Math.max(MIN_RATE, ctx.audio.playbackRate + delta));\n        playbackRateElem.textContent = ctx.audio.playbackRate.toFixed(2);\n        \n        updateButtonState(decrementButton, ctx.audio.playbackRate === MIN_RATE);\n        updateButtonState(incrementButton, ctx.audio.playbackRate === MAX_RATE);\n    };\n\n    const playbackRateWrapperElem = elem('div', { className: ctx.class.playbackRate?.wrapper });\n    const decrementButton = elem('button', {\n        baseClassName: ctx.class.playbackRate?.decrease,\n        className: ctx.class.playbackRate?.decrease,\n        textContent: '-',\n        onclick: () => changeRate(-STEP),\n    });\n\n    const playbackRateElem = elem('span', {\n        className: ctx.class.playbackRate?.display,\n        textContent: ctx.audio.playbackRate.toFixed(2),\n    });\n    const incrementButton = elem('button', {\n        baseClassName: ctx.class.playbackRate?.increase,\n        className: ctx.class.playbackRate?.increase,\n        textContent: '+',\n        onclick: () => changeRate(STEP),\n    });\n\n    playbackRateWrapperElem.append(decrementButton, playbackRateElem, incrementButton);\n    return playbackRateWrapperElem;\n}\n\n","export function fuzzySearch(query, data, headers) {\n    const queryLower = query.toLowerCase();\n    const baseThreshold = 0.9;\n    const minThreshold = 0.5;\n    const threshold = Math.max(minThreshold, baseThreshold - (queryLower.length > 10 ? 0.15 : queryLower.length * 0.05));\n    \n    return data.reduce((results, item) => {\n        let totalScore = 0;\n        let matches = 0;\n        headers.forEach(header => {\n            if (item[header]) {\n                const itemValue = item[header].toString().toLowerCase();\n                const distance = getLevenshteinDistance(queryLower, itemValue);\n                const score = distance / Math.max(queryLower.length, itemValue.length);\n                if (score <= threshold) {\n                    totalScore += score;\n                    matches++;\n                }\n            }\n        });\n        if (matches > 0) {\n            results.push({item, score: totalScore / matches});\n        }\n        return results;\n    }, []).sort((a, b) => a.score - b.score);\n}\n\nfunction getLevenshteinDistance(a, b) {\n    if (a === b) return 0;\n    const d = Array.from({length: a.length + 1}, (_, i) => i);\n    for (let j = 1; j <= b.length; j++) {\n        let prev = d[0];\n        d[0] = j;\n        for (let i = 1; i <= a.length; i++) {\n            const temp = d[i];\n            d[i] = Math.min(d[i] + 1, d[i-1] + 1, prev + (a[i-1] !== b[j-1]));\n            prev = temp;\n        }\n    }\n    return d[a.length];\n}","import { elem } from './AudioPlayerHelpers.js'\nimport { fuzzySearch } from './AudioPlayerSearch.js';\nimport { selectBible } from  './AudioPlayerProviders.js'\nimport { updateCurrentBibleBlock, updateBookList } from './AudioPlayerChapterList.js';\n\nexport function initBibleList(ctx) {\n    ctx.bibleListContainer.innerHTML = '';\n    const container = elem('div', { className: ctx.class.searchWrapper });\n    const input = elem('input', {\n        type: 'search',\n        placeholder: `Filter (${ctx.bibles.length}) Audio Bibles`,\n        autocomplete: 'off',\n        className: ctx.class.searchInput,\n        oninput: () => {\n            ctx.query = input.value;\n            ctx.results = fuzzySearch(ctx.query, ctx.bibles, ['tt','tv','ln'])\n            updateBibleGrid(ctx);\n        }\n    });\n    input.setAttribute('aria-label', 'Search');\n    container.appendChild(input);\n    ctx.bibleListContainer.appendChild(container);\n    const bibleListGrid = elem('div', { className: ctx.class.bibleListGrid });\n    ctx.bibleListGrid = bibleListGrid;\n    ctx.bibleListContainer.appendChild(bibleListGrid);\n    updateBibleGrid(ctx);\n}\n\nfunction updateBibleGrid(ctx) {\n    const bibleListGrid = ctx.bibleListGrid;\n    bibleListGrid.innerHTML = '';\n    const bibles = ctx.query ? ctx.results.map(result => result.item) : ctx.bibles;\n    const fragment = document.createDocumentFragment();\n    bibles.forEach(bible => fragment.appendChild(createBibleButton(ctx, bible)));\n    bibleListGrid.appendChild(fragment);\n}\n\nfunction createBibleButton(ctx, bible) {\n    const buttonWrap = elem('div', {className: ctx.class.bibleButton.wrapper});\n\n    const button = elem('button', {className: ctx.class.bibleButton.button, onclick: () => handleBibleButtonClick(ctx, bible)});\n    buttonWrap.appendChild(button)\n    button.dataset.testId = bible.id;\n    button.setAttribute('aria-label', bible.tv ?? bible.tt);\n\n    const bibleListButtonLanguage = elem('div', { className: ctx.class.bibleButton.languageWrap });\n    bibleListButtonLanguage.appendChild(elem('h2', { className: ctx.class.bibleButton.language, textContent: bible.ln }));\n    bibleListButtonLanguage.appendChild(elem('small', { className: ctx.class.bibleButton.iso, textContent: bible.iso }));\n    \n    const bibleListButtonTitle = elem('div', { className: ctx.class.bibleButton.titleWrap });\n    bibleListButtonTitle.appendChild(elem('h4', { className: ctx.class.bibleButton.title, textContent: bible.tt}));\n\n    if (bible.tt !== bible.tv && bible.tv) {\n        const tv = elem('p', {\n            className: ctx.class.bibleButton.vernacular,\n            textContent: bible.tv\n        });\n        bibleListButtonTitle.appendChild(tv);\n    }\n\n    button.appendChild(bibleListButtonLanguage);\n    button.appendChild(bibleListButtonTitle);\n\n    if(bible.dl) {\n        const downloadButton = elem('button', {\n            className: ctx.class.bibleButton.download,\n            innerHTML: ctx.icons.download,\n            onclick:() => handleBibleDownload(ctx, bible)})\n        buttonWrap.appendChild(downloadButton)\n    }\n\n    return buttonWrap;\n}\n\nexport async function handleBibleDownload(ctx, bible) {\n    try {\n        if (!bible.dl) {\n            console.log(\"Bible object does not contain a valid download URL\");\n            return;\n        }\n        const dialog = elem('dialog', {className: ctx.class.bibleDownloadDialog.wrapper});\n        const message = elem(\"div\", {innerHTML: ctx?.download_text ?? `<div class=\"text-sm max-w-sm\"></div>`});\n        const copyright = elem(\"div\", { innerHTML: `\n            <p class=\"${ctx.class.bibleDownloadDialog.audio_copyright}\">${bible.audio_copyright}</p>\n            <p class=\"${ctx.class.bibleDownloadDialog.text_copyright}\">${bible.text_copyright}</p>`\n        });\n        dialog.append(message, copyright);\n        const downloadButton = elem(\"button\",{className: ctx.class.bibleDownloadDialog.button_download,textContent: `Download ${bible.dl_size ?? ''}`});\n        downloadButton.addEventListener(\"click\", () => {\n            const anchor = document.body.appendChild(elem('a', { href: bible.dl, download: '' }));\n            anchor.click();\n            anchor.remove();\n            dialog.close();\n            dialog.remove();\n        });\n        dialog.appendChild(downloadButton);\n        const cancelButton = elem(\"button\", {className: ctx.class.bibleDownloadDialog.cancel, textContent: \"Cancel\"});\n        cancelButton.addEventListener(\"click\", () => {dialog.close();document.body.removeChild(dialog);});\n        dialog.appendChild(cancelButton);\n        document.body.appendChild(dialog);\n        dialog.showModal();\n      } catch (error) {\n          console.error(\"An error occurred while trying to display the dialog:\", error);\n      }\n}\n\nexport async function handleBibleButtonClick(ctx, bible) {\n    \n    if (bible.tp === \"hark\") {\n        ctx.view = \"book\";\n        ctx.currentBible = bible;\n        await selectBible(ctx, bible.id);\n        updateCurrentBibleBlock(ctx, bible);\n        ctx.render();\n        const url = new URL(window.location);\n        url.searchParams.set('bibleId', bible.id);\n        window.history.replaceState({}, '', url);\n    } else if (bible.tp === \"dbl\") {\n        // Handle 'dbl' type if necessary\n    }\n}\n\nexport function initBookList(ctx) {\n    const searchInput = elem('input', {\n        type: 'search',\n        placeholder: ctx.i18n?.filter_books ?? 'Filter Books',\n        className: ctx.class.searchInput,\n        ariaLabel: 'search',\n        autocomplete: 'off',\n        oninput: () => {\n            ctx.query = searchInput.value;\n            console.log(searchInput.value, ctx.currentBooks.data)\n            ctx.resultsBooks = fuzzySearch(ctx.query, ctx.currentBooks.data, ['name'])\n            updateBookList(ctx);\n        }\n    });\n    const searchInputContainer = elem('div', { className: ctx.class.searchInputContainer });\n    searchInputContainer.appendChild(searchInput);\n    ctx.bookListContainer.appendChild(searchInputContainer);\n    ctx.bookListContainer.appendChild((ctx.bookListGrid = elem('div', { className: ctx.class.bookListGrid })));\n    updateBookList(ctx);\n}\n\n\n","import { mergeClasses, mergeIcons, mergeArt } from \"./AudioPlayerStyles.js\";\nimport { loadProviders } from \"./AudioPlayerProviders.js\";\nimport { elem } from \"./AudioPlayerHelpers.js\";\nimport { createAudioElement } from \"./AudioPlayerMedia.js\";\nimport { initBibleList, handleBibleButtonClick, initBookList } from \"./AudioPlayerBibleList.js\";\nimport { chapterList, handleBookChange, updateBookList } from \"./AudioPlayerChapterList.js\";\n\nexport default class AudioPlayer {\n  constructor(containerId, options) {\n    this.container = document.getElementById(containerId);\n    this.providers = options.providers ?? [\"hark\"];\n    this.bibles = [];\n    this.currentBible = {};\n    this.currentBooks = [];\n    this.currentBook = {};\n    this.currentChapter = { number: 0 };\n    this.audio = document.createElement(\"audio\");\n    this.currentType = \"hark\";\n    this.isDragging = false;\n    this.class = mergeClasses(options.classes);\n    this.icons = mergeIcons(options.icons);\n    this.art = mergeArt(options.art);\n    this.results = [];\n    this.query = \"\";\n    this.titles = options?.titles ?? [];\n    this.view = \"bible\";\n    this.idPrefix = options?.idPrefix ?? \"audio-player\";\n    this.views = {\n        bible: {player: \"none\", bibleListContainer: \"block\", bookListContainer: \"none\", chapterListContainer: \"none\"},\n        book: {player: \"block\", bibleListContainer: \"none\", bookListContainer: \"block\", chapterListContainer: \"none\"},\n        chapter: {player: \"block\", bibleListContainer: \"none\", bookListContainer: \"none\", chapterListContainer: \"block\"},\n    };\n  }\n\n  static async create(containerId, options) {\n    const player = new AudioPlayer(containerId, options);\n    await loadProviders(player)\n    player.container.innerHTML = \"\";\n    const idp = player.idPrefix;\n    const playerContainer = elem(\"div\", {id: `${idp}-player-container`,className: player.class.playerContainer});\n    player.bibleListContainer = elem(\"div\", {id: `${idp}-bible-list-container`,className: player.class.bibleListContainer});\n    player.bookListContainer = elem(\"div\", {id: `${idp}-book-list-container`,className: player.class.bookListContainer});\n    player.chapterListContainer = elem(\"div\", {id: `${idp}-chapter-list-container`,className: player.class.chapterListContainer});\n    player.bibleBlock = elem(\"div\", {id: `${idp}-bible-block`,className: player.class.bibleBlock});\n    player.player = createMediaPlayer(player);\n    player.player.prepend(player.bibleBlock)\n    playerContainer.append(player.audio, player.player);\n    initBookList(player);\n    playerContainer.append(player.bookListContainer,player.chapterListContainer,player.bibleListContainer);\n    player.container.appendChild(playerContainer);\n    this.setDefaultView(player);\n    return player;\n  }\n\n  static async setDefaultView(player) {\n    const url = new URL(window.location);\n    if (url.searchParams.get(\"bibleId\")) {\n      await handleBibleButtonClick(player, player.bibles.find((bible) => bible.id == url.searchParams.get(\"bibleId\")));\n      player.view = \"book\";\n    }\n    if (url.searchParams.get(\"bookId\")) {\n      await handleBookChange(player, url.searchParams.get(\"bookId\"));\n      player.view = \"chapter\";\n    }\n    if (player.view === \"bible\") {\n      initBibleList(player);\n    }\n\n    setView(player)\n  }\n\n  render() {\n    if (this.view === \"bible\") {\n      initBibleList(this);\n    } else if (this.view === \"book\") {\n      updateBookList(this);\n    } else if (this.view === \"chapter\") {\n      chapterList(this);\n    }\n    setView(this)\n  }\n\n  setData(newData) {\n    Object.assign(this, newData);\n  }\n}\n\nfunction setView(player) {\n    const currentView = player.views[player.view] || views.bible;\n    player.player.style.display = currentView.player;\n    player.bibleListContainer.style.display = currentView.bibleListContainer;\n    player.bookListContainer.style.display = currentView.bookListContainer;\n    player.chapterListContainer.style.display = currentView.chapterListContainer;\n}\n\nfunction createMediaPlayer(ctx) {\n  const mediaPlayerWrap = elem(\"div\", {\n    id: \"media-player-wrap\",\n    className: ctx.class.mediaPlayerWrap,\n  });\n\n  const audioElement = createAudioElement(ctx);\n  mediaPlayerWrap.appendChild(audioElement);\n\n  return mediaPlayerWrap;\n}\n"],"names":["defaultClasses","playerHeader","playerContainer","bibleListContainer","chapterListContainer","bibleListGrid","bibleBlockInfoWrap","bibleBlock","bibleBlockTitleGroup","bibleBlockVernacular","bibleBlockTitle","bibleBlockLanguageGroup","bibleBlockIso","bibleBlockButtonGroup","container","audio","controlsContainer","navRow","prevBookButton","prevChapterButton","playPauseButton","playPauseIcon","nextChapterButton","nextBookButton","controlRow2","leftControls","playbackRate","wrapper","display","increase","decrease","disabled","rightControls","playSpeedControl","decrementIcon","incrementIcon","decreaseSpeedButton","increaseSpeedButton","prevSkipButton","nextSkipButton","progress","barContainer","barWrapper","barInner","circleTip","currentTimeDisplay","durationDisplay","timestamps","tick","tickWrapper","tickLabel","mediaPlayerWrap","mediaPlayerHeader","mediaPlayerBody","mediaPlayerNavRow","bibleListNavButton","bookListNavButton","chapterListNavButton","volumeRow","volumeControl","volumeInput","volumeLabel","selectBookChapterWrap","selectBook","selectChapter","selectVerseSeparator","selectVerse","bibleButton","button","languageWrap","language","iso","titleWrap","title","vernacular","download","bibleDownloadDialog","button_download","cancel","audio_copyright","text_copyright","sleepTimerButton","sleepTimerDuration","sleepTimerWrap","searchWrapper","searchInput","searchInputContainer","bookListContainer","bookListGrid","bookListButton","bookListButtonActive","bookListTitle","bookListId","chapterButton","chapterButtonActive","defaultIcons","speedSlow","speedFast","sleepTimer","chapters","bibles","books","prevBook","nextBook","prevChapter","nextChapter","prevSkip","nextSkip","play","pause","volumeIcon","defaultArt","BASE_CONTENT_URL","async","harkList","country_id","provider","output","fetch","then","response","json","map","bible","tp","dl","id","filter","ci","includes","dbpList","initial_path","key","last_page","meta","pagination","current_page","results","data","concat","selectBible","ctx","query","filenameRequest","filenames","text","booksMap","Map","filenamePattern","split","sort","forEach","filename","match","bookNumber","bookName","chapterString","chapterNumber","parseInt","has","set","name","book_number","book_id","get","push","timingFiles","ok","console","warn","book","values","a","b","bible_id","bible_folder","Array","from","harkSelect","currentBooks","selectedBible","find","currentBible","URL","window","location","searchParams","chapter","currentBook","setCurrentChapter","setBookAndChapter","safeChapter","currentType","padLength","currentChapter","path","toString","padStart","number","src","url","isArray","length","timestampRegex","timestampsText","catch","error","verseTimestamps","exec","timestamp","elem","tag","props","el","document","createElement","val","Object","entries","assign","style","formatTime","timeInSeconds","seconds","parseTimestampToSeconds","timestampStr","hours","minutes","parseFloat","createVolumeAndSleepControls","className","class","type","min","max","step","value","volume","addEventListener","htmlFor","innerHTML","icons","appendChild","elapsedTime","sleepDuration","textContent","updateSleepTimerUI","remainingTime","percentageElapsed","dashArray","Math","PI","sleepIcon","querySelector","setAttribute","clearInterval","setInterval","newVolume","createSleepTimer","updateCurrentBibleBlock","append","innerText","cn","tt","tv","createBibleBlockInfoWrap","chapterBookSelectWrapper","bookSelect","option","selected","event","handleBookChange","target","createBookSelector","chapterSelect","handleChapterChange","createChapterSelector","verseSelect","index","verseNumber","verseIndex","tsStr","verseTime","currentTime","verseColonSeparator","lastSelectedVerse","verseTimes","currentVerseIndex","i","addVerseHighlightOnTimeUpdate","createVerseSelector","idPrefix","condition","onclick","view","render","createBibleBlockButtons","updateBookList","resultsBooks","result","createBookButton","item","ariaLabel","dataset","bookId","contentContainer","selectedBook","history","replaceState","chapterList","fragment","createDocumentFragment","bookArt","art","artElement","file","paused","createAudioElement","createBookNavigationButton","createChapterNavigationButton","createSkipButton","playIcon","createPlayPauseButton","seekAudio","progressWrapper","rect","getBoundingClientRect","clickRatio","clientX","left","width","duration","progressContainer","progressBarContainer","progressBarInner","timestampWrapper","onMouseMove","isDragging","onMouseUp","body","userSelect","removeEventListener","e","progressPercent","sortedTimestamps","ts","margin","current","gapPercent","adjustedWidth","adjustedLeft","position","verseLabel","createProgressBar","MIN_RATE","options","MAX_RATE","STEP","updateButtonState","isDisabled","baseClassName","changeRate","delta","playbackRateElem","toFixed","decrementButton","incrementButton","playbackRateWrapperElem","createPlaybackRateControls","dir","findIndex","nextIndex","chapterChange","targetChapter","inCurrentBook","currentIndex","targetIndex","targetBook","changeChapter","fuzzySearch","headers","queryLower","toLowerCase","threshold","reduce","totalScore","matches","header","itemValue","score","d","_","j","prev","temp","getLevenshteinDistance","initBibleList","input","placeholder","autocomplete","oninput","updateBibleGrid","buttonWrap","handleBibleButtonClick","testId","bibleListButtonLanguage","ln","bibleListButtonTitle","downloadButton","log","dialog","message","download_text","copyright","dl_size","anchor","href","click","remove","close","cancelButton","removeChild","showModal","handleBibleDownload","createBibleButton","HTMLDialogElement","prototype","triggerShow","this","clientY","top","bottom","right","AudioPlayer","constructor","containerId","getElementById","providers","customClasses","mergedClasses","keys","startsWith","substring","mergeClasses","classes","customIcons","mergedIcons","mergeIcons","customArt","mergedArt","mergeArt","titles","views","player","create","providerFunctions","hark","dbp","customTitle","loadProviders","idp","audioElement","createMediaPlayer","prepend","i18n","filter_books","initBookList","setDefaultView","setView","setData","newData","currentView"],"mappings":"AAAA,MAAMA,EAAiB,CACrBC,aAAc,GACdC,gBAAiB,2BACjBC,mBAAoB,GACpBC,qBAAsB,oCACtBC,cAAe,uDAEfC,mBAAoB,6GACpBC,WAAY,qGACZC,qBAAsB,uBACtBC,qBAAsB,wBACtBC,gBAAiB,kCACjBC,wBAAyB,GACzBC,cAAe,UACfC,sBAAuB,gCAEvBC,UAAW,kDACXC,MAAO,GACPC,kBAAmB,mCACnBC,OAAQ,oHACRC,eAAgB,oDAChBC,kBAAmB,uDACnBC,gBAAiB,qDACjBC,cAAe,YACfC,kBAAmB,uDACnBC,eAAgB,oDAChBC,YAAa,wBACbC,aAAc,iEAEdC,aAAc,CACZC,QAAS,6EACTC,QAAS,8BACTC,SAAU,8CACVC,SAAU,8CACVC,SAAU,cAGZC,cAAe,iEACfC,iBAAkB,oDAClBC,cAAe,SACfC,cAAe,SACfC,oBAAqB,kHACrBC,oBAAqB,kHACrBC,eAAgB,+GAChBC,eAAgB,+GAEhBC,SAAU,CACR1B,UAAW,+FACX2B,aAAc,8CACdC,WAAY,sMACZC,SAAU,iCACVC,UAAW,uHACXC,mBAAoB,aACpBC,gBAAiB,aACjBC,WAAY,2DACZC,KAAM,wBACNC,YAAa,gDACbC,UAAW,gLAGbC,gBAAiB,sCACjBC,kBAAmB,GACnBC,gBAAiB,GACjBC,kBAAmB,2GACnBC,mBAAoB,GACpBC,kBAAmB,GACnBC,qBAAsB,GAEtBC,UAAW,qFACXC,cAAe,wBACfC,YAAa,SACbC,YAAa,gCAEbC,sBAAuB,oEACvBC,WAAY,sFACZC,cAAe,wGACfC,qBAAsB,wCACtBC,YAAa,wGAEbC,YAAa,CACXxC,QAAS,iEACTyC,OAAQ,8DACRC,aAAc,0EACdC,SAAU,qCACVC,IAAK,iDACLC,UAAW,+DACXC,MAAO,8DACPC,WAAY,kCACZC,SAAU,+HAGZC,oBAAqB,CACnBjD,QAAS,4BACTkD,gBAAiB,+DACjBC,OAAQ,8DACRC,gBAAiB,uBACjBC,eAAgB,gCAGlBC,iBAAkB,6CAClBC,mBAAoB,+CACpBC,eAAgB,8EAChBC,cAAe,uCACfC,YAAa,sEAEbC,qBAAsB,oCACtBC,kBAAmB,SACnBC,aAAc,wCACdC,eAAgB,4CAChBC,qBAAsB,uCACtBC,cAAe,mCACfC,WAAY,kDACZC,cAAe,2FACfC,oBAAqB,+BAyBjBC,EAAe,CACnBC,UAAW,4lDACXC,UAAW,GACXC,WAAY,8mBACZC,SAAU,y5CACVC,OAAQ,2sBACRC,MAAO,0TACPC,SAAU,kcACVC,SAAU,icACVC,YAAa,8YACbC,YAAa,4YACbC,SAAU,q3BACVC,SAAU,o6BACVC,KAAM,gTACNC,MAAO,+QACPC,WAAY,0UACZnC,SAAU,qfAWNoC,EAAa,CAAE,ECpKfC,EAAmB,0BAuBlBC,eAAeC,EAASC,EAAa,MAAOC,EAAW,OAC1D,MACMC,SADeC,MAAM,GAAGN,iCAAgDO,MAAKC,GAAYA,EAASC,UAClFC,KAAIC,IAAU,IAC7BA,EACHC,GAAI,OACJC,GAAKF,EAAQ,GAAI,GAAGX,sBAAqCW,EAAMG,SAAW,OAU9E,MARmB,QAAfX,IACAE,EAASA,EAAOU,QAAOJ,GAASA,EAAMK,KAAOb,KAGhC,QAAbC,IACAC,EAASA,EAAOU,QAAOJ,GAASA,EAAMG,GAAGG,SAASb,MAG/CC,CACX,CA4DOJ,eAAeiB,EAAQf,GAC1B,IAAIgB,EAAe,uCAAuCC,kBACtDjB,IACAgB,GAAgB,YAAchB,GAElCf,aAAekB,MAAMa,GAAcZ,MAAK,SAAUC,GAC9C,OAAOA,EAASC,MACxB,IACI,IAAIY,EAAYjC,OAAOkC,KAAKC,WAAWF,UACnCG,EAAe,EACnB,KAAOA,GAAgBH,GACnBG,IACAC,cAAgBnB,MAAMa,EAAe,QAAUK,GAAcjB,MAAK,SAAUC,GACxE,OAAOA,EAASC,MAC5B,IACQrB,OAAOsC,KAAKC,OAAOF,QAAQC,MAG/B,OAAOtC,MACX,CA2BOa,eAAe2B,EAAYC,EAAKf,GACnCe,EAAIC,MAAQ,GACZ,MAAMzC,QA1GHY,eAA0Ba,GAC7B,MAAMzB,EAAQ,CACV,KAAM,MAAO,KAAM,MAAO,KAAM,MAAO,KAAM,MAAO,KAAM,MAAO,KAAM,MACvE,KAAM,MAAO,KAAM,MAAO,KAAM,MAAO,GAAM,MAAO,GAAM,MAAO,GAAM,MACvE,GAAM,MAAO,GAAM,MAAO,GAAM,MAAO,GAAM,MAAO,GAAM,MAAO,GAAM,MACvE,GAAM,MAAO,GAAM,MAAO,GAAM,MAAO,GAAM,MAAO,GAAM,MAAO,GAAM,MACvE,GAAM,MAAO,GAAM,MAAO,GAAM,MAAO,GAAM,MAAO,GAAM,MAAO,GAAM,MACvE,GAAM,MAAO,GAAM,MAAO,GAAM,MAAO,GAAM,MAAO,GAAM,MAAO,GAAM,MACvE,GAAM,MAAO,GAAM,MAAO,GAAM,MAAO,GAAM,MAAO,GAAM,MAAO,GAAM,MACvE,GAAM,MAAO,GAAM,MAAO,GAAM,MAAO,GAAM,MAAO,GAAM,MAAO,GAAM,MACvE,GAAM,MAAO,GAAM,MAAO,GAAM,MAAO,GAAM,MAAO,GAAM,MAAO,GAAM,MACvE,GAAM,MAAO,GAAM,MAAO,GAAM,MAAO,GAAM,MAAO,GAAM,MAAO,GAAM,MACvE,GAAM,MAAO,GAAM,MAAO,GAAM,MAAO,GAAM,MAAO,GAAM,MAAO,GAAM,OAGrE0C,QAAwBzB,MAAM,GAAGN,sBAAqCc,eACtEkB,QAAkBD,EAAgBE,OAClCC,EAAW,IAAIC,IACfC,EAAkB,2BAExBJ,EAAUK,MAAM,MAAMC,OAAOC,SAASC,IAClC,MAAMC,EAAQD,EAASC,MAAML,GAC7B,GAAIK,EAAO,CACP,MAAS,CAAAC,EAAYC,EAAUC,GAAiBH,EAC1CI,EAAgBC,SAASF,EAAe,IACxCxB,EAAM/B,EAAMqD,GACbR,EAASa,IAAI3B,IACdc,EAASc,IAAI5B,EAAK,CACd6B,KAAMN,EACNO,YAAaR,EACbS,QAAS/B,EACTjC,SAAU,KAGlB+C,EAASkB,IAAIhC,GAAKjC,SAASkE,KAAKR,EACnC,KAGL,IAAIS,EAAc,GAClB,MAAM9C,QAAiBF,MAAM,GAAGN,sBAAqCc,4BACjEN,EAAS+C,GACTD,SAAqB9C,EAASyB,QAAQI,MAAM,MAE5CmB,QAAQC,KAAK,mCAGjB,IAAK,MAAMC,KAAQxB,EAASyB,SACxBD,EAAKvE,SAASmD,MAAK,CAACsB,EAAGC,IAAMD,EAAIC,IAGrC,MAAO,CACHC,SAAUhD,EACViD,aAAcjD,EACd/E,WAAYuH,EACZ5B,KAAMsC,MAAMC,KAAK/B,EAASyB,UAElC,CAkDwBO,CAAWpD,GAC/Be,EAAIsC,aAAe9E,EAEnB,MAAM+E,EAAgBvC,EAAIzC,OAAOiF,MAAK1D,GAASA,EAAMG,KAAOe,EAAIsC,aAAaL,WAC7EjC,EAAIyC,aAAeF,EACP,IAAIG,IAAIC,OAAOC,UACvBC,aAAa1B,IAAI,KAAMnB,EAAIyC,aAAaxD,UAIhDb,eAAiC4B,EAAK6B,EAAMiB,GACxC9C,EAAI+C,YAAclB,QACZmB,EAAkBhD,EAAK6B,EAAMiB,EACvC,CANUG,CAAkBjD,EAAKxC,EAAMqC,KAAK,GAAI,EAChD,CAOOzB,eAAe4E,EAAkBhD,EAAK6B,EAAMiB,GAE/C9C,EAAI+C,YAAclB,EAClB,IAAIqB,EAAcJ,EAOlB,GAJKjB,GAAMvE,UAAU8B,SAAS0D,KAC1BI,EAAc,GAGM,SAApBlD,EAAImD,YAAwB,CAC5B,MAAMC,EAAkC,OAArBvB,EAAKR,YAAwB,EAAI,EAEpDrB,EAAIqD,eAAiB,CACjBC,KAAM,4CAA4CtD,EAAIsC,aAAaJ,gBAAgBL,EAAKR,eAAeQ,EAAKT,QAAQ8B,EAAYK,WAAWC,SAASJ,EAAW,WAC/JxH,MAAO,GAAGiG,EAAKT,QAAQ8B,IACvBO,OAAQP,EACR5B,QAASO,EAAKP,QACdpH,WAAY,IAEhB8F,EAAI9H,MAAMwL,IAAM1D,EAAIqD,eAAeC,KAEnC,MAAMK,EAAM,IAAIjB,IAAIC,OAAOC,UAI3B,GAHAe,EAAId,aAAa1B,IAAI,OAAQU,EAAKP,SAClCqC,EAAId,aAAa1B,IAAI,IAAK+B,GAEtBf,MAAMyB,QAAQ5D,EAAIsC,aAAapI,aAAe8F,EAAIsC,aAAapI,WAAW2J,OAAS,EAAG,CACtF,MAAMC,EAAiB,mCACvB,IAOIlD,EAPAmD,QAAuBtF,MAAM,4CAA4CuB,EAAIsC,aAAaJ,4BAA4BlC,EAAI+C,YAAYzB,WAAW4B,EAAYK,WAAWC,SAAS,EAAG,YAAY9E,MAAK,SAAUC,GAC/M,OAAOA,EAASyB,MAChC,IAAe4D,OAAOC,IACNtC,QAAQsC,MAAM,SAAUA,EAAM,IAG9BC,EAAkB,GAEtB,KAAyD,QAAjDtD,EAAQkD,EAAeK,KAAKJ,KAA2B,CAEvCnD,EAAM,GAC1B,MAAMwD,EAAYxD,EAAM,GACxBsD,EAAgB1C,KAAK4C,EACxB,CAGDpE,EAAIqD,eAAenJ,WAAagK,CAEnC,CACJ,CACL,CCnNO,SAASG,EAAKC,EAAKC,EAAQ,IAC9B,MAAMC,EAAKC,SAASC,cAAcJ,GAClC,IAAK,MAAO/E,EAAKoF,KAAQC,OAAOC,QAAQN,GACxB,UAARhF,GAAkC,iBAARoF,EAC1BC,OAAOE,OAAON,EAAGO,MAAOJ,GAExBH,EAAGjF,GAAOoF,EAGlB,OAAOH,CACX,CAEO,SAASQ,EAAWC,GACvB,MACMC,EAAWD,EAAgB,GAAM,EACvC,MAAO,GAFUA,EAAgB,GAAM,KAElBC,EAAU,GAAK,IAAM,KAAKA,GACnD,CAEO,MAAMC,EAA2BC,IACpC,MAAOC,EAAOC,EAASJ,GAAWE,EAAa5E,MAAM,KACrD,OAA8B,KAAtBS,SAASoE,EAAO,IAAuC,GAAxBpE,SAASqE,EAAS,IAAYC,WAAWL,EAAQ,EClBrF,SAASM,EAA6BxF,GACzC,MAAMnF,EAAYwJ,EAAK,MAAO,CAAEoB,UAAWzF,EAAI0F,MAAM7K,YAC/CE,EAAcsJ,EAAK,QAAS,CAC9BsB,KAAM,QACNC,IAAK,IACLC,IAAK,IACLC,KAAM,OACNL,UAAWzF,EAAI0F,MAAM3K,YACrBkE,GAAI,iBACJ8G,MAAO/F,EAAI9H,MAAM8N,OACjB,aAAc,mBAElBjL,EAAYkL,iBAAiB,SAAS,KAAOjG,EAAI9H,MAAM8N,OAAST,WAAWxK,EAAYgL,MAAK,IAC5F,MAAM/K,EAAcqJ,EAAK,QAAS,CAC9B6B,QAAS,iBACTT,UAAWzF,EAAI0F,MAAM1K,YACrBmL,UAAWnG,EAAIoG,MAAMnI,aAEzBjD,EAAYqL,YAAYtL,GACxBF,EAAUwL,YAAYrL,GAEtB,MAAMoB,EAKV,SAA0B4D,EAAKjF,GAC3B,MAAMqB,EAAmBiI,EAAK,SAAU,CAACoB,UAAWzF,EAAI0F,MAAMtJ,iBAAiB+J,UAAWnG,EAAIoG,MAAM/I,WAAW,aAAc,gBAC7H,IAAIA,EAAa,KACbiJ,EAAc,EAClB,MAAMC,EAAgB,IAChBlK,EAAqBgI,EAAK,OAAQ,CAACoB,UAAWzF,EAAI0F,MAAMrJ,mBAAmBmK,YAAaxB,EAAWuB,EAAgB,KAAM,YAAa,WA+B5I,SAASE,EAAmBC,GACxB,MAAMC,EAAoBL,EAAcC,EAClCK,EAAY,EAAIC,KAAKC,GAAK,EAChCzK,EAAmBmK,YAAcxB,EAAW0B,EAAgB,KAC5D,MAAMK,EAAY3K,EAAiB4K,cAAc,2BAC7CD,GACAA,EAAUE,aAAa,qBAAsB,EAAIN,GAAqBC,EAE7E,CACD,OAvCAxK,EAAiBiK,YAAYhK,GAC7BD,EAAiB6J,iBAAiB,SAAS,KACnC5I,GACA6J,cAAc7J,GACdA,EAAa,KACbtC,EAAYgL,MAAQ,EACpB/F,EAAI9H,MAAM8N,OAAS,EACnBM,EAAc,EACdG,EAAmBF,KAEnBD,EAAc,EACdjJ,EAAa8J,aAAY,KACrBb,GAAe,IACf,MAAMI,EAAgBH,EAAgBD,EAChCc,EAAYV,EAAgBH,EAElCxL,EAAYgL,MAAQc,KAAKhB,IAAI,EAAGuB,GAChCpH,EAAI9H,MAAM8N,OAAST,WAAWxK,EAAYgL,OAC1CU,EAAmBC,GAEfJ,GAAeC,IACfW,cAAc7J,GACdA,EAAa,KACb2C,EAAI9H,MAAM8F,QACVyI,EAAmB,GACtB,GACF,KACN,IAYErK,CACX,CAnD6BiL,CAAiBrH,EAAKjF,GAE/C,OADAF,EAAUwL,YAAYjK,GACfvB,CACX,CCrBO,SAASyM,EAAwBtH,EAAKlB,GACzCkB,EAAItI,WAAWyO,UAAY,GAC3BnG,EAAItI,WAAW+N,UAAYzF,EAAI0F,MAAMhO,WACrC,MAAMD,EASV,SAAkCuI,EAAKlB,GACnC,MAAMrH,EAAqB4M,EAAK,MAAO,CAAEoB,UAAWzF,EAAI0F,MAAMjO,qBACxDK,EAA0BuM,EAAK,MAAO,CAAEoB,UAAWzF,EAAI0F,MAAM5N,0BACnEA,EAAwByP,OACpBlD,EAAK,MAAO,CAAEoB,UAAWzF,EAAI0F,MAAM3N,cAAeyP,UAAW1I,EAAMpD,MACnE2I,EAAK,MAAO,CAAEmD,UAAW1I,EAAM2I,MAEnChQ,EAAmB8P,OAAOzP,GAC1B,MAAMH,EAAuB0M,EAAK,MAAO,CAAEoB,UAAWzF,EAAI0F,MAAM/N,uBAChEA,EAAqB0O,YAAYhC,EAAK,MAAO,CAAEoB,UAAWzF,EAAI0F,MAAM7N,gBAAiB2P,UAAW1I,EAAM4I,MAClG5I,EAAM6I,IAAM7I,EAAM6I,KAAO7I,EAAM4I,IAC/B/P,EAAqB0O,YAAYhC,EAAK,MAAO,CAAEoB,UAAWzF,EAAI0F,MAAM9N,qBAAsB4P,UAAW1I,EAAM6I,MAG/G,OADAlQ,EAAmB4O,YAAY1O,GACxBF,CACX,CAxB+BmQ,CAAyB5H,EAAKlB,GACnD+I,EAA2BxD,EAAK,MAAO,CAAEoB,UAAWzF,EAAI0F,MAAMzK,wBACpE4M,EAAyBN,OA0E7B,SAA4BvH,GACxB,MAAM8H,EAAazD,EAAK,SAAU,CAAEoB,UAAWzF,EAAI0F,MAAMxK,aACrD8E,EAAIsC,cAAgBtC,EAAIsC,aAAazC,MACrCG,EAAIsC,aAAazC,KAAKa,SAAQmB,IAC1B,MAAMkG,EAAS1D,EAAK,SAAU,CAC1B0B,MAAOlE,EAAKP,QACZkG,UAAW3F,EAAKT,KAChB4G,SAAWnG,EAAKP,UAAYtB,EAAI+C,YAAYzB,UAEhDwG,EAAWzB,YAAY0B,EAAO,IAOtC,OAJAD,EAAW7B,iBAAiB,UAAWgC,IACnCC,EAAiBlI,EAAKiI,EAAME,OAAOpC,MAAM,IAE7C/F,EAAI8H,WAAaA,EACVA,CACX,CA3FoCM,CAAmBpI,GA6FvD,SAA+BA,GAC3B,MAAMqI,EAAgBhE,EAAK,SAAU,CAAEoB,UAAWzF,EAAI0F,MAAMvK,gBACxD6E,EAAI+C,aAAe/C,EAAI+C,YAAYzF,UACnC0C,EAAI+C,YAAYzF,SAASoD,SAAQoC,IAC7B,MAAMiF,EAAS1D,EAAK,SAAU,CAC1B0B,MAAOjD,EACP0E,UAAW1E,EACXkF,SAAWlF,GAAW9C,EAAIqD,eAAeI,SAE7C4E,EAAchC,YAAY0B,EAAO,IAOzC,OAJAM,EAAcpC,iBAAiB,UAAWgC,GACtCK,EAAoBtI,EAAKA,EAAI+C,YAAa9B,SAASgH,EAAME,OAAOpC,UAEpE/F,EAAIqI,cAAgBA,EACbA,CACX,CA9G6DE,CAAsBvI,IAgHnF,SAA6BA,EAAK6H,GAC9B,IAAK7H,EAAIqD,iBAAmBrD,EAAIqD,eAAenJ,YAAsD,GAAxC8F,EAAIqD,eAAenJ,WAAW2J,OAAa,OACxG,MAAM2E,EAAcnE,EAAK,SAAU,CAAEoB,UAAWzF,EAAI0F,MAAMrK,cAC1D2E,EAAIqD,eAAenJ,WAAWwG,SAAQ,CAAC0D,EAAWqE,KAC9C,MAAMC,EAAcD,EAAQ,EACtBV,EAAS1D,EAAK,SAAU,CAC1B0B,MAAO2C,EACPlB,UAAW,GAAGkB,MAElBF,EAAYnC,YAAY0B,EAAO,IAEnCS,EAAYvC,iBAAiB,UAAWgC,IACpC,MACMU,EADgB1H,SAASgH,EAAME,OAAOpC,MAAO,IAChB,EACnC,GAAI/F,EAAIqD,eAAenJ,YAAc8F,EAAIqD,eAAenJ,WAAWyO,GAAa,CAC5E,MAAMC,EAAQ5I,EAAIqD,eAAenJ,WAAWyO,GACtCE,EAAY1D,EAAwByD,GAC1C5I,EAAI9H,MAAM4Q,YAAcD,CAC3B,KAEL,MAAME,EAAsB1E,EAAK,MAAO,CAACmD,UAAW,IAAI/B,UAAWzF,EAAI0F,MAAMtK,uBAC7EyM,EAAyBN,OAAOwB,EAAoBP,GACpDxI,EAAIwI,YAAcA,EAItB,SAAuCxI,GACnC,IAAIgJ,EAAoB,KACxBhJ,EAAI9H,MAAM+N,iBAAiB,cAAc,KACrC,MAAM6C,EAAc9I,EAAI9H,MAAM4Q,YACxBG,EAAajJ,EAAIqD,eAAenJ,WACtC,IAAIgP,GAAqB,EACzB,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAWpF,QACvBiF,GAAe3D,EAAwB8D,EAAWE,IADnBA,IAE/BD,EAAoBC,GAKD,IAAvBD,GAA4BA,IAAsBF,IAClDA,EAAoBE,EACpBlJ,EAAIwI,YAAYzC,MAAQmD,EAAoB,EAC/C,GAET,CArBIE,CAA8BpJ,EAClC,CAvIIqJ,CAAoBrJ,EAAK6H,GACzBpQ,EAAmB8P,OCVhB,SAAiCvH,GACpC,IAAIhI,EAAwBqM,EAAK,MAAO,CACpCpF,GAAI,GAAGe,EAAIsJ,uBACX7D,UAAWzF,EAAI0F,MAAM1N,wBA8BzB,MA7BgB,CACZ,CACIuR,WAAW,EACXpD,UAAWnG,EAAIoG,MAAM7I,OACrBkI,UAAWzF,EAAI0F,MAAMhL,mBACrB8O,QAAS,KAAOxJ,EAAIyJ,KAAO,QAAQzJ,EAAI0J,WAE3C,CACIH,UAAwB,SAAbvJ,EAAIyJ,KACftD,UAAWnG,EAAIoG,MAAM5I,MACrBiI,UAAWzF,EAAI0F,MAAM/K,kBACrB6O,QAAS,KAAOxJ,EAAIyJ,KAAO,UAAUzJ,EAAI0J,WAE7C,CACIH,UAAwB,YAAbvJ,EAAIyJ,KACftD,UAAWnG,EAAIoG,MAAM9I,SACrBmI,UAAWzF,EAAI0F,MAAM9K,qBACrB4O,QAAS,KAAOxJ,EAAIyJ,KAAO,OAAOzJ,EAAI0J,YAGtChJ,SAAQ,EAAG6I,YAAWpD,YAAWV,YAAW+D,cAC5CD,GACAvR,EAAsBqO,YAAYhC,EAAK,SAAU,CAC7C8B,YACAV,YACA+D,YAEP,IAEExR,CACX,CDxB8B2R,CAAwB3J,IAClDA,EAAItI,WAAW6P,OAAO9P,EAAmBoQ,GACzC+B,EAAe5J,EACnB,CAmBO,SAAS4J,EAAe5J,GAC3B,MAAMrD,EAAeqD,EAAIrD,aACzBA,EAAawJ,UAAY,GACrBnG,EAAI6J,cAAgB7J,EAAI6J,aAAahG,QAAwB,KAAd7D,EAAIC,MACnDD,EAAI6J,aAAanJ,SAAQoJ,IACrBnN,EAAa0J,YAAY0D,EAAiB/J,EAAK8J,EAAOE,MAAM,IAEzDhK,EAAIsC,cAA8B,KAAdtC,EAAIC,OAC3BD,EAAIsC,aAAmB,MACvBtC,EAAIsC,aAAmB,KAAE5B,SAAQmB,IAC7BlF,EAAa0J,YAAY0D,EAAiB/J,EAAK6B,GAAM,GAIrE,CAEO,SAASkI,EAAiB/J,EAAK6B,GAClC,MAAMtG,EAAS8I,EAAK,SAAU,CAC1BoB,UAAW,GAAG5D,EAAKP,WAAWtB,EAAI0F,MAAM9I,kBAAoBoD,EAAI+C,YAAYzB,SAAWO,EAAKP,QAAWtB,EAAI0F,MAAM7I,qBAAuB,KACxIoN,UAAWpI,EAAKT,KAChBoI,QAAS,IAAMtB,EAAiBlI,EAAK6B,EAAKP,WAE9C/F,EAAO2O,QAAQC,OAAStI,EAAKP,QAC7B,MAAM8I,EAAmB/F,EAAK,OAM9B,OALA+F,EAAiB7C,OACblD,EAAK,KAAM,CAAEoB,UAAWzF,EAAI0F,MAAM5I,cAAe0J,YAAa3E,EAAKT,OACnEiD,EAAK,KAAM,CAAEoB,UAAWzF,EAAI0F,MAAM3I,WAAYyJ,YAAa3E,EAAKP,WAEpE/F,EAAO8K,YAAY+D,GACZ7O,CACX,CAEO,SAAS2M,EAAiBlI,EAAKmK,EAAQrH,EAAU,GACpD,MAAMuH,EAAerK,EAAIsC,aAAazC,KAAK2C,MAAKX,GAAQA,EAAKP,UAAY6I,IACzE,IAAKE,EAAc,OAEnBrH,EAAkBqH,EAAcvH,GAChC,MAAMa,EAAM,IAAIjB,IAAIC,OAAOC,UAC3Be,EAAId,aAAa1B,IAAI,SAAUkJ,EAAa/I,SAC5CqB,OAAO2H,QAAQC,aAAa,CAAE,EAAE,GAAI5G,GAEpC3D,EAAIC,MAAQ,GACZD,EAAIzI,qBAAqBwN,MAAMhM,QAAU,QACzCiH,EAAIyJ,KAAO,UACXzJ,EAAI+C,YAAcsH,EAElBG,EAAYxK,GACZsH,EAAwBtH,EAAKA,EAAIyC,aACrC,CAsFO,SAAS+H,EAAYxK,GACxBA,EAAIzI,qBAAqB4O,UAAY,GACrCnG,EAAI1I,mBAAmByN,MAAMhM,QAAU,OACvCiH,EAAItD,kBAAkBqI,MAAMhM,QAAU,OACtCiH,EAAIzI,qBAAqBwN,MAAMhM,QAAU,QAEzC,MAAM0R,EAAWhG,SAASiG,yBAa1B,GAZA1K,EAAI+C,YAAYzF,SAASoD,SAAQM,IAE7B,MAAMhE,EAAgBqH,EAAK,SAAU,CACjCoB,UAAW,GAAGzF,EAAI0F,MAAM1I,iBAAkBgD,EAAIqD,eAAeI,QAAUzC,EAAiB,IAAMhB,EAAI0F,MAAMzI,oBAAsB,KAC9HgN,UAAW,gBAAgBjJ,IAC3BwF,YAAaxF,EACbwI,QAAS,IAAMlB,EAAoBtI,EAAKA,EAAI+C,YAAa/B,KAG7DyJ,EAASpE,YAAYrJ,MAEzBgD,EAAIzI,qBAAqB8O,YAAYoE,GAClCzK,EAAI+C,aAAazB,QAAS,CACzB,MAAMqJ,EAAU3K,EAAI4K,IAAI5K,EAAI+C,YAAYzB,WAAW,GACnD,IAAKqJ,EAED,YADAhJ,QAAQC,KAAK,6BAA6B5B,EAAI+C,YAAYzB,WAG9D,MAAMuJ,EAAapG,SAASC,cAAc,OAC1CmG,EAAWnH,IAAM,eAAeiH,EAAQG,OACxCD,EAAWpF,UAAYkF,EAAQjF,MAC/B1F,EAAIzI,qBAAqB8O,YAAYwE,EACxC,CACL,CAEO,SAASvC,EAAoBtI,EAAK6B,EAAMb,GAC3CgC,EAAkBhD,EAAK6B,EAAMb,GAC7BhB,EAAIqI,cAActC,MAAQ/E,EAC1BhB,EAAI9H,MAAM6F,OACY0G,SAASuC,cAAc,cAC/Bb,UAAYnG,EAAI9H,MAAM6S,OAAS/K,EAAIoG,MAAMrI,KAAOiC,EAAIoG,MAAMpI,MACxEwM,EAAYxK,EAChB,CEzMO,SAASgL,EAAmBhL,GAC/B,MAAM5H,EAASiM,EAAK,MAAO,CAAEoB,UAAWzF,EAAI0F,MAAMtN,SAClDA,EAAOmP,OACH0D,EAA2BjL,EAAK,QAChCkL,EAA8BlL,EAAK,QACnCmL,EAAiBnL,EAAK,QAgB9B,SAA+BA,GAC3B,MAAMzH,EAAkB8L,EAAK,SAAU,CACnCoB,UAAWzF,EAAI0F,MAAMnN,gBACrBiR,QAAS,IAAMxJ,EAAI9H,MAAM6S,OAAS/K,EAAI9H,MAAM6F,OAASiC,EAAI9H,MAAM8F,UAG7DoN,EAAW/G,EAAK,OAAQ,CAACoB,UAAWzF,EAAI0F,MAAMlN,cAAc2N,UAAWnG,EAAIoG,MAAMrI,OAIvF,OAHAxF,EAAgB8N,YAAY+E,GAC5BpL,EAAI9H,MAAM+N,iBAAiB,QAAQ,KAAQmF,EAASjF,UAAYnG,EAAIoG,MAAMpI,KAAK,IAC/EgC,EAAI9H,MAAM+N,iBAAiB,SAAS,KAAQmF,EAASjF,UAAYnG,EAAIoG,MAAMrI,IAAI,IACxExF,CACX,CA1BQ8S,CAAsBrL,GACtBmL,EAAiBnL,EAAK,QACtBkL,EAA8BlL,EAAK,QACnCiL,EAA2BjL,EAAK,SAEpC,MAAM7H,EAAoBkM,EAAK,MAAO,CAAEoB,UAAWzF,EAAI0F,MAAMvN,oBAO7D,OANAA,EAAkBoP,OChBf,SAA2BvH,GAC9B,SAASsL,EAAUrD,EAAOjI,EAAKuL,GAC3B,MAAMC,EAAOD,EAAgBE,wBACvBC,GAAczD,EAAM0D,QAAUH,EAAKI,MAAQJ,EAAKK,MACtD7L,EAAI9H,MAAM4Q,YAAcjC,KAAKhB,IAAI,EAAGgB,KAAKjB,IAAI8F,EAAY,IAAM1L,EAAI9H,MAAM4T,QAC5E,CAED,MAAMC,EAAoB1H,EAAK,MAAO,CAAEoB,UAAWzF,EAAI0F,OAAO/L,UAAU1B,YAClE+B,EAAqBqK,EAAK,MAAO,CACnCpF,GAAI,cACJwG,UAAWzF,EAAI0F,OAAO/L,UAAUK,mBAChCwM,YAAaxB,EAAWhF,EAAI9H,MAAM4Q,eAGhCkD,EAAuB3H,EAAK,MAAO,CAAEpF,GAAI,wBAAyBwG,UAAWzF,EAAI0F,OAAO/L,UAAUC,eAClG2R,EAAkBlH,EAAK,MAAO,CAAEpF,GAAI,sBAAuBwG,UAAWzF,EAAI0F,OAAO/L,UAAUE,aAC3FoS,EAAmB5H,EAAK,MAAO,CAAEpF,GAAI,eAAgBwG,UAAWzF,EAAI0F,OAAO/L,UAAUG,SAAUiL,MAAO,CAAE8G,MAAO,QAE/GK,EAAmB7H,EAAK,MAAO,CAACpF,GAAI,qBAAsBwG,UAAUzF,EAAI0F,OAAO/L,UAAUO,aAEzFH,EAAYsK,EAAK,MAAO,CAC1BoB,UAAWzF,EAAI0F,OAAO/L,UAAUI,UAChCgL,MAAO,CAAE6G,KAAM,QAGnBL,EAAgBhE,OAAO0E,EAAkBlS,GACzC,MAAMoS,EAAelE,IACbjI,EAAIoM,YACJd,EAAUrD,EAAOjI,EAAKuL,EACzB,EAGCc,EAAY,KACVrM,EAAIoM,aACJpM,EAAIoM,YAAa,EACjB3H,SAAS6H,KAAKvH,MAAMwH,WAAa,GACjC9H,SAAS+H,oBAAoB,YAAaL,GAC1C1H,SAAS+H,oBAAoB,UAAWH,GAC3C,EAGLd,EAAgBtF,iBAAiB,aAAa,KAC1CjG,EAAIoM,YAAa,EACjB3H,SAAS6H,KAAKvH,MAAMwH,WAAa,OACjC9H,SAASwB,iBAAiB,YAAakG,GACvC1H,SAASwB,iBAAiB,UAAWoG,EAAU,IAGnDd,EAAgBtF,iBAAiB,SAAUwG,IACvCnB,EAAUmB,EAAGzM,EAAKuL,EAAgB,IAGtC,MAAMtR,EAAkBoK,EAAK,MAAO,CAChCoB,UAAWzF,EAAI0F,OAAO/L,UAAUM,gBAChCuM,YAAaxB,EAAWhF,EAAI9H,MAAM4T,UAAY,KA8ClD,OA3CA9L,EAAI9H,MAAM+N,iBAAiB,cAAc,KACrC,MAAMyG,EAAmB1M,EAAI9H,MAAM4Q,YAAc9I,EAAI9H,MAAM4T,SAAY,IACvEG,EAAiBlH,MAAM8G,MAAQ,GAAGa,KAClC3S,EAAUgL,MAAM6G,KAAO,QAAQc,YAC/B1S,EAAmBwM,YAAcxB,EAAWhF,EAAI9H,MAAM4Q,YAAY,IAGtE9I,EAAI9H,MAAM+N,iBAAiB,kBAAkB,KAIzC,GAHAiG,EAAiB/F,UAAY,GAC7BlM,EAAgBuM,YAAcxB,EAAWhF,EAAI9H,MAAM4T,UAE/C9L,EAAIqD,eAAenJ,YAAciI,MAAMyB,QAAQ5D,EAAIqD,eAAenJ,YAAa,CACjF,MAAMyS,EAAmB3M,EAAIqD,eAAenJ,WAAW2E,IAAIsG,GAAyBjG,QAAO0N,GAAMA,GAAM,GAAKA,GAAM5M,EAAI9H,MAAM4T,WAAUrL,MAAK,CAACsB,EAAGC,IAAMD,EAAIC,IACnJ6K,EAAS,IAEf,IAAK,IAAI1D,EAAI,EAAGA,EAAIwD,EAAiB9I,OAAS,EAAGsF,IAAK,CACpD,MAAM2D,EAAUH,EAAiBxD,GAE3B4D,GADOJ,EAAiBxD,EAAI,GACN2D,GAAW9M,EAAI9H,MAAM4T,SAAY,IACvDkB,EAAgBnG,KAAKhB,IAAI,EAAGkH,EAAaF,GACzCI,EAAiBH,EAAU9M,EAAI9H,MAAM4T,SAAY,IAAOe,EAAS,EACjEzS,EAAciK,EAAK,MAAM,CAACoB,UAAWzF,EAAI0F,MAAM/L,SAASS,YAAY2K,MAAM,CAACmI,SAAU,WAAYtB,KAAM,GAAGqB,KAAiBpB,MAAO,GAAGmB,QAErI7S,EAAOkK,EAAK,MAAO,CAACoB,UAAW,iBAAiBzF,GAAK0F,OAAO/L,UAAUQ,uBAC5EA,EAAK8L,iBAAiB,SAAS,KAAOjG,EAAI9H,MAAM4Q,YAAcgE,CAAO,IAErE,MAAMK,EAAa9I,EAAK,MAAO,CAACoB,UAAWzF,EAAI0F,MAAM/L,SAASU,YAC9D8S,EAAW3G,YAAc,GAAG2C,EAAI,IAEhC/O,EAAYiM,YAAYlM,GACxBC,EAAYiM,YAAY8G,GACxBjB,EAAiB7F,YAAYjM,EAC9B,CACF,KAKL4R,EAAqBzE,OAAOvN,GAC5BgS,EAAqBzE,OAAOgE,GAC5BS,EAAqBzE,OAAOtN,GAC5B8R,EAAkBxE,OAAOyE,EAAsBE,GAExCH,CACX,CDpFQqB,CAAkBpN,GEjBnB,SAAoCA,GACvC,MAAMqN,EAAWrN,EAAIsN,SAASzU,cAAc+M,KAAO,GAC7C2H,EAAWvN,EAAIsN,SAASzU,cAAcgN,KAAO,KAC7C2H,EAAOxN,EAAIsN,SAASzU,cAAciN,MAAQ,IAE1C2H,EAAoB,CAAClS,EAAQmS,KAC/BnS,EAAOkK,UAAY,GAAGlK,EAAOoS,iBAAiBD,EAAa1N,EAAI0F,MAAM7M,cAAcK,SAAW,IAAI,EAEhG0U,EAAcC,IAChB7N,EAAI9H,MAAMW,aAAegO,KAAKjB,IAAI2H,EAAU1G,KAAKhB,IAAIwH,EAAUrN,EAAI9H,MAAMW,aAAegV,IACxFC,EAAiBtH,YAAcxG,EAAI9H,MAAMW,aAAakV,QAAQ,GAE9DN,EAAkBO,EAAiBhO,EAAI9H,MAAMW,eAAiBwU,GAC9DI,EAAkBQ,EAAiBjO,EAAI9H,MAAMW,eAAiB0U,EAAS,EAGrEW,EAA0B7J,EAAK,MAAO,CAAEoB,UAAWzF,EAAI0F,MAAM7M,cAAcC,UAC3EkV,EAAkB3J,EAAK,SAAU,CACnCsJ,cAAe3N,EAAI0F,MAAM7M,cAAcI,SACvCwM,UAAWzF,EAAI0F,MAAM7M,cAAcI,SACnCuN,YAAa,IACbgD,QAAS,IAAMoE,GAAYJ,KAGzBM,EAAmBzJ,EAAK,OAAQ,CAClCoB,UAAWzF,EAAI0F,MAAM7M,cAAcE,QACnCyN,YAAaxG,EAAI9H,MAAMW,aAAakV,QAAQ,KAE1CE,EAAkB5J,EAAK,SAAU,CACnCsJ,cAAe3N,EAAI0F,MAAM7M,cAAcG,SACvCyM,UAAWzF,EAAI0F,MAAM7M,cAAcG,SACnCwN,YAAa,IACbgD,QAAS,IAAMoE,EAAWJ,KAI9B,OADAU,EAAwB3G,OAAOyG,EAAiBF,EAAkBG,GAC3DC,CACX,CFnBQC,CAA2BnO,GAC3B5H,EACAoN,EAA6BxF,IAE1B7H,CACX,CAgBA,SAAS8S,EAA2BjL,EAAKoO,GACrC,OAAO/J,EAAK,SAAU,CAClBoB,UAAWzF,EAAI0F,MAAM,GAAG0I,eACxBjI,UAAWnG,EAAIoG,MAAM,GAAGgI,SACxB5E,QAAS,KACL,MAAMf,EAAQzI,EAAIsC,aAAazC,KAAKwO,WAAUxM,GAAQA,EAAKP,UAAYtB,EAAI+C,YAAYzB,UACjFgN,EAAoB,SAARF,EAAiB3F,EAAQ,EAAIA,EAAQ,EACnDzI,EAAIsC,aAAazC,KAAKyO,KACtBpG,EAAiBlI,EAAKA,EAAIsC,aAAazC,KAAKyO,GAAWhN,SACvDgH,EAAoBtI,EAAKA,EAAIsC,aAAazC,KAAKyO,GAAY,GAC9D,GAGb,CAEA,SAASpD,EAA8BlL,EAAKoO,GACxC,OAAO/J,EAAK,SAAU,CAClBoB,UAAWzF,EAAI0F,MAAM,GAAG0I,kBACxBjI,UAAWnG,EAAIoG,MAAM,GAAGgI,YACxB5E,QAAS,IAIjBpL,eAA6B4B,EAAKoO,GAC9B,MAAMG,EAAyB,SAARH,GAAmB,EAAI,EACxCI,EAAgBxO,EAAIqD,eAAeI,OAAS8K,EAE5CE,EAAwB,SAARL,EAAkBI,EAAgB,EAAMA,EAAgBxO,EAAI+C,YAAYzF,SAASuG,OAAS,EAChH,GAAI4K,EAEA,YADAnG,EAAoBtI,EAAKA,EAAI+C,YAAayL,GAI9C,MAAME,EAAe1O,EAAIsC,aAAazC,KAAKwO,WAAUxM,GAAQA,EAAKP,UAAYtB,EAAI+C,YAAYzB,UACxFqN,EAAcD,EAAeH,EAC7BK,EAAa5O,EAAIsC,aAAazC,KAAK8O,GACrCC,IACA1G,EAAiBlI,EAAK4O,EAAWtN,SACjCgH,EAAoBtI,EAAK4O,EAAY,GAE7C,CArBuBC,CAAc7O,EAAKoO,IAE1C,CAqBA,SAASjD,EAAiBnL,EAAKoO,GAC3B,OAAO/J,EAAK,SAAU,CAClBpF,GAAI,GAAGmP,cACP3I,UAAWzF,EAAI0F,MAAM,GAAG0I,eACxBjI,UAAWnG,EAAIoG,MAAM,GAAGgI,SACxB5E,QAAS,KACLxJ,EAAI9H,MAAM4Q,YACV9I,EAAI9H,MAAM4Q,YAAcjC,KAAKjB,IAAIiB,KAAKhB,IAAI7F,EAAI9H,MAAM4Q,YAAa,GAAI9I,EAAI9H,MAAM4T,SAAS,GAGpG,CG7FO,SAASgD,EAAY7O,EAAOJ,EAAMkP,GACrC,MAAMC,EAAa/O,EAAMgP,cAGnBC,EAAYrI,KAAKhB,IADF,GADC,IAEoCmJ,EAAWnL,OAAS,GAAK,IAA2B,IAApBmL,EAAWnL,SAErG,OAAOhE,EAAKsP,QAAO,CAACvP,EAASoK,KACzB,IAAIoF,EAAa,EACbC,EAAU,EAed,OAdAN,EAAQrO,SAAQ4O,IACZ,GAAItF,EAAKsF,GAAS,CACd,MAAMC,EAAYvF,EAAKsF,GAAQ/L,WAAW0L,cAEpCO,EActB,SAAgCzN,EAAGC,GAC/B,GAAID,IAAMC,EAAG,OAAO,EACpB,MAAMyN,EAAItN,MAAMC,KAAK,CAACyB,OAAQ9B,EAAE8B,OAAS,IAAI,CAAC6L,EAAGvG,IAAMA,IACvD,IAAK,IAAIwG,EAAI,EAAGA,GAAK3N,EAAE6B,OAAQ8L,IAAK,CAChC,IAAIC,EAAOH,EAAE,GACbA,EAAE,GAAKE,EACP,IAAK,IAAIxG,EAAI,EAAGA,GAAKpH,EAAE8B,OAAQsF,IAAK,CAChC,MAAM0G,EAAOJ,EAAEtG,GACfsG,EAAEtG,GAAKtC,KAAKjB,IAAI6J,EAAEtG,GAAK,EAAGsG,EAAEtG,EAAE,GAAK,EAAGyG,GAAQ7N,EAAEoH,EAAE,KAAOnH,EAAE2N,EAAE,KAC7DC,EAAOC,CACV,CACJ,CACD,OAAOJ,EAAE1N,EAAE8B,OACf,CA5BiCiM,CAAuBd,EAAYO,GAC3B1I,KAAKhB,IAAImJ,EAAWnL,OAAQ0L,EAAU1L,QAC3D2L,GAASN,IACTE,GAAcI,EACdH,IAEP,KAEDA,EAAU,GACVzP,EAAQ4B,KAAK,CAACwI,OAAMwF,MAAOJ,EAAaC,IAErCzP,CAAO,GACf,IAAIa,MAAK,CAACsB,EAAGC,IAAMD,EAAEyN,MAAQxN,EAAEwN,OACtC,CCpBO,SAASO,EAAc/P,GAC1BA,EAAI1I,mBAAmB6O,UAAY,GACnC,MAAMlO,EAAYoM,EAAK,MAAO,CAAEoB,UAAWzF,EAAI0F,MAAMnJ,gBAC/CyT,EAAQ3L,EAAK,QAAS,CACxBsB,KAAM,SACNsK,YAAa,WAAWjQ,EAAIzC,OAAOsG,uBACnCqM,aAAc,MACdzK,UAAWzF,EAAI0F,MAAMlJ,YACrB2T,QAAS,KACLnQ,EAAIC,MAAQ+P,EAAMjK,MAClB/F,EAAIJ,QAAUkP,EAAY9O,EAAIC,MAAOD,EAAIzC,OAAQ,CAAC,KAAK,KAAK,OAC5D6S,EAAgBpQ,EAAI,IAG5BgQ,EAAM/I,aAAa,aAAc,UACjChP,EAAUoO,YAAY2J,GACtBhQ,EAAI1I,mBAAmB+O,YAAYpO,GACnC,MAAMT,EAAgB6M,EAAK,MAAO,CAAEoB,UAAWzF,EAAI0F,MAAMlO,gBACzDwI,EAAIxI,cAAgBA,EACpBwI,EAAI1I,mBAAmB+O,YAAY7O,GACnC4Y,EAAgBpQ,EACpB,CAEA,SAASoQ,EAAgBpQ,GACrB,MAAMxI,EAAgBwI,EAAIxI,cAC1BA,EAAc2O,UAAY,GAC1B,MAAM5I,EAASyC,EAAIC,MAAQD,EAAIJ,QAAQf,KAAIiL,GAAUA,EAAOE,OAAQhK,EAAIzC,OAClEkN,EAAWhG,SAASiG,yBAC1BnN,EAAOmD,SAAQ5B,GAAS2L,EAASpE,YAIrC,SAA2BrG,EAAKlB,GAC5B,MAAMuR,EAAahM,EAAK,MAAO,CAACoB,UAAWzF,EAAI0F,MAAMpK,YAAYxC,UAE3DyC,EAAS8I,EAAK,SAAU,CAACoB,UAAWzF,EAAI0F,MAAMpK,YAAYC,OAAQiO,QAAS,IAAM8G,EAAuBtQ,EAAKlB,KACnHuR,EAAWhK,YAAY9K,GACvBA,EAAO2O,QAAQqG,OAASzR,EAAMG,GAC9B1D,EAAO0L,aAAa,aAAcnI,EAAM6I,IAAM7I,EAAM4I,IAEpD,MAAM8I,EAA0BnM,EAAK,MAAO,CAAEoB,UAAWzF,EAAI0F,MAAMpK,YAAYE,eAC/EgV,EAAwBnK,YAAYhC,EAAK,KAAM,CAAEoB,UAAWzF,EAAI0F,MAAMpK,YAAYG,SAAU+K,YAAa1H,EAAM2R,MAC/GD,EAAwBnK,YAAYhC,EAAK,QAAS,CAAEoB,UAAWzF,EAAI0F,MAAMpK,YAAYI,IAAK8K,YAAa1H,EAAMpD,OAE7G,MAAMgV,EAAuBrM,EAAK,MAAO,CAAEoB,UAAWzF,EAAI0F,MAAMpK,YAAYK,YAG5E,GAFA+U,EAAqBrK,YAAYhC,EAAK,KAAM,CAAEoB,UAAWzF,EAAI0F,MAAMpK,YAAYM,MAAO4K,YAAa1H,EAAM4I,MAErG5I,EAAM4I,KAAO5I,EAAM6I,IAAM7I,EAAM6I,GAAI,CACnC,MAAMA,EAAKtD,EAAK,IAAK,CACjBoB,UAAWzF,EAAI0F,MAAMpK,YAAYO,WACjC2K,YAAa1H,EAAM6I,KAEvB+I,EAAqBrK,YAAYsB,EACpC,CAKD,GAHApM,EAAO8K,YAAYmK,GACnBjV,EAAO8K,YAAYqK,GAEhB5R,EAAME,GAAI,CACT,MAAM2R,EAAiBtM,EAAK,SAAU,CAClCoB,UAAWzF,EAAI0F,MAAMpK,YAAYQ,SACjCqK,UAAWnG,EAAIoG,MAAMtK,SACrB0N,QAAQ,IAObpL,eAAmC4B,EAAKlB,GAC3C,IACI,IAAKA,EAAME,GAEP,YADA2C,QAAQiP,IAAI,sDAGhB,MAAMC,EAASxM,EAAK,SAAU,CAACoB,UAAWzF,EAAI0F,MAAM3J,oBAAoBjD,UAClEgY,EAAUzM,EAAK,MAAO,CAAC8B,UAAWnG,GAAK+Q,eAAiB,yCACxDC,EAAY3M,EAAK,MAAO,CAAE8B,UAAW,2BAC3BnG,EAAI0F,MAAM3J,oBAAoBG,oBAAoB4C,EAAM5C,8CACxD8D,EAAI0F,MAAM3J,oBAAoBI,mBAAmB2C,EAAM3C,uBAEvE0U,EAAOtJ,OAAOuJ,EAASE,GACvB,MAAML,EAAiBtM,EAAK,SAAS,CAACoB,UAAWzF,EAAI0F,MAAM3J,oBAAoBC,gBAAgBwK,YAAa,YAAY1H,EAAMmS,SAAW,OACzIN,EAAe1K,iBAAiB,SAAS,KACrC,MAAMiL,EAASzM,SAAS6H,KAAKjG,YAAYhC,EAAK,IAAK,CAAE8M,KAAMrS,EAAME,GAAIlD,SAAU,MAC/EoV,EAAOE,QACPF,EAAOG,SACPR,EAAOS,QACPT,EAAOQ,QAAQ,IAEnBR,EAAOxK,YAAYsK,GACnB,MAAMY,EAAelN,EAAK,SAAU,CAACoB,UAAWzF,EAAI0F,MAAM3J,oBAAoBE,OAAQuK,YAAa,WACnG+K,EAAatL,iBAAiB,SAAS,KAAO4K,EAAOS,QAAQ7M,SAAS6H,KAAKkF,YAAYX,EAAO,IAC9FA,EAAOxK,YAAYkL,GACnB9M,SAAS6H,KAAKjG,YAAYwK,GAC1BA,EAAOY,WACR,CAAC,MAAOxN,GACLtC,QAAQsC,MAAM,wDAAyDA,EAC1E,CACP,CArC0ByN,CAAoB1R,EAAKlB,KAC3CuR,EAAWhK,YAAYsK,EAC1B,CAED,OAAON,CACX,CAvCiDsB,CAAkB3R,EAAKlB,MACpEtH,EAAc6O,YAAYoE,EAC9B,CAuEOrM,eAAekS,EAAuBtQ,EAAKlB,GAE9C,GAAiB,SAAbA,EAAMC,GAAe,CACrBiB,EAAIyJ,KAAO,OACXzJ,EAAIyC,aAAe3D,QACbiB,EAAYC,EAAKlB,EAAMG,IAC7BqI,EAAwBtH,EAAKlB,GAC7BkB,EAAI0J,SACJ,MAAM/F,EAAM,IAAIjB,IAAIC,OAAOC,UAC3Be,EAAId,aAAa1B,IAAI,UAAWrC,EAAMG,IACtC0D,OAAO2H,QAAQC,aAAa,CAAE,EAAE,GAAI5G,EACvC,MAAU7E,EAAMC,EAGrB,CRjGA6S,kBAAkBC,UAAUC,YAAcF,kBAAkBC,UAAUJ,UACtEG,kBAAkBC,UAAUJ,UAAY,WACpCM,KAAKD,cACLC,KAAKvI,QAAUvB,IACX,IAAIuD,EAAOuG,KAAKtG,wBAChB,OAAGxD,EAAM+J,QAAUxG,EAAKyG,KAAOhK,EAAM+J,QAAUxG,EAAK0G,QACjDjK,EAAM0D,QAAUH,EAAKI,MAAQ3D,EAAM0D,QAAUH,EAAK2G,MADcJ,KAAKT,aACxE,CAA+E,CAEvF,ESxBe,MAAMc,EACnB,WAAAC,CAAYC,EAAahF,GACvByE,KAAK9Z,UAAYwM,SAAS8N,eAAeD,GACzCP,KAAKS,UAAYlF,EAAQkF,WAAa,CAAC,QACvCT,KAAKxU,OAAS,GACdwU,KAAKtP,aAAe,GACpBsP,KAAKzP,aAAe,GACpByP,KAAKhP,YAAc,GACnBgP,KAAK1O,eAAiB,CAAEI,OAAQ,GAChCsO,KAAK7Z,MAAQuM,SAASC,cAAc,SACpCqN,KAAK5O,YAAc,OACnB4O,KAAK3F,YAAa,EAClB2F,KAAKrM,MX0GmB,EAAC+M,EAAgB,MAC3C,MAAMC,EAAgB,IAAKvb,GAC3B,IAAK,MAAMoI,KAAOqF,OAAO+N,KAAKF,GACxBlT,EAAIqT,WAAW,KACjBF,EAAcnT,EAAIsT,UAAU,IAAMJ,EAAclT,GAEhDmT,EAAcnT,GAAOkT,EAAclT,GAIvC,OAAOmT,CAAa,EWpHLI,CAAaxF,EAAQyF,SAClChB,KAAK3L,MXyIiB,EAAC4M,EAAc,MACvC,MAAMC,EAAc,IAAK/V,GACzB,IAAK,MAAMqC,KAAOqF,OAAO+N,KAAKK,GAC5BC,EAAY1T,GAAOyT,EAAYzT,GAEjC,OAAO0T,CAAW,EW9IHC,CAAW5F,EAAQlH,OAChC2L,KAAKnH,IXiJe,EAACuI,EAAY,MACnC,MAAMC,EAAY,IAAKlV,GACvB,IAAK,MAAMqB,KAAOqF,OAAO+N,KAAKQ,GAC5BC,EAAU7T,GAAO4T,EAAU5T,GAE7B,OAAO6T,CAAS,EWtJHC,CAAS/F,EAAQ1C,KAC5BmH,KAAKnS,QAAU,GACfmS,KAAK9R,MAAQ,GACb8R,KAAKuB,OAAShG,GAASgG,QAAU,GACjCvB,KAAKtI,KAAO,QACZsI,KAAKzI,SAAWgE,GAAShE,UAAY,eACrCyI,KAAKwB,MAAQ,CACTzU,MAAO,CAAC0U,OAAQ,OAAQlc,mBAAoB,QAASoF,kBAAmB,OAAQnF,qBAAsB,QACtGsK,KAAM,CAAC2R,OAAQ,QAASlc,mBAAoB,OAAQoF,kBAAmB,QAASnF,qBAAsB,QACtGuL,QAAS,CAAC0Q,OAAQ,QAASlc,mBAAoB,OAAQoF,kBAAmB,OAAQnF,qBAAsB,SAE7G,CAED,mBAAakc,CAAOnB,EAAahF,GAC/B,MAAMkG,EAAS,IAAIpB,EAAYE,EAAahF,SV/BzClP,eAA6BoV,GAChC,MAAME,EAAoB,CACtBC,KAAMtV,EACNuV,IAAKvU,GAGT,IAAK,MAAMd,KAAYiV,EAAOhB,UACtBkB,EAAkBnV,KACpBiV,EAAOjW,OAASiW,EAAOjW,OAAOuC,aAAa4T,EAAkBnV,OAGnE,IAAK,IAAI4K,EAAI,EAAGA,EAAIqK,EAAOjW,OAAOsG,OAAQsF,IAAK,CAC3C,IAAI0K,EAAcL,EAAOF,OAAOE,EAAOjW,OAAO4L,GAAGlK,IAC9C4U,IACCL,EAAOjW,OAAO4L,GAAGzB,GAAKmM,EAAYnM,GAClC8L,EAAOjW,OAAO4L,GAAGxB,GAAKkM,EAAYlM,GAEzC,CACL,CUcUmM,CAAcN,GACpBA,EAAOvb,UAAUkO,UAAY,GAC7B,MAAM4N,EAAMP,EAAOlK,SACbjS,EAAkBgN,EAAK,MAAO,CAACpF,GAAI,GAAG8U,qBAAuBtO,UAAW+N,EAAO9N,MAAMrO,kBAY3F,OAXAmc,EAAOlc,mBAAqB+M,EAAK,MAAO,CAACpF,GAAI,GAAG8U,yBAA2BtO,UAAW+N,EAAO9N,MAAMpO,qBACnGkc,EAAO9W,kBAAoB2H,EAAK,MAAO,CAACpF,GAAI,GAAG8U,wBAA0BtO,UAAW+N,EAAO9N,MAAMhJ,oBACjG8W,EAAOjc,qBAAuB8M,EAAK,MAAO,CAACpF,GAAI,GAAG8U,2BAA6BtO,UAAW+N,EAAO9N,MAAMnO,uBACvGic,EAAO9b,WAAa2M,EAAK,MAAO,CAACpF,GAAI,GAAG8U,gBAAkBtO,UAAW+N,EAAO9N,MAAMhO,aAClF8b,EAAOA,OAmDX,SAA2BxT,GACzB,MAAM1F,EAAkB+J,EAAK,MAAO,CAClCpF,GAAI,oBACJwG,UAAWzF,EAAI0F,MAAMpL,kBAGjB0Z,EAAehJ,EAAmBhL,GAGxC,OAFA1F,EAAgB+L,YAAY2N,GAErB1Z,CACT,CA7DoB2Z,CAAkBT,GAClCA,EAAOA,OAAOU,QAAQV,EAAO9b,YAC7BL,EAAgBkQ,OAAOiM,EAAOtb,MAAOsb,EAAOA,QD4EzC,SAAsBxT,GACzB,MAAMxD,EAAc6H,EAAK,QAAS,CAC9BsB,KAAM,SACNsK,YAAajQ,EAAImU,MAAMC,cAAgB,eACvC3O,UAAWzF,EAAI0F,MAAMlJ,YACrByN,UAAW,SACXiG,aAAc,MACdC,QAAS,KACLnQ,EAAIC,MAAQzD,EAAYuJ,MACxBpE,QAAQiP,IAAIpU,EAAYuJ,MAAO/F,EAAIsC,aAAazC,MAChDG,EAAI6J,aAAeiF,EAAY9O,EAAIC,MAAOD,EAAIsC,aAAazC,KAAM,CAAC,SAClE+J,EAAe5J,EAAI,IAGrBvD,EAAuB4H,EAAK,MAAO,CAAEoB,UAAWzF,EAAI0F,MAAMjJ,uBAChEA,EAAqB4J,YAAY7J,GACjCwD,EAAItD,kBAAkB2J,YAAY5J,GAClCuD,EAAItD,kBAAkB2J,YAAarG,EAAIrD,aAAe0H,EAAK,MAAO,CAAEoB,UAAWzF,EAAI0F,MAAM/I,gBACzFiN,EAAe5J,EACnB,CC9FIqU,CAAab,GACbnc,EAAgBkQ,OAAOiM,EAAO9W,kBAAkB8W,EAAOjc,qBAAqBic,EAAOlc,oBACnFkc,EAAOvb,UAAUoO,YAAYhP,GAC7B0a,KAAKuC,eAAed,GACbA,CACR,CAED,2BAAac,CAAed,GAC1B,MAAM7P,EAAM,IAAIjB,IAAIC,OAAOC,UACvBe,EAAId,aAAatB,IAAI,mBACjB+O,EAAuBkD,EAAQA,EAAOjW,OAAOiF,MAAM1D,GAAUA,EAAMG,IAAM0E,EAAId,aAAatB,IAAI,cACpGiS,EAAO/J,KAAO,QAEZ9F,EAAId,aAAatB,IAAI,kBACjB2G,EAAiBsL,EAAQ7P,EAAId,aAAatB,IAAI,WACpDiS,EAAO/J,KAAO,WAEI,UAAhB+J,EAAO/J,MACTsG,EAAcyD,GAGhBe,EAAQf,EACT,CAED,MAAA9J,GACoB,UAAdqI,KAAKtI,KACPsG,EAAcgC,MACS,SAAdA,KAAKtI,KACdG,EAAemI,MACQ,YAAdA,KAAKtI,MACde,EAAYuH,MAEdwC,EAAQxC,KACT,CAED,OAAAyC,CAAQC,GACN7P,OAAOE,OAAOiN,KAAM0C,EACrB,EAGH,SAASF,EAAQf,GACb,MAAMkB,EAAclB,EAAOD,MAAMC,EAAO/J,OAAS8J,MAAMzU,MACvD0U,EAAOA,OAAOzO,MAAMhM,QAAU2b,EAAYlB,OAC1CA,EAAOlc,mBAAmByN,MAAMhM,QAAU2b,EAAYpd,mBACtDkc,EAAO9W,kBAAkBqI,MAAMhM,QAAU2b,EAAYhY,kBACrD8W,EAAOjc,qBAAqBwN,MAAMhM,QAAU2b,EAAYnd,oBAC5D"}