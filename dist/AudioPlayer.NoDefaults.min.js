const e=(e={})=>{const t={...{}};for(const n of Object.keys(e)){if(n.startsWith("_")){t[n.substring(1)]=e[n]}else{t[n]=e[n]}}return t};const t=(e={})=>{const t={...{}};for(const n of Object.keys(e)){t[n]=e[n]}return t};const n=(e={})=>{const t={...{}};for(const n of Object.keys(e)){t[n]=e[n]}return t};const a="https://content.dbs.org";async function o(e){const t={hark:s,dbp:r};for(const n of e.providers){if(t[n]){e.bibles=e.bibles.concat(await t[n]())}}for(let t=0;t<e.bibles.length;t++){let n=e.titles[e.bibles[t].id];if(n){e.bibles[t].tt=n.tt;e.bibles[t].tv=n.tv}}}async function s(e="all",t="all"){const n=await fetch(`${a}/bibles/audio-new/index.json`).then((e=>e.json()));const o=n.map((e=>({...e,tp:"hark",dl:e.dl?`${a}/bibles/audio-new/${e.id}.zip`:""})));if(e!=="all"){o=o.filter((t=>t.ci===e))}if(t!=="all"){o=o.filter((e=>e.id.includes(t)))}return o}async function i(e){const t={"01":"GEN","02":"EXO","03":"LEV","04":"NUM","05":"DEU","06":"JOS","07":"JDG","08":"RUT","09":"1SA",10:"2SA",11:"1KI",12:"2KI",13:"1CH",14:"2CH",15:"EZR",16:"NEH",17:"EST",18:"JOB",19:"PSA",20:"PRO",21:"ECC",22:"SNG",23:"ISA",24:"JER",25:"LAM",26:"EZK",27:"DAN",28:"HOS",29:"JOL",30:"AMO",31:"OBA",32:"JON",33:"MIC",34:"NAM",35:"HAB",36:"ZEP",37:"HAG",38:"ZEC",39:"MAL",40:"MAT",41:"MRK",42:"LUK",43:"JHN",44:"ACT",45:"ROM",46:"1CO",47:"2CO",48:"GAL",49:"EPH",50:"PHP",51:"COL",52:"1TH",53:"2TH",54:"1TI",55:"2TI",56:"TIT",57:"PHM",58:"HEB",59:"JAS",60:"1PE",61:"2PE",62:"1JN",63:"2JN",64:"3JN",65:"JUD",66:"REV"};const n=await fetch(`${a}/bibles/audio-new/${e}/index.txt`);const o=await n.text();const s=new Map;const i=/^(\d+)_(\w+)_(\d+)\.mp3$/;o.split("\n").sort().forEach((e=>{const n=e.match(i);if(n){const[,e,a,o]=n;const i=parseInt(o,10);const r=t[e];if(!s.has(r)){s.set(r,{name:a,book_number:e,book_id:r,chapters:[]})}s.get(r).chapters.push(i)}}));let r=[];const c=await fetch(`${a}/bibles/audio-new/${e}/timingfiles/_index.txt`);if(c.ok){r=(await c.text()).split("\n")}else{console.warn("timing files could not be found")}for(const e of s.values()){e.chapters.sort(((e,t)=>e-t))}return{bible_id:e,bible_folder:e,timestamps:r,data:Array.from(s.values())}}async function r(e){let t=`https://4.dbt.io/api/bibles?v=4&key=${key}&media=audio`;if(e){t+="&country="+e}bibles=await fetch(t).then((function(e){return e.json()}));let n=bibles.meta.pagination.last_page;let a=1;while(a>=n){a++;results=await fetch(t+"page="+a).then((function(e){return e.json()}));bibles.data.concat(results.data)}return bibles}async function c(e,t){e.query="";const n=await i(t);e.currentBooks=n;e.numeralFormatter=e.currentBible.nm?new Intl.NumberFormat(e.currentBible.nm):new Intl.NumberFormat;const a=e.bibles.find((t=>t.id===e.currentBooks.bible_id));e.currentBible=a;const o=new URL(window.location);o.searchParams.set("id",e.currentBible.id);await l(e,n.data[0],1)}async function l(e,t,n){e.currentBook=t;await d(e,t,n)}async function d(e,t,n){e.currentBook=t;let a=n;if(!t?.chapters?.includes(n)){a=1}if(e.currentType==="hark"){const n=t.book_number==="19"?3:2;e.currentChapter={path:`https://content.dbs.org/bibles/audio-new/${e.currentBooks.bible_folder}/${t.book_number}_${t.name}_${a.toString().padStart(n,"0")}.mp3`,title:`${t.name} ${a}`,number:a,book_id:t.book_id,timestamps:[]};e.audio.src=e.currentChapter.path;const o=new URL(window.location);o.searchParams.set("book",t.book_id);o.searchParams.set("c",a);if(Array.isArray(e.currentBooks.timestamps)&&e.currentBooks.timestamps.length>0){const t=/Verse (\d+)	(\d+:\d+:\d+\.\d+)/gm;let n=await fetch(`https://content.dbs.org/bibles/audio-new/${e.currentBooks.bible_folder}/timingfiles/${e.currentBook.book_id}_${a.toString().padStart(3,"0")}.txt`).then((function(e){return e.text()})).catch((e=>{console.error("Error:",e)}));let o=[];let s;while((s=t.exec(n))!==null){s[1];const e=s[2];o.push(e)}e.currentChapter.timestamps=o}}}function u(e,t={}){const n=document.createElement(e);for(const[e,a]of Object.entries(t)){if(e==="style"&&typeof a==="object"){Object.assign(n.style,a)}else{n[e]=a}}return n}function p(e,t){const n=t/60|0;const a=t%60|0;return`${e.numeralFormatter.format(n)}:${a<10?e.numeralFormatter.format(0):""}${e.numeralFormatter.format(a)}`}const b=e=>{const[t,n,a]=e.split(":");return parseInt(t,10)*3600+parseInt(n,10)*60+parseFloat(a)};HTMLDialogElement.prototype.triggerShow=HTMLDialogElement.prototype.showModal;HTMLDialogElement.prototype.showModal=function(){this.triggerShow();this.onclick=e=>{let t=this.getBoundingClientRect();if(e.clientY<t.top||e.clientY>t.bottom)return this.close();if(e.clientX<t.left||e.clientX>t.right)return this.close()}};function m(e){const t=e.options?.playbackRate?.min??.5;const n=e.options?.playbackRate?.max??2.25;const a=e.options?.playbackRate?.step??.25;const o=(t,n)=>{t.className=`${t.baseClassName} ${n?e.class.playbackRate?.disabled:""}`};const s=a=>{e.audio.playbackRate=Math.min(n,Math.max(t,e.audio.playbackRate+a));c.textContent=e.numeralFormatter.format(e.audio.playbackRate);o(r,e.audio.playbackRate===t);o(l,e.audio.playbackRate===n)};const i=u("div",{className:e.class.playbackRate?.wrapper});const r=u("button",{baseClassName:e.class.playbackRate?.decrease,className:e.class.playbackRate?.decrease,textContent:"-",onclick:()=>s(-a)});const c=u("span",{className:e.class.playbackRate?.display,textContent:e.numeralFormatter.format(e.audio.playbackRate)});const l=u("button",{baseClassName:e.class.playbackRate?.increase,className:e.class.playbackRate?.increase,textContent:"+",onclick:()=>s(a)});e.audio.addEventListener("loadedmetadata",(()=>{c.textContent=e.numeralFormatter.format(e.audio.playbackRate)}));i.append(r,c,l);return i}function h(e){const t=u("div",{className:e.class.volumeRow});const n=u("input",{type:"range",min:"0",max:"1",step:"0.01",className:e.class.volumeInput,id:"volume-control",value:e.audio.volume,"aria-label":"Volume Control"});n.addEventListener("input",(()=>{e.audio.volume=parseFloat(n.value)}));const a=u("label",{htmlFor:"volume-control",className:e.class.volumeLabel,innerHTML:e.icons.volumeIcon});a.appendChild(n);t.appendChild(a);const o=k(e,n);t.appendChild(o);return t}function k(e,t){const n=u("button",{className:e.class.sleepTimerButton,innerHTML:e.icons.sleepTimer,"aria-label":"Sleep Timer"});let a=null;let o=0;const s=1*60*1e3;const i=u("span",{className:e.class.sleepTimerDuration,textContent:p(e,s/1e3),"aria-live":"polite"});n.appendChild(i);n.addEventListener("click",(()=>{if(a){clearInterval(a);a=null;t.value=1;e.audio.volume=1;o=0;r(s)}else{o=0;a=setInterval((()=>{o+=1e3;const n=s-o;const i=n/s;t.value=Math.max(0,i);e.audio.volume=parseFloat(t.value);r(n);if(o>=s){clearInterval(a);a=null;e.audio.pause();r(0)}}),1e3)}}));e.audio.addEventListener("loadedmetadata",(()=>{i.textContent=p(e,s/1e3)}));function r(t){const a=o/s;const r=2*Math.PI*9;i.textContent=p(e,t/1e3);const c=n.querySelector("svg circle:nth-child(2)");if(c){c.setAttribute("stroke-dashoffset",(1-a)*r)}}return n}function f(e){let t=u("div",{id:`${e.idPrefix}-bible-block`,className:e.class.bibleBlock.buttonGroup});const n=[{condition:true,innerHTML:e.icons.bibles,className:e.class.bibleListNavButton,onclick:()=>{e.view="bible";e.render()}},{condition:e.view==="book",innerHTML:e.icons.books,className:e.class.bookList.navButton,onclick:()=>{e.view="chapter";e.render()}},{condition:e.view==="chapter",innerHTML:e.icons.chapters,className:e.class.chapterListNavButton,onclick:()=>{e.view="book";e.render()}}];n.forEach((({condition:e,innerHTML:n,className:a,onclick:o})=>{if(e){t.appendChild(u("button",{innerHTML:n,className:a,onclick:o}))}}));return t}function v(e,t){e.bibleBlock.innerHTML="";e.bibleBlock.className=e.class.bibleBlock.wrapper;const n=C(e,t);const a=u("div",{className:e.class.selectBookChapterWrap});a.append(w(e),B(e));N(e,a);n.append(f(e));e.bibleBlock.append(n,a);y(e)}function C(e,t){const n=u("div",{className:e.class.bibleBlock.infoWrap});const a=u("div",{className:e.class.bibleBlock.languageGroup});a.append(u("div",{className:e.class.bibleBlock.iso,innerText:t.iso}),u("div",{innerText:t.cn}));n.append(a);const o=u("div",{className:e.class.bibleBlock.titleGroup});o.appendChild(u("div",{className:e.class.bibleBlock.title,innerText:t.tt}));if(t.tv&&t.tv!==t.tt){o.appendChild(u("div",{className:e.class.bibleBlock.vernacular,innerText:t.tv}))}n.appendChild(o);return n}function y(e){const t=e.bookListGrid;t.innerHTML="";if(e.resultsBooks&&e.resultsBooks.length&&e.query!==""){e.resultsBooks.forEach((n=>{t.appendChild(L(e,n.item))}))}else if(e.currentBooks&&e.query===""){if(e.currentBooks["data"]){e.currentBooks["data"].forEach((n=>{t.appendChild(L(e,n))}))}}}function L(e,t){const n=u("button",{className:`${t.book_id} ${e.class.bookList.button} ${e.currentBook.book_id==t.book_id?e.class.bookListButtonActive:""}`,ariaLabel:t.name,onclick:()=>g(e,t.book_id)});n.dataset.bookId=t.book_id;const a=u("div");a.append(u("h2",{className:e.class.bookList.title,textContent:t.name}),u("h3",{className:e.class.bookList.id,textContent:t.book_id}));n.appendChild(a);return n}function g(e,t,n=1){const a=e.currentBooks.data.find((e=>e.book_id===t));if(!a)return;d(a,n);const o=new URL(window.location);o.searchParams.set("bookId",a.book_id);window.history.replaceState({},"",o);e.query="";e.chapterListContainer.style.display="block";e.view="chapter";e.currentBook=a;T(e);v(e,e.currentBible)}function w(e){const t=u("select",{className:e.class.selectBook});if(e.currentBooks&&e.currentBooks.data){e.currentBooks.data.forEach((n=>{const a=u("option",{value:n.book_id,innerText:n.name,selected:n.book_id===e.currentBook.book_id});t.appendChild(a)}))}t.addEventListener("change",(t=>{g(e,t.target.value)}));e.bookSelect=t;return t}function B(e){const t=u("select",{className:e.class.selectChapter});if(e.currentBook&&e.currentBook.chapters){e.currentBook.chapters.forEach((n=>{const a=u("option",{value:n,innerText:e.numeralFormatter.format(n),selected:n==e.currentChapter.number});t.appendChild(a)}))}t.addEventListener("change",(t=>E(e,e.currentBook,parseInt(t.target.value))));e.chapterSelect=t;return t}function N(e,t){if(!e.currentChapter||!e.currentChapter.timestamps||e.currentChapter.timestamps.length==0)return;const n=u("select",{className:e.class.selectVerse});e.currentChapter.timestamps.forEach(((t,a)=>{const o=a+1;const s=u("option",{value:o,innerText:e.numeralFormatter.format(parseInt(o))});n.appendChild(s)}));n.addEventListener("change",(t=>{const n=parseInt(t.target.value,10);const a=n-1;if(e.currentChapter.timestamps&&e.currentChapter.timestamps[a]){const t=e.currentChapter.timestamps[a];const n=b(t);e.audio.currentTime=n}}));const a=u("div",{innerText:":",className:e.class.selectVerseSeparator});t.append(a,n);e.verseSelect=n;x(e)}function x(e){let t=null;e.audio.addEventListener("timeupdate",(()=>{const n=e.audio.currentTime;const a=e.currentChapter.timestamps;let o=-1;for(let e=0;e<a.length;e++){if(n>=b(a[e])){o=e}else{break}}if(o!==-1&&o!==t){t=o;e.verseSelect.value=o+1}}))}function T(e){e.chapterListContainer.innerHTML="";e.bibleListContainer.style.display="none";e.bookListContainer.style.display="none";e.chapterListContainer.style.display="block";const t=document.createDocumentFragment();e.currentBook.chapters.forEach((n=>{const a=u("button",{className:`${e.class.chapterButton} ${e.currentChapter.number==n?" "+e.class.chapterButtonActive:""}`,ariaLabel:`Play Chapter ${n}`,textContent:e.numeralFormatter.format(n),onclick:()=>E(e,e.currentBook,n)});t.appendChild(a)}));e.chapterListContainer.appendChild(t);if(e.currentBook?.book_id){const t=e.art[e.currentBook.book_id]?.[0];if(!t){console.warn(`No art found for book ID: ${e.currentBook.book_id}`);return}const n=document.createElement("img");n.src=`./img/chars/${t.file}`;n.className=t.class;e.chapterListContainer.appendChild(n)}}function E(e,t,n){d(e,t,n);e.chapterSelect.value=n;e.audio.play();const a=document.querySelector(`.icon-play`);a.innerHTML=e.audio.paused?e.icons.play:e.icons.pause;T(e)}function M(e){function t(e,t,n){const a=n.getBoundingClientRect();const o=(e.clientX-a.left)/a.width;t.audio.currentTime=Math.max(0,Math.min(o,1))*t.audio.duration}const n=u("div",{className:e.class?.progress?.container});const a=u("div",{id:"currentTime",className:e.class?.progress?.currentTimeDisplay,textContent:p(e,e.audio.currentTime)});const o=u("div",{id:"progress-barContainer",className:e.class?.progress?.barContainer});const s=u("div",{id:"progress-barWrapper",className:e.class?.progress?.barWrapper});const i=u("div",{id:"progress-bar",className:e.class?.progress?.barInner,style:{width:"0%"}});const r=u("div",{id:"timestamps-wrapper",className:e.class?.progress?.timestamps});const c=u("div",{className:e.class?.progress?.circleTip,style:{left:"0%"}});s.append(i,c);const l=n=>{if(e.isDragging){t(n,e,s)}};const d=()=>{if(e.isDragging){e.isDragging=false;document.body.style.userSelect="";document.removeEventListener("mousemove",l);document.removeEventListener("mouseup",d)}};s.addEventListener("mousedown",(()=>{e.isDragging=true;document.body.style.userSelect="none";document.addEventListener("mousemove",l);document.addEventListener("mouseup",d)}));s.addEventListener("click",(n=>{t(n,e,s)}));const m=u("div",{id:"currentDuration",className:e.class?.progress?.durationDisplay,textContent:p(e,e.audio.duration||0)});e.audio.addEventListener("timeupdate",(()=>{const t=e.audio.currentTime/e.audio.duration*100;i.style.width=`${t}%`;c.style.left=`calc(${t}% - 3px)`;a.textContent=p(e,e.audio.currentTime)}));e.audio.addEventListener("loadedmetadata",(()=>{r.innerHTML="";currentTime.textContent=p(e,e.audio.currentTime);m.textContent=p(e,e.audio.duration);if(e.currentChapter.timestamps&&Array.isArray(e.currentChapter.timestamps)){const t=e.currentChapter.timestamps.map(b).filter((t=>t>=0&&t<=e.audio.duration)).sort(((e,t)=>e-t));const n=.25;for(let a=0;a<t.length-1;a++){const o=t[a];const s=t[a+1];const i=(s-o)/e.audio.duration*100;const c=Math.max(0,i-n);const l=o/e.audio.duration*100+n/2;const d=u("div",{className:e.class.progress.tickWrapper,style:{position:"absolute",left:`${l}%`,width:`${c}%`}});const p=u("div",{className:`progress-tick ${e?.class?.progress?.tick} w-full h-full`});p.addEventListener("click",(()=>{e.audio.currentTime=o}));const b=u("div",{className:e.class.progress.tickLabel});b.textContent=`${a+1}`;d.appendChild(p);d.appendChild(b);r.appendChild(d)}}}));o.append(a);o.append(s);o.append(m);n.append(o,r);return n}function $(e){const t=u("div",{className:e.class.navRow});t.append(H(e,"prev"),I(e,"prev"),D(e,"prev"),_(e),D(e,"next"),I(e,"next"),H(e,"next"));const n=u("div",{className:e.class.controlsContainer});n.append(M(e),m(e),t,h(e));return n}function _(e){const t=u("button",{className:e.class.playPauseButton,onclick:()=>e.audio.paused?e.audio.play():e.audio.pause()});const n=u("span",{className:e.class.playPauseIcon,innerHTML:e.icons.play});t.appendChild(n);e.audio.addEventListener("play",(()=>{n.innerHTML=e.icons.pause}));e.audio.addEventListener("pause",(()=>{n.innerHTML=e.icons.play}));return t}function H(e,t){return u("button",{className:e.class[`${t}BookButton`],innerHTML:e.icons[`Book`],onclick:()=>{const n=e.currentBooks.data.findIndex((t=>t.book_id===e.currentBook.book_id));const a=t==="prev"?n-1:n+1;if(e.currentBooks.data[a]){g(e,e.currentBooks.data[a].book_id);E(e,e.currentBooks.data[a],1)}}})}function I(e,t){return u("button",{className:e.class[`${t}ChapterButton`],innerHTML:e.icons[`Chapter`],onclick:()=>R(e,t)})}async function R(e,t){const n=t==="prev"?-1:1;const a=e.currentChapter.number+n;const o=t==="prev"?a>0:a<e.currentBook.chapters.length+1;if(o){E(e,e.currentBook,a);return}const s=e.currentBooks.data.findIndex((t=>t.book_id===e.currentBook.book_id));const i=s+n;const r=e.currentBooks.data[i];if(r){g(e,r.book_id);E(e,r,1)}}function D(e,t){return u("button",{id:`${t}SkipButton`,className:e.class[`${t}SkipButton`],innerHTML:e.icons[`Skip`],onclick:()=>{e.audio.currentTime+(t=="next"?15:-15);e.audio.currentTime=Math.min(Math.max(e.audio.currentTime,0),e.audio.duration)}})}function S(e,t,n){const a=e.toLowerCase();const o=.9;const s=.5;const i=Math.max(s,o-(a.length>10?.15:a.length*.05));return t.reduce(((e,t)=>{let o=0;let s=0;n.forEach((e=>{if(t[e]){const n=t[e].toString().toLowerCase();const r=A(a,n);const c=r/Math.max(a.length,n.length);if(c<=i){o+=c;s++}}}));if(s>0){e.push({item:t,score:o/s})}return e}),[]).sort(((e,t)=>e.score-t.score))}function A(e,t){if(e===t)return 0;const n=Array.from({length:e.length+1},((e,t)=>t));for(let a=1;a<=t.length;a++){let o=n[0];n[0]=a;for(let s=1;s<=e.length;s++){const i=n[s];n[s]=Math.min(n[s]+1,n[s-1]+1,o+(e[s-1]!==t[a-1]));o=i}}return n[e.length]}function P(e){e.bibleListContainer.innerHTML="";const t=u("div",{className:e.class.searchWrapper});const n=u("input",{type:"search",placeholder:`Filter (${e.bibles.length}) Audio Bibles`,autocomplete:"off",className:e.class.searchInput,oninput:()=>{e.query=n.value;e.results=S(e.query,e.bibles,["tt","tv","ln"]);F(e)}});n.setAttribute("aria-label","Search");t.appendChild(n);e.bibleListContainer.appendChild(t);const a=u("div",{className:e.class.bibleListGrid});e.bibleListGrid=a;e.bibleListContainer.appendChild(a);F(e)}function F(e){const t=e.bibleListGrid;t.innerHTML="";const n=e.query?e.results.map((e=>e.item)):e.bibles;const a=document.createDocumentFragment();n.forEach((t=>a.appendChild(O(e,t))));t.appendChild(a)}function O(e,t){const n=u("div",{className:e.class.bibleButton.wrapper});const a=u("button",{className:e.class.bibleButton.button,onclick:()=>j(e,t)});n.appendChild(a);a.dataset.testId=t.id;a.setAttribute("aria-label",t.tv??t.tt);const o=u("div",{className:e.class.bibleButton.languageWrap});o.appendChild(u("h2",{className:e.class.bibleButton.language,textContent:t.ln}));o.appendChild(u("small",{className:e.class.bibleButton.iso,textContent:t.iso}));const s=u("div",{className:e.class.bibleButton.titleWrap});s.appendChild(u("h4",{className:e.class.bibleButton.title,textContent:t.tt}));if(t.tt!==t.tv&&t.tv){const n=u("p",{className:e.class.bibleButton.vernacular,textContent:t.tv});s.appendChild(n)}a.appendChild(o);a.appendChild(s);if(t.dl){const a=u("button",{className:e.class.bibleButton.download,innerHTML:e.icons.download,onclick:()=>G(e,t)});n.appendChild(a)}return n}async function G(e,t){try{if(!t.dl){console.log("Bible object does not contain a valid download URL");return}const n=u("dialog",{className:e.class.bibleDownloadDialog.wrapper});const a=u("div",{innerHTML:e?.download_text??`<div class="text-sm max-w-sm"></div>`});const o=u("div",{innerHTML:`\n            <p class="${e.class.bibleDownloadDialog.audio_copyright}">${t.audio_copyright}</p>\n            <p class="${e.class.bibleDownloadDialog.text_copyright}">${t.text_copyright}</p>`});n.append(a,o);const s=u("button",{className:e.class.bibleDownloadDialog.button_download,textContent:`Download ${t.dl_size??""}`});s.addEventListener("click",(()=>{const e=document.body.appendChild(u("a",{href:t.dl,download:""}));e.click();e.remove();n.close();n.remove()}));n.appendChild(s);const i=u("button",{className:e.class.bibleDownloadDialog.cancel,textContent:"Cancel"});i.addEventListener("click",(()=>{n.close();document.body.removeChild(n)}));n.appendChild(i);document.body.appendChild(n);n.showModal()}catch(e){console.error("An error occurred while trying to display the dialog:",e)}}async function j(e,t){if(t.tp==="hark"){e.view="book";e.currentBible=t;await c(e,t.id);v(e,t);e.render();const n=new URL(window.location);n.searchParams.set("bibleId",t.id);window.history.replaceState({},"",n)}else if(t.tp==="dbl");}function q(e){const t=u("input",{type:"search",placeholder:e.i18n?.filter_books??"Filter Books",className:e.class.searchInput,ariaLabel:"search",autocomplete:"off",oninput:()=>{e.query=t.value;console.log(t.value,e.currentBooks.data);e.resultsBooks=S(e.query,e.currentBooks.data,["name"]);y(e)}});const n=u("div",{className:e.class.searchInputContainer});n.appendChild(t);e.bookListContainer.appendChild(n);e.bookListContainer.appendChild(e.bookListGrid=u("div",{className:e.class.bookList.grid}));y(e)}class J{constructor(a,o){this.container=document.getElementById(a);this.providers=o.providers??["hark"];this.bibles=[];this.currentBible={};this.currentBooks=[];this.currentBook={};this.currentChapter={number:0};this.audio=document.createElement("audio");this.currentType="hark";this.isDragging=false;this.class=e(o.classes);this.icons=t(o.icons);this.art=n(o.art);this.results=[];this.query="";this.titles=o?.titles??[];this.view="bible";this.numeralFormatter=new Intl.NumberFormat;this.idPrefix=o?.idPrefix??"audio-player";this.views={bible:{player:"none",bibleListContainer:"block",bookListContainer:"none",chapterListContainer:"none"},book:{player:"block",bibleListContainer:"none",bookListContainer:"block",chapterListContainer:"none"},chapter:{player:"block",bibleListContainer:"none",bookListContainer:"none",chapterListContainer:"block"}}}static async create(e,t){const n=new J(e,t);await o(n);n.container.innerHTML="";const a=n.idPrefix;const s=u("div",{id:`${a}-player-container`,className:n.class.playerContainer});n.bibleListContainer=u("div",{id:`${a}-bible-list-container`,className:n.class.bibleListContainer});n.bookListContainer=u("div",{id:`${a}-book-list-container`,className:n.class.bookList.container});n.chapterListContainer=u("div",{id:`${a}-chapter-list-container`,className:n.class.chapterListContainer});n.bibleBlock=u("div",{id:`${a}-bible-block`,className:n.class.bibleBlock.wrapper});n.player=W(n);n.player.prepend(n.bibleBlock);s.append(n.audio,n.player);q(n);s.append(n.bookListContainer,n.chapterListContainer,n.bibleListContainer);n.container.appendChild(s);this.setDefaultView(n);return n}static async setDefaultView(e){const t=new URL(window.location);if(t.searchParams.get("bibleId")){await j(e,e.bibles.find((e=>e.id==t.searchParams.get("bibleId"))));e.view="book"}if(t.searchParams.get("bookId")){await g(e,t.searchParams.get("bookId"));e.view="chapter"}if(e.view==="bible"){P(e)}U(e)}render(){if(this.view==="bible"){P(this)}else if(this.view==="book"){y(this)}else if(this.view==="chapter"){T(this)}U(this)}setData(e){Object.assign(this,e)}}function U(e){const t=e.views[e.view]||views.bible;e.player.style.display=t.player;e.bibleListContainer.style.display=t.bibleListContainer;e.bookListContainer.style.display=t.bookListContainer;e.chapterListContainer.style.display=t.chapterListContainer}function W(e){const t=u("div",{id:"media-player-wrap",className:e.class.mediaPlayerWrap});const n=$(e);t.appendChild(n);return t}export{J as default};
//# sourceMappingURL=AudioPlayer.NoDefaults.min.js.map
